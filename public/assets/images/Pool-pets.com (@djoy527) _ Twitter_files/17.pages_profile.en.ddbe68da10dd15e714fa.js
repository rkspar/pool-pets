webpackJsonp([17],{558:function(t,e,i){function s(t){var e=h.merge(t,{endpoint:t.timeline_url,itemType:"tweet",eventData:{scribeContext:{component:"tweet"}}});n(e),o("#timeline",e),r.attachTo("#timeline",e,{autoplay:!0}),m.attachTo(document,{containerSelector:"#timeline",viewportThreshold:200}),d.attachTo(document),c.attachTo("#timeline",e),u.attachTo("#timeline",e),f.attachTo(".custom-timeline-tweet-box",{draftTweetId:"custom_timeline_"+e.timeline_id,canTweetDefaultText:!0,environment:e.environment,eventData:{scribeContext:{component:"tweet_box"}}}),l.attachTo(".custom-timeline-follow-card",{timeline_id:t.timeline_id}),a.attachTo("#edit-custom-timeline-dialog",t)}var n=i(559),o=i(562),a=i(589),r=i(590),l=i(609),h=i(25),c=i(610),d=i(614),u=i(449),f=i(616),m=i(353);t.exports=s},562:function(t,e,i){"use strict";function s(t,e){n(e),m.attachTo(document,e),p.attachTo(document),o.attachTo(document,e),g.attachTo(document,e),d.attachTo(document,e),f.attachTo(document,e),S.attachTo(document,e),e.excludeExpandingTweets||c.attachTo(t,e);var i=".js-new-items-bar-container";u.attachTo(i,e),e.excludeUserActions||v.attachTo(t,b.merge(e,{genericItemSelector:".js-stream-item"})),a.attachTo(document),r.attachTo(document),l.attachTo(document),h.attachTo(document)}var n=i(563),o=i(567),a=i(568),r=i(569),l=i(570),h=i(571),c=i(572),d=i(578),u=i(579),f=i(335),m=i(581),p=i(584),g=i(585),v=i(586),b=i(25),S=i(588);t.exports=s},563:function(t,e,i){function s(t){n.attachTo(document,t),a.attachTo(document,t),o.attachTo(r,t,{initialFocusSelector:".modal-close"})}var n=i(564),o=i(565),a=i(566),r="#activity-popup-dialog";t.exports=s},564:function(t,e,i){function s(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}var n=i(10),o=i(226);t.exports=n(s,o)},565:function(t,e,i){(function(e){function s(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,s=e.contentId,n=e.component;if(this.attr.eventData=o.merge(this.attr.eventData,{scribeContext:{component:n}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[n]){this.clearContent();var a=i||"Loading...";this.setTitle(a),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];this.$node.toggleClass(e,t===n)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:n,contentId:s})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(t,i){this.clearContent();var s=e("<p>").addClass("error").html(i.message);this.setUsers(s,!0),this.setTitle("Sorry! There was an error.")},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(t){t&&(this.select("activityUserCheckboxSelector").each(function(i,s){var n=e(s),o=n.closest(this.attr.accountSelector),a=o.attr("data-user-id");n.prop("checked",t.indexOf(a)<0)}.bind(this)),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector").filter(":checked").length>0;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",t)},this.saveExcludedReplyUsers=function(){var t=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(t){return e(t).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:t})},this.toggleAllReplyUsers=function(t){this.select("activityUserCheckboxSelector").prop("checked",e(t.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}var n=(i(22),i(10)),o=i(25),a=i(59),r=i(392),l=i(395);t.exports=n(s,a,l,r)}).call(e,i(1))},566:function(t,e,i){function s(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:o.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}var n=i(10),o=i(42),a=i(40);t.exports=n(s,a)},567:function(t,e,i){function s(){this.curateTweets=function(t,e){function i(t){e.added.forEach(function(){this.scribe({component:"tweet",action:"add_to_timeline"},t)}.bind(this));var i="Tweet successfully added/removed.";this.trigger("uiShowMessage",{message:i}),this.trigger("dataTweetsCurated",t)}function s(t){var e="Failed to add/remove Tweet.";this.trigger("uiShowError",{message:e})}var n={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.addTweet=function(t,e){function i(t){var e=_("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function s(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:"Tweet successfully removed."}),this.trigger("dataTweetRemovedFromTimeline",t)}function s(t){this.trigger("uiShowError",{message:"Error removing tweet."}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function s(t){this.trigger("uiShowError",{message:"Error creating collection."})}var n={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=_("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function s(t){this.trigger("uiShowError",{message:"Error updating collection."})}var n={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function s(t){this.trigger("uiShowError",{message:"Error deleting collection."})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:s.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){a.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}var n=i(10),o=i(226),a=i(34),r=i(40),_=i(22),l=n(s,o,r);t.exports=l},568:function(t,e,i){function s(){this.updateMomentMapAndTriggerEvent=function(t){return function(e){this.momentMap=r.merge(this.momentMap,e.moment_map||{}),this.trigger(document,t,e)}.bind(this)},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i,s=e.moment_id&&this.momentMap[e.moment_id];s&&(i=s.is_empty_title?_('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:s.title}),this.trigger("uiShowMessage",{message:i}))},this.removeTweetSuccess=function(t,e){var i,s=e.moment_id&&this.momentMap[e.moment_id];s&&(i=s.is_empty_title?_('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:s.title}),this.trigger("uiShowMessage",{message:i}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}var n=i(10),o=i(226),a=i(40),r=i(25),_=i(22);t.exports=n(s,o,a)},569:function(t,e,i){function s(){this.createActionHandler=function(t,e){return function(i,s){this.post({url:"/i/moments/edit/"+s.moment_id+"/"+t,data:s,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}.bind(this)},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure"})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var s=e.fileId,n=o.get(s);n&&(this.trigger(document,"uiMediaSruInit",{fileId:s,uploadId:n.uploadId,mediaCategory:n.mediaCategory}),this.mediaSruFinalize(n).then(function(t){this.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}.bind(this)).fail(i.bind(this)))},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function s(){this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be created. Give it a minute, then try again."})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:s.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:"You do not currently have permission to perform this action."}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",h.merge(t,e))}function s(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:s.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment sensitivity updated successfully."})}function s(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:s.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment location setting updated successfully."})}function s(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:s.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}var n=i(10),o=i(210),a=i(226),r=i(235),l=i(370),h=i(25);i(22);t.exports=n(s,a,r,l)},570:function(t,e,i){function s(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}var n=i(10),o=i(40);t.exports=n(s,o)},571:function(t,e,i){function s(){this.scribeTweetAction=function(t,e,i){var s=i&&i.scribeContext&&i.scribeContext.component;this.scribe({component:s,element:"moment",action:t})},this.after("initialize",function(){this.on("uiMomentMakerAddTweet",this.scribeTweetAction.bind(this,"add")),this.on("uiMomentMakerRemoveTweet",this.scribeTweetAction.bind(this,"remove")),this.on("dataMomentMakerAddTweetFailure",this.scribeTweetAction.bind(this,"add_failure")),this.scribeOnEvent("uiOpenAddToMomentDialog",{component:"add_to_moment_dialog",action:"open"})})}var n=i(10),o=i(40);t.exports=n(s,o)},572:function(t,e,i){function s(){this.defaultAttrs({tweetSelector:".tweet",tweetFormSelector:".tweet-form",conversationModuleSelector:".conversation-module",animatedGifSelector:".animated-gif"})}var n=i(10),o=i(573),a=i(574),r=i(354),l=i(575),h=i(577),c=i(338),d=i(429);t.exports=n(s,a,l,h,r,d,c,o)},573:function(t,e,i){(function(e){var s=i(20),n=i(36);t.exports=function(){s.mixin(this,[n]),this.getPlayableMediaEventData=function(t){var e={},i=t.find("[data-media-id]").attr("data-media-id");if(i)e.playlist_url=i,e.video_uuid=i;else{var s=t.find("[data-card-url]").attr("data-card-url");e.playlist_url=s,e.video_uuid=s}return e.video_type="video",e.card_details=JSON.stringify(e),e},this.logPlayableMediaEvents=function(t,i,s){var n,o=i.attr("data-tweet-id");n="animated_gif"===s||"__entity_animated_gif"===s?"gif_player":"vine_player";var a=e.extend({},this.interactionData(i),this.getPlayableMediaEventData(i));this.eventsFired.view[o]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_view"},a)),this.scribeInteraction({action:"video_view",element:n},a),this.eventsFired.view[o]=!0),this.eventsFired[t][o]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_"+t},a)),this.scribeInteraction({action:t,element:n},a),this.eventsFired[t][o]=!0)},this.shouldCollectAnalytics=function(t,e){return"animated_gif"===e||t.data("has-vine")},this.onAutoplayStart=function(t){var i=e(t.target);if(i.length){var s=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,s)&&(this.autoplayTimeout=setTimeout(function(){this.logPlayableMediaEvents("view_threshold",i,s)}.bind(this),3e3))}},this.onAutoplayStop=function(){this.autoplayTimeout&&clearTimeout(this.autoplayTimeout)},this.onTweetExpanded=function(t){var i=e(t.target);if(i.length){var s=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,s)&&this.logPlayableMediaEvents("play_from_tap",i,s)}},this.after("initialize",function(){this.eventsFired={view:{},play_from_tap:{},view_threshold:{}},this.on("uiLOHPMediaPlay",this.onTweetExpanded),this.on("uiAutoplayMedia",this.onAutoplayStart),this.on("uiStopAutoplayingMedia",this.onAutoplayStop)})}}).call(e,i(1))},574:function(t,e,i){(function(e){t.exports=function(){this.defaultAttrs({missingTweetsLinkSelector:"a.missing-tweets-link",missingTweetsBarSelector:".missing-tweets-bar",focalTweetSelector:".original-tweet",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",conversationTweetClass:"conversation-tweet",detachedConversationClass:"detached-conversation",expandingConversationClass:"expanding-conversation",selectedSelector:".selected-stream-item",awaitingAncestorsClass:".conversation-awaiting-ancestors"}),this.handleExpandConversationAndLoadMissingTweets=function(t){t.preventDefault();var e=this.streamItemFromEvent(t),i=this.getFocalPoint(e),s=i.data("permalink-path"),n=i.data("conversation-id");s&&this.trigger("uiNavigate",{href:s,conversation_id:n})},this.streamItemFromEvent=function(t){return e(t.target).closest(this.attr.topLevelStreamItemSelector)},this.getFocalPoint=function(t){return t.find(this.attr.focalTweetSelector)},this.getTweetId=function(t){return e(t).find(".tweet").attr("data-tweet-id")},this.notifyConversationMutated=function(t,i){var s=e(t.target),n=s.closest(this.attr.conversationModuleSelector);n.length&&this.trigger(n,"uiConversationModuleUpdated")},this.after("initialize",function(){this.on("click",{missingTweetsLinkSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiShortcutEnter",{missingTweetsBarSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiTweetInserted uiBeforeTweetRemoved",this.notifyConversationMutated)})}}).call(e,i(1))},575:function(t,e,i){(function(e){function s(){this.getSize=function(t,e){var i=e.attr("data-width"),s=e.attr("data-height"),n=e.width(),o=s*(n/i);return{h:o,w:n}},this.createMediaElement=function(t,e,i){return new MediaElement(t,{pluginPath:n.path,flashName:"flashmediaelement.swf",loop:!0,defaultVideoHeight:e.h,defaultVideoWidth:e.w,pluginHeight:e.h,pluginWidth:e.w,success:i})},this.prepareMediaElement=function(t,e){var i=function(t){this.setCurrentTime(t,0),t.play()}.bind(this),s=this.createMediaElement(t,e,function(t){t.addEventListener("ended",function(){t&&i(t)},!1),t.addEventListener("timeupdate",function(){if("native"===s.pluginType&&t.duration<=t.currentTime){var e=function(){i(t),t.removeEventListener("loadeddata",e)};t.addEventListener("loadeddata",e),t.load()}},!1),t.play()});return s},this.getPlayer=function(t){if(t.length){var e=t.find(this.attr.animatedGifSelector);if(e.length)return this.players[t.attr("data-tweet-id")]}return null},this.setCurrentTime=function(t,e){"native"===t.pluginType?t.currentTime=e:t.setCurrentTime(e)},this.autoplayGif=function(t){this.startGif(e(t.target).closest(".tweet"))},this.startGifOnEvent=function(t){this.startGif(e(t.target))},this.startGif=function(t){if(t=t.filter(":not(.animated-gif-playing)").has(this.attr.animatedGifSelector),t.length){var e=t.attr("data-tweet-id");if(!this.players[e]){var i=t.find(this.attr.animatedGifSelector),s=i.find("[video-src]");s.attr("src",s.attr("video-src"));var n=i.get(0),o=this.getSize(t,i);this.players[e]=this.prepareMediaElement(n,o),this.players[e].load()}t.addClass("animated-gif-playing"),setTimeout(function(){this.players[e]&&this.players[e].play&&this.players[e].play()}.bind(this),1)}},this.stopAutoplayingGif=function(t){this.stopGif(e(t.target).closest(".tweet"))},this.stopGifOnEvent=function(t){this.stopGif(e(t.target))},this.stopGif=function(t){var e=t.hasClass("animated-gif-playing")&&this.getPlayer(t);e&&(t.removeClass("animated-gif-playing"),t.find(".me-plugin").remove(),e.pause&&e.pause())},this.pauseGif=function(t){var i=e(t.target),s=i.hasClass("animated-gif-playing")&&this.getPlayer(i);s&&s.pause&&s.pause()},this.seekGif=function(t,i){var s=e(t.target),n=s.hasClass("animated-gif-playing")&&this.getPlayer(s);if(n){var o=i.position*n.duration;isNaN(n.duration)||(this.setCurrentTime(n,Math.min(o,n.duration)),n.pause())}},this.after("initialize",function(){this.players={},this.on("uiAutoplayMedia",this.autoplayGif),this.on("uiStartGif",this.startGifOnEvent),this.on("uiStopAutoplayingMedia",this.stopAutoplayingGif),this.on("uiStopGif",this.stopGifOnEvent),this.on("uiPauseGif",this.pauseGif),this.on("uiSeekGif",this.seekGif)})}var n=i(576);t.exports=s}).call(e,i(1))},576:function(t,e){t.exports={path:"/flash/1/"}},577:function(t,e,i){(function(e){var s=i(20),n=i(36);t.exports=function(){s.mixin(this,[n]),this.defaultAttrs({snapReelVideoSelector:"video.js-snap-reel",easingAcceleration:.5,FPS:e.browser.chrome?20:30}),this.logInteraction=function(t){var e=t.attr("data-tweet-id");this.eventScribed[e]||(this.scribeInteraction({action:"snap_reel_interaction"},this.interactionData(t)),this.eventScribed[e]=!0)},this.mouseOver=function(t){this.video=e(t.target),this.tweet=this.video.parents(this.attr.tweetSelector),this.tweet.hasClass("animated-gif-playing")&&(this.scribeTimeout=setTimeout(function(){this.logInteraction(this.tweet,this.video)}.bind(this),3e3)),this.start()},this.mouseOut=function(t){clearTimeout(this.scribeTimeout),this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.tweet.removeClass("animated-gif-playing"),this.trigger(this.tweet,"uiStartGif")),this.stop(),this.scribeTimeout=void 0,this.tweet=void 0,this.targetPosition=void 0},this.mouseMove=function(t){this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.targetPosition=t.pageX-this.video.offset().left)},this.start=function(){this.running=!0,this.tick()},this.stop=function(){this.running=!1},this.tick=function(){if(this.running){var t=1e3/this.attr.FPS;setTimeout(function(){requestAnimationFrame(this.tick.bind(this)),this.update()}.bind(this),t)}},this.update=function(){if(this.targetPosition){this.currentPosition+=(this.targetPosition-this.currentPosition)*this.attr.easingAcceleration;var t=this.currentPosition/this.video.width();this.trigger(this.tweet,"uiSeekGif",{position:t})}},this.after("initialize",function(t,e){this.scribeTimeout=void 0,this.eventScribed={},this.currentPosition=0,this.on("mouseover",{snapReelVideoSelector:this.mouseOver}),this.on("mouseout",{snapReelVideoSelector:this.mouseOut}),this.on("mousemove",{snapReelVideoSelector:this.mouseMove})})}}).call(e,i(1))},578:function(t,e,i){function s(){this.deleteMediaTag=function(t,e){var i=function(t){this.trigger("dataMediaTagRemoveSuccess",t)},s=function(t,i,s){this.trigger("dataMediaTagRemoveFailure",{id:e.id,status:i,errorThrown:s})},n={status_id:e.id};this.post({url:"/i/media/media_tags/delete",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiDidRemoveMediaTag",this.deleteMediaTag)})}var n=i(10),o=i(226),a=n(s,o);t.exports=a},579:function(t,e,i){(function(e){function s(){this.defaultAttrs({newItemsBarSelector:".js-new-tweets-bar",containerSelector:".stream-container",newTweetsBarVisibleClass:"new-tweets-bar-visible",scrollTopOnNewItemsClick:!0}),this.updateNewItemsBar=function(t,i){if(t.target.contains(this.node)){var s=e(i.html),n=this.select("newItemsBarSelector");n.length?(n.replaceWith(s),this.trigger("uiNewItemsBarUpdated")):(this.$node.html(s),this.$node.hide(),this.showNewItemsBar(),this.trigger("uiNewItemsBarShown")),this.trigger("uiNewItemsBarVisible")}},this.showNewItemsBar=function(){var t=this.$node.parent(),i=o.getCanvasYOffset(t),s=e(window).scrollTop();this.$node.addClass(this.attr.newTweetsBarVisibleClass),s>i?(this.$node.show(),e("html, body").scrollTop(s+this.$node.height())):this.$node.slideDown()},this.hideNewItemsBar=function(){this.trigger("uiNewItemsBarHidden");var t=this.select("newItemsBarSelector");t.remove(),this.$node.removeClass(this.attr.newTweetsBarVisibleClass)},this.handleNewItemsBarClick=function(t,i){var s=e(t.target).closest("[data-live-video-item-json]").attr("data-live-video-item-json");this.attr.scrollTopOnNewItemsClick&&a(0,"fast"),this.trigger("uiInjectNewItems",{fromClick:!0});var n=e(t.target).attr("data-item-count"),o={unreadCount:Number(n)};if(s)try{o.items=[JSON.parse(s)]}catch(t){}this.trigger("uiNewItemsBarClick",o)},this.after("initialize",function(){this.on(document,"uiUpdateNewItemsBar",this.updateNewItemsBar),this.on(document,"uiHideNewItemsBar",this.hideNewItemsBar),this.on("click",{newItemsBarSelector:this.handleNewItemsBarClick})})}var n=i(10),o=i(75),a=i(580);t.exports=n(s)}).call(e,i(1))},584:function(t,e,i){function s(t){this.defaultAttrs({itemType:"tweet"}),this.scribeActivityCount=function(t,e,i){var s={component:this.attr.itemType,element:t,action:"click"};this.scribe(s,this.interactionData(e))},this.after("initialize",function(){this.on("uiRequestReplyActivity",this.scribeActivityCount.bind(this,"reply_count")),this.on("uiRequestRetweetedActivity",this.scribeActivityCount.bind(this,"retweet_count")),this.on("uiRequestFavoritedActivity",this.scribeActivityCount.bind(this,"favorite_count"))})}var n=i(10),o=i(36),a=i(39),r=n(s,o,a);t.exports=r},585:function(t,e,i){function s(){this.getTweetTranslation=function(t,e){var i=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(t.target,"dataTweetTranslationSuccess",e)},s=function(i,s,n){this.trigger(t.target,"dataTweetTranslationError",{id:e.id,status:s,errorThrown:n})},n={id:e.tweetId,dest:e.dest};this.get({url:"/i/translations/show.json",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.submitTweetTranslation=function(t,e){var i=function(e){this.trigger(t.target,"dataTweetTranslationSuggestionSuccess",e)},s=function(i,s,n){this.trigger(t.target,"dataTweetTranslationSuggestionError",{id:e.id,status:s,errorThrown:n})};this.post({url:"/i/translations/suggest.json",data:e,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiNeedsTweetTranslation",this.getTweetTranslation),this.on("uiSuggestTweetTranslation",this.submitTweetTranslation)})}var n=i(10),o=i(226),a=n(s,o);t.exports=a},586:function(t,e,i){function s(){}var n=i(10),o=i(587),a=i(395);t.exports=n(s,a,o)},587:function(t,e,i){(function(e){function i(){this.getItemPosition=function(t){return e(this.attr.genericInteractionItemSelector).index(t.closest(this.attr.genericInteractionItemSelector))}}t.exports=i}).call(e,i(1))},588:function(t,e,i){function s(){this.scribeTweetPivotClick=function(t,e){this.scribe({component:"tweet",element:"more",action:"click"},{items:[e.item_details,e.component_details]})},this.after("initialize",function(){this.on("uiTweetPivotClick",this.scribeTweetPivotClick)})}var n=i(10),o=i(40),a=n(s,o);t.exports=a},589:function(t,e,i){function s(){this.defaultAttrs({createOrUpdateEventName:"uiUpdateCustomTimeline",orderSelector:"[name=edit-timeline-order]:checked"}),this.around("params",function(t){var e=t();return e.id=this.attr.timeline_id,e}),this.openDialog=function(){var t={is_create_dialog:!1,id_prefix:"edit",timeline_name:this.attr.timeline_name,timeline_description:this.attr.timeline_description,tweet_chron:"tweet_chron"===this.attr.timeline_order,tweet_reverse_chron:"tweet_reverse_chron"===this.attr.timeline_order,curation_reverse_chron:"curation_reverse_chron"===this.attr.timeline_order},e=l["dialogs/create_or_edit_custom_timeline_dialog"].render(t,l);this.$node.html(e),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open()},this.after("open",function(){
o.attachTo(".custom-timeline-name-field",{maxLength:25,superwarnLength:20,warnLength:15,textSelector:"#custom-timeline-name",counterSelector:".custom-timeline-name-count"}),o.attachTo(".custom-timeline-description-field",{maxLength:160,superwarnLength:150,warnLength:140,textSelector:"#custom-timeline-description",counterSelector:".custom-timeline-description-count"})}),this.after("initialize",function(){this.on(document,"uiOpenEditCustomTimelineDialog",this.openDialog)})}var n=i(10),o=i(212),a=i(59),r=i(220),l=i(108);t.exports=n(a,r,s)},590:function(t,e,i){function s(){this.defaultAttrs({itemType:"tweet"}),this.removeTweetFromTimeline=function(t,e){var i=r(this.$node,".tweet",e.sourceEventData.id);this.trigger(i,"uiBeforeTweetRemoved",e),i.closest(this.attr.tweetContainerSelector).remove(),this.trigger("uiTweetRemoved",e)},this.after("initialize",function(){this.on(document,"dataTweetRemovedFromTimeline",this.removeTweetFromTimeline)})}var n=i(591),o=i(608),a=i(395),r=i(450);t.exports=n.mixin(s,o,a)},591:function(t,e,i){var s=i(592),n=i(599),o=i(600),a=i(604),r=i(393),l=i(426),h=i(392),c=i(602),d=i(605),u=i(606),f=i(607),m=s.mixin(n,o,a,r,l,h,c,d,u,f);t.exports=m},600:function(t,e,i){(function(e){function s(){this.injectNewItems=function(t,e){if(!(this.latentItems.length<1)){e&&e.wasPeriodPress&&this.trigger("uiUserPressedPeriodAndSawNewTweets"),e&&e.wasPushStateInjection&&this.trigger("uiUserPushStateInjectedTweets"),e&&e.wasTopBarBirdClick&&this.trigger("uiUserClickedTopBarBirdAndSawNewTweets"),e&&e.wasComposedTweet&&this.trigger("uiUserComposedTweet"),this.trigger("uiHideNewItemsBar");var i=this.injectItems("prepend",this.latentItems.join(""),"uiHasInjectedNewTimeline",e);return this.resetLatentItems(),i}},o.mixin(this,[a,r]),this.defaultAttrs({streamItemSelector:".js-stream-item:not(.js-stream-item .js-stream-item)",refreshOnReturn:!0}),this.getNewItems=function(t,e){var i=Object.keys(this.composedThenInjectedTweetIds);this.trigger("uiWantsMoreTimelineItems",n.merge({include_new_items_bar:!(e&&e.injectImmediately),latent_count:this.latentCount,composed_count:i.length,composed_ids:i},this.getNewItemsData(),this.getNewItemsCountData&&this.getNewItemsCountData(),e))},this.notifyNewItems=function(t){if(t.items_html&&t.items_html.trim()){var e=t.sourceEventData||{};if(this.resetStateVariables(t),t.items_html){if(this.latentItems=this.htmlToItemArray(t.items_html).concat(this.latentItems),this.latentCount=t.new_latent_count,t.new_tweets_bar_html){var i=t.new_tweets_bar_html;this.autoplay?this.autoplayNewItems(t.new_tweets_bar_html):e.injectImmediately||(this.trigger("uiUpdateNewItemsBar",{html:i}),this.trigger("uiAddPageCount",{count:this.latentCount}))}(e.injectImmediately||e.timeline_empty)&&this.trigger("uiInjectNewItems"),e.scrollToTop&&this.scrollToTop(),e.selectTopTweet&&this.trigger("uiSelectTopTweet")}}},this.htmlToItemArray=function(t){var i=e("<div>").html(t).find(this.attr.streamItemSelector).toArray();return i.map(function(t){return e("<div>").append(t).html()})},this.saveLatentItems=function(t,e){var i=this.select("containerSelector");i.attr("data-latent-items",this.latentItems.join("")),i.attr("data-latent-count",this.latentCount)},this.resetLatentItems=function(){var t=this.select("containerSelector"),e=t.attr("data-latent-items");t.removeAttr("data-latent-items"),this.latentItems=this.htmlToItemArray(e),this.latentCount=parseInt(t.attr("data-latent-count"),10)||0,t.removeAttr("data-latent-count")},this.refreshOnNavigate=function(t,e){e.fromCache&&this.attr.refreshOnReturn&&this.trigger("uiTimelineShouldRefresh",{navigated:!0})},this.refreshAndSelectTopTweet=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0,selectTopTweet:!0})},this.injectComposedTweet=function(t,i){if(!i.in_reply_to_status_id&&i.tweet_html){this.injectNewItems();var s=e(i.tweet_html).filter(this.attr.streamItemSelector).first().attr("data-item-id");this.$node.find(".original-tweet[data-tweet-id='"+s+"']:first").length||(this.latentItems=this.htmlToItemArray(i.tweet_html),this.injectNewItems(null,{wasComposedTweet:"dataTweetSuccess"===t.type}),this.composedThenInjectedTweetIds[i.tweet_id]=window.location.href)}},this.refreshAndInjectImmediately=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0,selectTopTweet:1===this.$selected.length})},this.resetCacheOfComposedInjectedTweets=function(t,e){this.composedThenInjectedTweetIds=l={}},this.addPageCount=function(t,e){this.latentCount&&this.trigger("uiAddPageCount",{count:this.latentCount})},this.after("initialize",function(){this.latentItems=[],this.latentCount=0,this.composedThenInjectedTweetIds=l,this.resetLatentItems(),this.injectNewItems(null,{wasPushStateInjection:!0}),this.on("uiInjectNewItems",this.injectNewItems),this.on(document,"uiTimelineShouldRefresh",this.getNewItems),this.on(document,"uiBeforePageChanged",this.saveLatentItems),this.on(document,"uiPageChanged",this.refreshOnNavigate),this.on(document,"uiGotoTopOfScreen",this.refreshAndInjectImmediately),this.on(document,"uiShortcutGotoTopOfScreen",this.refreshAndSelectTopTweet),this.on(document,"dataPageMutated",this.resetCacheOfComposedInjectedTweets),this.on(document,"uiPageNeedsCount",this.addPageCount),this.attr.injectComposedTweets&&this.on(document,"dataTweetSuccess",this.injectComposedTweet)})}var n=i(25),o=i(20),a=i(601),r=i(603),l={};t.exports=s}).call(e,i(1))},601:function(t,e,i){(function(e){function s(){n.mixin(this,[o]);var t=700;this.defaultAttrs({streamItemsSelector:".stream-items",socialProofSelector:".tweet-stats-container"}),this.autoplayNewItems=function(t){if(t){var e=this.$window.scrollTop(),i=e+this.$window.height(),s=this.$promotedItem.length&&this.$promotedItem.offset().top>i,n=this.injectNewItems({},{autoplay:!0}),o=this.select("streamItemsSelector");this.travelingPTw&&s&&this.repositionPromotedItem(function(t){n.first().before(t),n=n.add(t),this.trigger(t,"uiShouldFixMargins")});var a=n.first().offset().top,r=a>e&&a<i,l=o.offset().top,h=n.last().next().offset().top-l+1;r?(o.css("marginTop",-h),this.animateBlockOfItems()):this.setScrollerScrollTop(e+h)}},this.animateBlockOfItems=function(){var e=this.select("streamItemsSelector"),i=this.$window.scrollTop(),s=parseFloat(e.css("marginTop"));e.parent().css("overflow","hidden"),e.animate({marginTop:0},{duration:t+Math.abs(s),step:function(t){this.lockedTimelineScroll&&this.setScrollerScrollTop(i+Math.abs(s-Math.ceil(t)))}.bind(this),complete:function(){e.parent().css("overflow","inherit"),this.afterAnimationQueue.forEach(function(t){t.call(this)},this),this.afterAnimationQueue=[]}.bind(this)})},this.setScrollerScrollTop=function(t){var i=this.attr.overflowScroll?this.$node:e(window);i.scrollTop(t)},this.enableAutoplay=function(){this.autoplay=!0,this.travelingPTw=this.attr.travelingPTw,this.lockedTimelineScroll=!1,this.afterAnimationQueue=[],this.newItemsXLine=0,this.$window=this.attr.overflowScroll?this.$node:e(window),this.on("mouseover",function(){this.lockedTimelineScroll=!0}),this.on("mouseleave",function(){this.lockedTimelineScroll=!1})},this.after("initialize",function(){this.attr.autoplay&&this.enableAutoplay()})}var n=i(20),o=i(602);t.exports=s}).call(e,i(1))},602:function(t,e){function i(){this.repositionPromotedItem=function(t){t.call(this,this.$promotedItem.detach())},this.after("initialize",function(){this.$promotedItem=this.$node.find(".promoted-tweet").first().closest(".stream-item")})}t.exports=i},603:function(t,e,i){(function(e){function s(){this.defaultAttrs({pollingWatchNode:e(window),pollingEnabled:!0}),this.pausePolling=function(){this.pollingTimer.pause(),this.pollingPaused=!0},this.resetPolling=function(){this.backoffEmptyResponseCount=0,this.pollingPaused=!1},this.pollForNewItems=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!1,interval:this.pollingTimer.interval,fromPolling:!0})},this.onGotMoreTimelineItems=function(t,e){if(this.attr.pollingOptions&&this.attr.pollingOptions.pauseAfterBackoff&&e&&e.sourceEventData){if(e.focused_refresh_interval){var i=this.attr.pollingOptions.blurredInterval/this.attr.pollingOptions.focusedInterval;this.pollingTimer.clear(),this.attr.pollingOptions.focusedInterval=e.focused_refresh_interval,this.attr.pollingOptions.blurredInterval=e.focused_refresh_interval*i,this.pollingTimer=n("uiTimelinePollForNewItems",this.attr.pollingWatchNode,this.attr.pollingOptions)}var s=e.sourceEventData;s.fromPolling&&(this.isNewItem(e)||s.interval<this.attr.pollingOptions.blurredInterval?this.resetPolling():++this.backoffEmptyResponseCount>=this.attr.pollingOptions.backoffEmptyResponseLimit&&this.pausePolling())}},this.getNewItemsCountData=function(t){if(this.pollingPaused&&this.attr.pollingOptions)return this.resetPolling(),{count:this.attr.pollingOptions.resumeItemCount}},this.possiblyRefreshBeforeInject=function(t,e,i){return this.pollingPaused&&i&&i.fromClick&&this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0}),t(e,i)},this.around("injectNewItems",this.possiblyRefreshBeforeInject),this.before("teardown",function(){this.pollingTimer&&this.pollingTimer.clear()}),this.after("initialize",function(){this.attr.pollingEnabled&&(this.on(document,"uiTimelinePollForNewItems",this.pollForNewItems),this.on(document,"dataGotMoreTimelineItems",this.onGotMoreTimelineItems),this.pollingTimer=n("uiTimelinePollForNewItems",this.attr.pollingWatchNode,this.attr.pollingOptions),this.resetPolling())})}var n=i(459);t.exports=s}).call(e,i(1))},604:function(t,e,i){(function(e){"use strict";function i(){this.defaultAttrs({viewAllSelector:"button.view-all-supplements",interactionsPageViewAllToggleSelector:".stream-item-activity-notification button.view-all-supplements",additionalStreamItemsSelector:".sub-stream-item-showing, .sub-stream-item-hidden"}),this.toggleInteractionsSupplements=function(t,i){var s=e(i.el),n=s.hasClass("show");this.toggleSupplementTrigger(s,n),this.toggleSubStreamItemsVisibility(s.parent(),n)},this.toggleSupplementTrigger=function(t,e){t.toggleClass("hide",e).toggleClass("show",!e)},this.toggleSubStreamItemsVisibility=function(t,e){t.find(this.attr.additionalStreamItemsSelector).toggleClass("sub-stream-item-hidden",!e).toggleClass("sub-stream-item-showing",e)},this.after("initialize",function(){this.on("click",{interactionsPageViewAllToggleSelector:this.toggleInteractionsSupplements})})}t.exports=i}).call(e,i(1))},605:function(t,e){function i(){this.defaultAttrs({pinnedStreamItemSelector:"li.js-pinned"}),this.keepPinnedStreamItemsOnTop=function(){this.$pinnedStreamItems.length&&(this.$pinnedStreamItems.first().css("margin-top","0"),this.$items.prepend(this.$pinnedStreamItems.detach()))},this.after("initialize",function(){this.$items=this.select("itemsSelector"),this.$pinnedStreamItems=this.select("pinnedStreamItemSelector"),this.on("uiHasInjectedNewTimeline",this.keepPinnedStreamItemsOnTop)})}t.exports=i},606:function(t,e,i){(function(e){i(22);t.exports=function(){this.defaultAttrs({adaptivePhotoContainer:".js-adaptive-photo",adaptiveMediaContainer:".AdaptiveMedia"}),this.getPermalinkPath=function(t){return t.closest(this.attr.streamItemSelector).find(this.attr.permalinkSelector).attr("href")},this.openAdaptiveMediaGallery=function(t,i){t.preventDefault(),t.stopPropagation();var s=e(t.target).closest(this.attr.adaptivePhotoContainer);this.trigger(t.target,"uiOpenGallery",{title:"Photo",timelineSelector:this.attr.adaptiveMediaContainer,inOverlay:this.attr.inOverlay});var n=s.closest("[data-impression-id]");n.length&&(n.attr("data-embedded-media-logged",!0),this.trigger("uiEmbeddedMedia",{impressionId:n.data("impression-id"),disclosureType:n.data("disclosure-type")})),i&&i.skipClickScribe||this.trigger("uiMediaThumbnailClick",{url:s.attr("data-image-url"),mediaType:"photo"})},this.openSelectedTweetAdaptiveMediaGallery=function(t){this.trigger(e(t.target).find(this.attr.adaptivePhotoContainer),"uiKeyboardOpenAdaptiveGallery",{skipClickScribe:!0})},this.after("initialize",function(){this.on(document,"uiOpenSelectedPhoto",this.openSelectedTweetAdaptiveMediaGallery),this.on("click uiKeyboardOpenAdaptiveGallery",{adaptivePhotoContainer:this.openAdaptiveMediaGallery})})}}).call(e,i(1))},607:function(t,e){function i(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,s=e.newState;"following"===s?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===s?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===s&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}t.exports=i},609:function(t,e,i){function s(){this.defaultAttrs({editSelector:".js-edit-custom-timeline-action",deleteSelector:".js-delete-custom-timeline-action",confirmAction:"DeleteCustomTimeline",confirmTitleText:"Delete collection",confirmBodyText:"Are you sure you want to delete this collection?",confirmCancelText:"No",confirmSubmitText:"Yes"}),this.triggerDeleteCustomTimelineDialog=function(){this.trigger("uiOpenConfirmDialog",{action:this.attr.confirmAction,titleText:this.attr.confirmTitleText,bodyText:this.attr.confirmBodyText,cancelText:this.attr.confirmCancelText,submitText:this.attr.confirmSubmitText})},this.triggerDelete=function(t,e){this.trigger("uiDeleteCustomTimeline",{timeline_id:this.attr.timeline_id})},this.after("initialize",function(){this.on("click",{editSelector:"uiOpenEditCustomTimelineDialog",deleteSelector:this.triggerDeleteCustomTimelineDialog}),this.on(document,"uiDeleteCustomTimelineConfirm",this.triggerDelete)})}var n=i(10);i(22);t.exports=n(s)},610:function(t,e,i){var s=i(611),n=i(613);t.exports=s.mixin(n)},611:function(t,e,i){var s=i(534),n=i(612);t.exports=s.mixin(n)},612:function(t,e,i){(function(e){function i(){this.defaultAttrs({selectedStreamItemSelector:".selected-stream-item",ownTweetSelector:".my-tweet"}),this.isSelected=function(t,i,s){var n=this.select("selectedStreamItemSelector"),o=n[0],a=t.target;return n.is(a)||!(!o||!e.contains(o,a))},this.getSelectedTweet=function(t,e,i){var s=this.select("selectedStreamItemSelector").find(this.attr.tweetItemSelector),n=!!s.length;return n&&(i.$tweet=s),n},this.after("initialize",function(){if(this.attr.loggedIn){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard),e=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on("uiShortcutFavorite",this.composeHandler(this.isSelected,this.getSelectedTweet,t,this.toggleFavorite)),this.on("uiShortcutRetweet",this.composeHandler(this.isSelected,this.getSelectedTweet,t,this.toggleRetweet)),this.on("uiShortcutReply",this.composeHandler(this.isSelected,this.getSelectedTweet,e,this.triggerTweetAction("uiReplyToTweet")))}})}t.exports=i}).call(e,i(1))},613:function(t,e){function i(){this.defaultAttrs({removeCuratedTweetSelector:".js-action-remove-curated-tweet"}),this.getTimelineId=function(){return{timelineId:this.attr.timeline_id}},this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionData,this.getTimelineId);this.on("click",{removeCuratedTweetSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.triggerTweetAction("uiCurateRemoveTweet"))})})}t.exports=i},614:function(t,e,i){(function(e){function s(){this.defaultAttrs({tweetSelector:".tweet",tweetActionSelector:".ProfileTweet-action",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"});var t=e("html").attr("lang");this.updateTweetStats=function(t,e){e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.statElementSelectorFor(t.name));this.updateAria(i,t.count,t.title),this.updatePresentation(i,t.count,t.compact_count)}.bind(this))},this.initializeTweetStats=function(t,i){var s=this.findUninitializedTweetOrRetweet();s.each(function(t,i){this.renderTweetStats(e(i))}.bind(this))},this.renderTweetStats=function(e){e.attr("ui-tweet-stat-initialized","true"),[["favorite",a.getFavoriteStatTitle],["retweet",a.getRetweetStatTitle],["reply",a.getReplyStatTitle]].forEach(function(i){var s=i[0],n=i[1],a=e.find(this.statElementSelectorFor(s)),r=a&&a.attr("data-tweet-stat-count");if(void 0!==r){var l=o.compactOrCommaize(r,t),h=o.getCommaizedFormat(r);this.updateAria(a,r,n(r,h)),this.updatePresentation(a,r,l)}}.bind(this))},this.updatePresentation=function(t,e,i){var s=t.find(this.attr.actionCountForPresentationSelector);t.attr("data-tweet-stat-count",Math.max(e,0)),e<=0?(t.addClass(this.attr.zeroCountClass),s.empty()):(t.removeClass(this.attr.zeroCountClass),s.text(i))},this.updateAria=function(t,e,i){var s=t.find(this.attr.actionCountForAriaSelector);s.text(i),e<=0?(t.attr("aria-hidden","true"),s.removeAttr("data-aria-label-part")):(t.removeAttr("aria-hidden"),s.attr("data-aria-label-part","0"))},this.findTweetOrRetweet=function(t){var e=this.select("tweetSelector").filter("[data-tweet-id="+t+"]");return e.length||(e=this.select("tweetSelector").filter("[data-retweet-id="+t+"]")),e},this.findUninitializedTweetOrRetweet=function(){return this.select("tweetSelector").filter(":not([ui-tweet-stat-initialized=true])")},this.statElementSelectorFor=function(t){var e={favorite:this.attr.favoriteCountSelector,retweet:this.attr.retweetCountSelector,reply:this.attr.replyCountSelector};return e[t]},this.after("initialize",function(){r.getDeciderValue("use_api_for_tweet_like")&&(this.on("uiSwiftLoaded uiPageChanged",this.initializeTweetStats),this.on("uiNeedUpdateInjectedTweetStats",this.initializeTweetStats)),this.on("dataGotTweetStats",this.updateTweetStats)})}var n=i(10),o=i(582),a=i(583),r=i(34),l=i(615);t.exports=n(s,l)}).call(e,i(1))},615:function(t,e){function i(){this.defaultAttrs({retweetStatSelector:".js-stat-retweets a",favoriteStatSelector:".js-stat-favorites a",tweetStatCountSelector:"data-tweet-stat-count",displayCountSelector:"strong"}),this.updateSocialProofStats=function(t,e){t.target===document&&e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.socialProofStatElementSelectorFor(t.name));this.updateSocialProofStat(i,t)}.bind(this))},this.socialProofStatElementSelectorFor=function(t){var e={retweet:this.attr.retweetStatSelector,favorite:this.attr.favoriteStatSelector};return e[t]},this.updateSocialProofStat=function(t,e){t.attr(this.attr.tweetStatCountSelector,e.count),t.find(this.attr.displayCountSelector).text(e.commaized_count)},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateSocialProofStats)})}t.exports=i},648:function(t,e,i){(function(e){"use strict";function i(){this.defaultAttrs({streamUserSelector:".stream-items .js-actionable-user"}),this.oldUsersDisplayed=function(t,e){var i=e.items||[],s=i.map(function(t){return{id:t.userId,impressionId:t.impressionId}});this.trigger("uiUsersDisplayed",{users:s})},this.usersDisplayed=function(){var t=this.select("streamUserSelector"),i=[];t.each(function(t,s){var n=e(s);i.push({id:n.attr("data-user-id"),impressionId:n.attr("data-impression-id")})}),this.trigger("uiUsersDisplayed",{users:i})},this.after("initialize",function(){this.usersDisplayed(),this.on("uiHasInjectedOldTimelineItems",this.oldUsersDisplayed)})}t.exports=i}).call(e,i(1))},649:function(t,e,i){(function(e){function i(){this.aroundGetOldItemsData=function(t){var i=t();return this.attr.useExcludedIdsPagination&&(i.excluded=this.select("excludedUserSelector").map(function(){return e(this).attr("data-user-id")}).toArray().join(","),i.cursor=void 0),i},this.after("initialize",function(){this.around("getOldItemsData",this.aroundGetOldItemsData)})}t.exports=i}).call(e,i(1))},660:function(t,e,i){function s(){this.getMomentScribeData=function(t){var e={impression_id:o.getClosestAttr(t,"data-guide-impression-id")},i={guide_category_id:o.getClosestAttr(t,"data-guide-category-id")},s={moment_id:o.getClosestAttr(t,"data-moment-id")},a={navigation_uri:o.getClosestAttr(t,"href")},r={visibility:o.getClosestAttr(t,"data-moment-visibility")};return o.scribeData(n.merge(e,i,s,a,r))},this.getMomentScribeInfo=function(t){return{scribeData:this.getMomentScribeData(t),scribeContext:{component:o.getClosestAttr(t,"data-component-context"),element:o.getClosestAttr(t,"data-element-context")}}}}var n=i(25),o=i(661);t.exports=s},661:function(t,e,i){(function(e){var i={scribeData:function(t){return{items:[{moments_details:t}]}},getClosestAttr:function(t,e){return t.closest("["+e+"]").attr(e)},getMomentMakerTopBarVisibility:function(){return e(".MomentMakerTopBar").attr("data-visibility-mode")}};t.exports=i}).call(e,i(1))},662:function(t,e,i){function s(){this.defaultAttrs({tooltipName:void 0}),this.showTooltip=function(){this.$node.tooltip("show"),this.setCookie()},this.hideTooltip=function(){this.$node.tooltip("hide")},this.hasCookie=function(){return!!o(this.cookieKey)},this.setCookie=function(){o(this.cookieKey,!0,{expires:1/0})},this.after("initialize",function(){this.cookieKey="moments_"+this.attr.tooltipName,this.attr.tooltipName&&!this.hasCookie()&&(this.showTooltip(),this.on(document,"click",this.hideTooltip))})}var n=i(10),o=i(52);t.exports=n(s)},665:function(t,e,i){function s(){this.defaultAttrs({createButtonSelector:".js-createMoment"}),this.createMoment=function(){this.trigger("uiMomentMakerCreateMoment")},this.after("initialize",function(){this.on("click",{createButtonSelector:this.createMoment})})}var n=i(10);t.exports=n(s)},690:function(t,e,i){(function(e){function s(){this.viewportHelpers=r,this.defaultAttrs({tweetSelector:".tweet",itemType:"tweet",checkVisibilityInterval:500}),this.checkTweetVisibility=function(){var t=this.allVisibleTweets(),e=t.map(function(t){return this.interactionData(t)},this);this.trigger("uiTweetsVisible",{tweetData:e})},this.allVisibleTweets=function(){var t=this.select("tweetSelector"),e=this.findVisibleTweet(t);if(e===-1)return[];for(var i=[],s=e;t[s]&&r.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s--;for(i.reverse(),s=e+1;t[s]&&r.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s++;return i},this.findVisibleTweet=function(t){var e=r.getContainerRect(this.$window);return this.findVisibleTweetRecursive(t.length,0,t,0,e)},this.findVisibleTweetRecursive=function(t,e,i,s,n){var o=Math.floor((t-e)/2+e);return o===e||s>100?-1:r.isAboveViewport(this.$window,i.eq(o),0,n)?this.findVisibleTweetRecursive(t,o,i,s+1,n):r.isBelowViewport(this.$window,i.eq(o),0,n)?this.findVisibleTweetRecursive(o,e,i,s+1,n):o},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.$window=e(window),this.pollingInterval=a.setIntervalEvent("uiCheckTweetVisibility",this.attr.checkVisibilityInterval),this.on(document,"uiCheckTweetVisibility",this.checkTweetVisibility)})}var n=i(10),o=i(36),a=i(9),r=i(74);t.exports=n(s,o)}).call(e,i(1))},691:function(t,e,i){function s(){this.defaultAttrs({scribeInterval:6e4,page:void 0}),this.getTime=function(){return Date.now()},this.handleTweetsVisible=function(t,e){this.recordVisibleTweets(e.tweetData)},this.recordVisibleTweets=function(t){var e={},i=this.getTime();t.forEach(function(t){this.visibleTweets[t.tweetId]?e[t.tweetId]=o.merge(this.visibleTweets[t.tweetId],{visibility_end:i}):e[t.tweetId]=o.merge(t,{visibility_start:i,visibility_end:i})},this),this.visibleTweetKeys().forEach(function(t){var i=this.visibleTweets[t],s=!e[t],n=i.visibility_start!==i.visibility_end;s&&n&&this.previouslyVisibleTweets.push(this.visibleTweets[t])},this),this.visibleTweets=e},this.flushVisibleTweets=function(t,e){var i=this.getTime();this.visibleTweetKeys().forEach(function(t){this.visibleTweets[t].visibility_end=i},this),this.recordVisibleTweets([]),this.scribeVisibilityResults()},this.onScribeVisibilityResults=function(t,e){e.page===this.attr.page&&this.scribeVisibilityResults()},this.scribeVisibilityResults=function(){if(this.previouslyVisibleTweets.length){var t={component:"stream",element:"linger",action:"results"},e={items:this.previouslyVisibleTweets.map(function(t){return this.interactionItem(t)},this)};this.previouslyVisibleTweets=[],this.scribe(t,e)}},this.visibleTweetKeys=function(){return Object.keys(this.visibleTweets).filter(function(t){return this.visibleTweets.propertyIsEnumerable(t)},this)},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.visibleTweets={},this.previouslyVisibleTweets=[],this.pollingInterval=l.setIntervalEvent("uiScribeVisibilityResults",this.attr.scribeInterval,{page:this.attr.page}),this.on(document,"uiScribeVisibilityResults",this.onScribeVisibilityResults),this.on(document,"uiBeforePageChanged uiTeardown",this.flushVisibleTweets),this.on("uiTweetsVisible",this.handleTweetsVisible)})}var n=i(10),o=i(25),a=i(40),r=i(39),l=i(9);t.exports=n(s,a,r)},711:function(t,e,i){(function(e){function s(){this.defaultAttrs({promotedTweetStoreCookieName:"h"}),this.cookie=n,this.promotedTweetDismissed=function(t,e){e.impressionId&&this.removeFromPromotedTweetStoreCookie(e)},this.removePromotedTweetsFromBlockedUser=function(t,i){var s=this.$node.find("[data-user-id="+i.userId+"].js-stream-tweet.promoted-tweet"),n=this;e.each(s,function(t,i){var s=e(i).attr("data-tweet-id");s&&n.removeFromPromotedTweetStoreCookie({id:s})})},this.removeFromPromotedTweetStoreCookie=function(t){var i;try{i=JSON.parse(n(this.attr.promotedTweetStoreCookieName))}catch(s){i=[]}e.isArray(i)||(i=[i]),i=i.filter(function(e){return e&&e.tweet_id&&e.tweet_id!==t.id}),i=0===i.length?null:JSON.stringify(i),n(this.attr.promotedTweetStoreCookieName,i)},this.after("initialize",function(){this.on("uiTweetDismissed",this.promotedTweetDismissed),this.on(document,"jsClearReinjectionCookiesForUser",this.removePromotedTweetsFromBlockedUser)})}var n=i(52);t.exports=s}).call(e,i(1))},713:function(t,e){function i(){this.defaultAttrs({dismissTweetSelector:".tweet .js-action-dismiss"}),this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);this.on("click",{dismissTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiDismissTweet"))})})}t.exports=i},717:function(t,e,i){var s=i(57),n=i(1172),o=i(475),a=i(1174),r=i(25);t.exports=function(t){var e=r.merge(t,{pushState:!1});s(e),n.attachTo("#lifeline-follow-box",{loggedIn:t.loggedIn}),o.attachTo(document,t),a.attachTo(document,t)}},718:function(t,e,i){var s=i(57),n=i(88),o=i(558),a=i(719),r=i(609);t.exports=function(t){s(t),n(t),o(t),a(t),r.attachTo(".ProfileHeading-editButtons",{timeline_id:t.timeline_id})}},719:function(t,e,i){var s=i(57),n=i(720),o=i(88),a=i(764),r=i(778),l=i(785),h=i(32),c=i(789),d=i(790),u=i(791),f=i(792),m=i(793),p=i(794),g=i(795),v=i(796),b=i(797),S=i(798),w=i(457),C=i(799),y=i(800),T=i(801),x=i(802),P=i(616),I=i(804),k=i(805),D=i(806),A=i(807),M=i(808),E=i(809),$=i(810),F=i(811),L=i(812),R=i(813),O=i(453),H=i(25),z=i(814),N=i(815),U=i(816),B=i(817),V=i(818),W=i(819),G=i(820),j=i(662);t.exports=function(t){s(H.merge(t,{promoCTASelector:".StreamItem .leadgen-card-forward .promotion-cta"})),o(t),r(".ProfileSidebar .WhoToFollow",t,{wtfOptions:t.wtfOptions,dashboardSelector:".WhoToFollow-users",successClass:"is-visible",disableProfilePopup:!0}),l(t),a(t),E.attachTo(".ProfilePage"),t.inlineProfileEditing&&n(t),O.attachTo(document),h.scribeData.profile_id=t.profile_id,h.scribeData.business_profile=t.business_profile;var e=".DMButton";t.business_profile&&c.attachTo(e);var i=".ProfileCanopy";L.attachTo(document,{debounceWait:0,breakpoints:[{"max-width":864},{"min-width":865,"max-width":1200},{"min-width":1201,"max-width":1500},{"min-width":1501,"max-width":1730},{"min-width":1731,"max-width":1930},{"min-width":1931}]}),C.attachTo(i,t),T.attachTo(document),y.attachTo(".ProfilePage--withBlockedWarning"),A.attachTo(".ProfileNav"),M.attachTo(".ProfileNav",{persistentMoreMenu:!1,moreMenuItemMinimum:2}),w.attachTo(".ProfileNav",{eventData:{scribeContext:{component:"dashboard_nav"}}}),g.attachTo(".ProfileNav-item--more");var q={scribeContext:{component:"profile_follow_card"}},Y=".ProfileCanopy-avatar";x.attachTo(Y,t,q,{nonEmptyAvatarSelector:".ProfileAvatar-container",emptyAvatarSelector:".ProfileAvatar-placeholder"}),u.attachTo(Y);var K=".ProfileNav-item--userActions";x.attachTo(K,t,q,{editProfileButtonInlineSelector:t.inlineProfileEditing?".UserActions-editButton":""}),u.attachTo(K);var X=".ProfileHeaderCard";x.attachTo(X,t,q,{fullNameSelector:".ProfileHeaderCard-name a",usernameSelector:".ProfileHeaderCard-screenname a",urlSelector:".ProfileHeaderCard-urlText a",locationSelector:".ProfileHeaderCard-locationText a",birthdaySelector:".ProfileHeaderCard-birthdateText a"}),u.attachTo(X),t.periscopeUserId&&(B.attachTo(".ProfileHeaderCard-periscopeProfile"),W.attachTo(".ProfileHeaderCard-periscopeProfile"),V.attachTo(".ProfileHeaderCard-periscopeProfile",{periscopeUserId:t.periscopeUserId,periscopeLiveStatusPollInterval:t.periscopeLiveStatusPollInterval,periscopeLiveStatusMaxPollInterval:20*t.periscopeLiveStatusPollInterval}));var Q=".ProfileCardMini";x.attachTo(Q,t,{nonEmptyAvatarSelector:".ProfileCardMini-avatar",fullNameSelector:".ProfileNameTruncated a",usernameSelector:" .ProfileCardMini-screenname a",scribeContext:{component:"profile_follow_card_mini"}}),u.attachTo(Q),f.attachTo(".ProfileHeading"),d.attachTo(i,q,{editButtonSelector:".ProfileNav .UserActions-editButton"});var J=".ProfileUserList--socialProof";D.attachTo(J),k.attachTo(J,{socialProofAvatarSelector:".ProfileUserList-facepileItem .Avatar",followersYouFollowSelector:".ProfileUserList-permalink"});var Z=".PhotoRail",tt={profileUser:t.profile_user,mediaGrid:!0,mediaGridOpen:t.mediaGridOpen,gridPushState:!0,pushStateUrl:"/"+t.profile_user.screen_name+"/media",defaultGalleryTitle:t.profile_user.name,thumbnailContainerSelector:".PhotoRail-mediaBox",thumbnailPlaceholderSelector:".js-photoRailInsertPoint",thumbnailSize:83,thumbnailsVisible:6,showAllInlineMedia:!0,showSensitiveContent:t.showSensitiveContent,eventData:{scribeContext:{component:"dashboard_media"}}};S.attachTo(document),b.attachTo(document,{endpoint:"/i/profiles/show/"+t.profile_user.screen_name+"/media_timeline"}),p.attachTo(Z,tt),$.attachTo(".js-profileSidebarTweetbox",{draftTweetId:"profile_"+t.profile_id,environment:t.environment,eventData:{scribeContext:{component:"tweet_box"}}});var et={eventData:{scribeContext:{component:"profile_sidebar"}}};P.attachTo(".NewTweetButton",et),I.attachTo(".DMButton",et),m.attachTo(document),F.attachTo(".js-profileClusterFollow",{eventData:{scribeContext:{component:"user_similarities_list"}},targetSelector:".ProfileClusterFollow",userSelector:".ProfileCard"},t),t.followerRequestsReminderMessage&&v.attachTo(".ProfilePage",{followerRequestsReminderMessage:t.followerRequestsReminderMessage,environment:t.environment}),R.attachTo(document,t),z.attachTo(document,H.merge(t,{scribeContext:{component:"commerce"}}));var it=["Balloon--red","Balloon--blue","Balloon--yellow","Balloon--purple","Balloon--green"];
N.attachTo(".ProfilePage",{autoPlayBalloonsAnimation:t.autoPlayBalloonsAnimation,colors:t.balloonAnimationColors||it}),U.attachTo(document,{scribeContext:{component:"birthday"}});var st=".TweetImpressionsModule";G.attachTo(st),t.momentsNuxTooltipsEnabled&&(j.attachTo(".ProfileNav-item--moments .ProfileNav-stat--link.is-CurrentUser",{tooltipName:"profile_moments_nav_tooltip_self"}),j.attachTo(".ProfileNav-item--moments .ProfileNav-stat--link.is-OtherUser",{tooltipName:"profile_moments_nav_tooltip_other"}))}},720:function(t,e,i){var s=(i(22),i(721)),n=i(722),o=i(723),a=i(724),r=i(725),l=i(729),h=i(730),c=i(732),d=i(733),u=i(734),f=i(735),m=i(736),p=i(737),g=i(738),v=i(739),b=i(740),S=i(741),w=i(742),C=i(747),y=i(749),T=i(751),x=i(752),P=i(753),I=i(755),k=i(756),D=i(757),A=i(762),M=i(763);t.exports=function(t){C.attachTo(".ProfilePage",{testForCssSelector:".ProfilePage-testForEditingCss:visible"},t),s.attachTo(".ProfileCanopy-addHeaderCallout"),n.attachTo(document),o.attachTo(document,t),M.attachTo(document,t,{uploadTimeout:3e4}),w.attachTo(".ProfilePage",t,{saveProfileFooterSelector:".ProfilePage-editingButtons",saveProfileButtonSelector:".ProfilePage-saveButton",cancelProfileButtonSelector:".ProfilePage-cancelButton",profileSavingClass:"is-saving",profileEditingClass:"is-editing",useProfileErrorDialog:!1,bioProfileFieldSelector:".ProfileHeaderCard-bio",urlProfileFieldSelector:".ProfileHeaderCard-urlText",avatarSelector:".ProfileAvatar-image,.ProfileAvatarEditing-image",avatarContainerSelector:".ProfileAvatar-container,.ProfileAvatarEditing-container",avatarPlaceholderSelector:".ProfileAvatar-placeholder,.ProfileAvatarEditing-placeholder",hiddenClass:"u-hidden",editAvatarSelector:".ProfileAvatarEditing-button",editHeaderSelector:".ProfileHeaderEditing-button",canToggleHeaderOptions:!0});var e={editableFieldSelector:".ProfileHeaderCardEditing-editableField",measuringFieldSelector:".ProfileHeaderCardEditing-measuringField"};m.attachTo(".ProfileHeaderCardEditing-vineProfile",{editableCheckboxSelector:".ProfileHeaderEditing-editableCheckbox",globalProfileFieldSelector:".ProfileHeaderCard-vineProfile"}),m.attachTo(".ProfileHeaderCardEditing-periscopeProfile",{editableCheckboxSelector:".ProfileHeaderEditing-editableCheckbox",globalProfileFieldSelector:".ProfileHeaderCard-periscopeProfile"}),p.attachTo(".ProfileHeaderCardEditing-name",{globalProfileFieldSelector:".ProfileHeaderCard-nameLink, .ProfileCardMini .ProfileNameTruncated-link"},e),a.attachTo(".ProfileHeaderCardEditing-bioRich",{globalProfileFieldSelector:".ProfileHeaderCard-bio",textSelector:".rich-editor",maxLength:160}),S.attachTo(".ProfileHeaderCardEditing-location"),P.attachTo(".ProfileHeaderCardEditing-location",{eventData:{scribeContext:{element:"geo_picker"}}}),p.attachTo(".ProfileHeaderCardEditing-url",{globalProfileFieldSelector:".ProfileHeaderCard-urlText",globalProfileFieldContainerSelector:".ProfileHeaderCard-url"},e),b.attachTo(".ProfileHeaderCardEditing-userColorButton"),c.attachTo(".ProfileHeaderCardEditing-userColor"),y.attachTo(document),g.attachTo(document),A.attachTo("#profile_image_upload_dialog"),A.attachTo("#header_image_upload_dialog"),d.attachTo(document),I.attachTo(document);var i={scribeContext:{page:t.pageName,section:t.sectionName,component:"profile_image_upload"}};T.attachTo("#avatar_confirm_remove_dialog",{uploadType:"avatar"}),f.attachTo(".avatar-settings .uploader-image .photo-selector",{maxSizeInBytes:10485760,fileTooBigMessage:"Please select a profile image that is less than 10 MB.",uploadType:"avatar",eventData:i,formAuthenticityToken:t.formAuthenticityToken}),D.attachTo("#profile_image_upload_dialog",{uploadType:"avatar",eventData:i,maximumWidth:512,maximumHeight:512,isAvatarWhenShowingAvatarOptions:!1,maxImageSize:716800}),h.attachTo("#choose-photo",{supportsAutoOpen:!1,uploadType:"avatar",alwaysOpen:!0,confirmDelete:!0,eventData:i}),u.attachTo(".ProfileAvatarEditing-button",{uploadType:"avatar",eventData:i});var E={scribeContext:{page:t.pageName,section:t.sectionName,component:"header_image_upload"}};T.attachTo("#header_confirm_remove_dialog",{uploadType:"header"}),f.attachTo(".header-settings .uploader-image .photo-selector",{fileNameString:"user[profile_header_image_name]",fileDataString:"user[profile_header_image]",fileInputString:"user[profile_header_image]",uploadType:"header",maxSizeInBytes:1024e4,fileTooBigMessage:"Please select an image that is less than 10MB.",onError:function(){window.scrollTo(0,0)},eventData:E,formAuthenticityToken:t.formAuthenticityToken}),D.attachTo("#header_image_upload_dialog",{uploadType:"header",maskPadding:0,top:0,left:0,maximumWidth:1500,maximumHeight:500,imageNameSelector:"#choose-header div.photo-selector input.file-name",imageDataSelector:"#choose-header div.photo-selector input.file-data",eventData:E,modalEnabledClass:"",savingClass:"is-saving",isAvatarWhenShowingAvatarOptions:!1,cropMaskSelector:".ProfileHeaderUploadDialog-cropMask",cropZoneSelector:".ProfileHeaderUploadDialog-cropZone",cropImageSelector:".ProfileHeaderUploadDialog-cropImage",cropOverlaySelector:".ProfileHeaderUploadDialog-cropOverlay"}),k.attachTo(".ProfileCanopy"),h.attachTo("#choose-header",{defaultToFileInputOpen:!0,uploadType:"header",chooseExistingSelector:"#header-choose-existing",chooseWebcamSelector:"#header-choose-webcam",deleteImageSelector:"#header-delete-image",alwaysOpen:!0,confirmDelete:!0,eventData:E}),u.attachTo(".ProfileHeaderEditing-button",{uploadType:"header",eventData:E}),t.birthdateData.DOBCollectionEnabled&&(r.attachTo(".BirthdateSelect",{maximumDateAvailable:t.birthdateData.maximumBirthdate,shouldShowVisibilityPopover:t.birthdateData.shouldShowVisibilityPopover,visibilitySettingsLearnMorePath:t.birthdateData.visibilitySettingsLearnMorePath,userId:t.userId,environment:t.environment}),v.attachTo(".BirthdateSelect"),l.attachTo(document)),x.attachTo(".ProfilePage")}},721:function(t,e,i){function s(){this.requestHeaderEditing=function(){this.trigger("uiEditProfileInitializeAndFocusOnHeaderOptions",{scribeElement:"add_header_callout"})},this.disableCallout=function(){this.$node.hide()},this.after("initialize",function(){this.on("click",this.requestHeaderEditing),this.on(document,"uiProfileHeaderUpdated",this.disableCallout)})}var n=i(10);t.exports=n(s)},722:function(t,e,i){function s(){this.showMessage=function(t,e){this.trigger("uiShowMessage",e)},this.after("initialize",function(){this.on("uiAlertBanner",this.showMessage)})}var n=i(10);t.exports=n(s)},723:function(t,e,i){function s(){this.defaultAttrs({noShowError:!0}),this.saveField=function(t,e){this.fields[e.field]=e.newValue},this.clearFields=function(){this.fields={},this.validationErrors=[]},this.addValidationError=function(t,e){this.validationErrors.push(e.message)},this.validateAndSaveProfile=function(t,e){t.preventDefault(),this.validateProfile()&&this.saveProfile(e)},this.validateProfile=function(){return!(this.validationErrors.length>0)||(this.saveProfileFailed({message:this.validationErrors.join(", ")}),!1)},this.saveProfile=function(t){Object.keys(this.fields).length>0?(this.trigger("dataInlineEditSaveStarted"),this.fields.page_context=this.attr.pageName,this.fields.section_context=this.attr.sectionName,this.post({url:"/i/profiles/update",data:this.fields,eventData:t,success:this.saveProfileSucceeded.bind(this),error:this.saveProfileFailed.bind(this)})):this.trigger("dataInlineEditSaveSuccess")},this.saveProfileSucceeded=function(t){return t.error===!0?this.saveProfileFailed(t):(this.trigger("dataInlineEditSaveSuccess",t),void this.clearFields())},this.saveProfileFailed=function(t){this.trigger("dataInlineEditSaveError",t),this.clearFields()},this.after("initialize",function(){this.fields={},this.validationErrors=[],this.on("uiInlineEditSave",this.saveField),this.on("uiInlineEditSaveValidationError",this.addValidationError),this.on("uiEditProfileSave",this.validateAndSaveProfile)})}var n=i(10),o=i(226);t.exports=n(s,o)},724:function(t,e,i){(function(e){function s(){this.reset=function(){},this.syncValue=function(){var t=this.getVisibleText().trim();this.oldTextValue!==t&&this.trigger("uiInlineEditSave",{newValue:t,field:this.$text.attr("name")})},this.saveOldValue=function(){this.oldTextValue=this.getVisibleText().trim()},this.resetToOldValue=function(){this.setVisibleText(this.oldTextValue)},this.updateProfileField=function(){var t=e(this.attr.globalProfileFieldSelector);this.getVisibleText().trim()||t.html(""),t.attr("dir",this.$text.attr("dir"))},this.after("initialize",function(){this.initTextNode(),this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileStart",this.saveOldValue),this.on(document,"uiEditProfileCancel",this.resetToOldValue),this.on(document,"uiEditProfileEnd",this.updateProfileField)})}var n=i(10),o=i(218),a=i(304),r=i(303),l=i(213),h=i(302),c=n(s,l,a,o,r,h);t.exports=c}).call(e,i(1))},725:function(t,e,i){function s(){this.defaultAttrs({buttonSelector:".BirthdateSelect-button",fieldsSelector:".BirthdateSelect-fields",birthyearSelector:".BirthdateSelect-birthyear",expandedClass:"is-expanded",hasShownWarningPopoverClass:"hasShownWarningPopover",notSetClass:"is-notSet",showFieldsAnimationDuration:550,minAgeForYearVisibility:18,shouldShowVisibilityPopover:!1,visibilitySettingsLearnMorePath:null,userId:null,maximumNumberOfBirthdateChanges:6,environment:""});var t=12096e5;this.localStorage=new l("dob_select"),this.initialBirthdateData={},this.selectedBirthdateData={},this.showFields=function(){this.maybeAddVisibilityHelpPopover(),this.$node.addClass(this.attr.expandedClass),setTimeout(function(){this.select("fieldsSelector").addClass(this.attr.expandedClass)}.bind(this),this.attr.showFieldsAnimationDuration),this.select("fieldsSelector").focus(),this.trigger("uiBirthdateSelectFieldsExpanded"),this.hasChangedDateMoreThanAllowed()&&this.trigger("uiBirthdateSelectHasReachedChangeLimit")},this.resetFields=function(){this.$node.removeClass(this.attr.expandedClass),this.$node.removeClass(this.attr.hasShownWarningPopoverClass),this.selectedBirthdateData=this.initialBirthdateData,this.select("fieldsSelector").removeClass(this.attr.expandedClass)},this.updateYearVisibility=function(t,e){var i=this.select("birthyearSelector");this.shouldHideYearVisibility(e)?this.hideOptions(i,function(t){return t.data("option-value")>0}):this.unhideOptions(i)},this.shouldHideYearVisibility=function(t){var e=t.year.value,i=t.month.value,s=t.day.value,n=new Date,o=n.getUTCFullYear()-e,a=n.getUTCMonth()+1,r=n.getUTCDate(),l=o<this.attr.minAgeForYearVisibility,h=o===this.attr.minAgeForYearVisibility,c=h&&a<i,d=h&&a===parseInt(i,10),u=d&&r<s;return l||c||u},this.hasChangedDateMoreThanAllowed=function(){var t=this.localStorage.getItem(this.numChangesStorageKey)||0;return"selenium"===this.attr.environment?t>=1:t>=this.attr.maximumNumberOfBirthdateChanges},this.initializeSelectedBirthdateData=function(){var e=this.localStorage.getItem(this.lastBirthdateChangeStorageKey)||0,i=e+t>Date.now(),s=this.hasChangedDateMoreThanAllowed();i&&s?this.disableDateOptions():this.enableDateOptions(),!i&&s&&this.localStorage.setItem(this.numChangesStorageKey,0),this.initialBirthdateData=this.selectedBirthdateData=h.merge(this.getDateSelectedData(),this.getSelectedVisibilitySettingsData()),this.trigger("uiBirthdateSelectDataInitialized",this.selectedBirthdateData),this.maybeAddBirthdateChangePopover()},this.updateSelectedBirthdateData=function(t,e){this.selectedBirthdateData=h.merge(this.selectedBirthdateData,e),this.isChangingDateFields()&&this.hasChangedDateMoreThanAllowed()?(this.trigger("uiShowError",{message:"You can only change your birthday a limited number of times"}),this.selectedBirthdateData=this.initialBirthdateData,this.trigger("uiBirthdateSelectSetFields",this.initialBirthdateData)):(this.trigger("uiBirthdateSelectDataUpdated",this.selectedBirthdateData),this.maybeAddBirthdateChangePopover())},this.setBirthdateSelectFields=function(t,e){Object.keys(e).forEach(function(t){var i=e[t];"date_select"===i.type?this.setDateSelectorOption(i.name,i.value):"visibility_setting"===i.type&&this.setVisibilitySettingOption(i.name,i.value)},this)},this.notifyInvalidDate=function(){var t,e=this.getDateSelected();t=e.year||e.month?e.year||e.day?e.month||e.day?e.year?e.month?e.day?"Complete your birthday":"Complete your birthday by entering the day":"Complete your birthday by entering the month":"Complete your birthday by entering the year":"Complete your birthday by entering the month and day":"Complete your birthday by entering the year and day":"Complete your birthday by entering the year and month",this.trigger("uiBirthdateSelectGotInvalidDateMessage",{message:t})},this.maybeAddBirthdateChangePopover=function(){var t=this.isChangingDateFields()||this.hasChangedDateMoreThanAllowed(),e=this.$node.hasClass(this.attr.hasShownWarningPopoverClass);!e&&t&&(this.addPopover("You can only change your birthday a limited number of times"),this.$node.addClass(this.attr.hasShownWarningPopoverClass))},this.isChangingDateFields=function(){return Object.keys(this.selectedBirthdateData).some(function(t){var e=this.selectedBirthdateData[t],i=this.initialBirthdateData[t];return"date_select"===e.type&&e.value>0&&i.value>0&&e.value!==i.value},this)},this.maybeAddVisibilityHelpPopover=function(){if(this.attr.shouldShowVisibilityPopover&&!this.localStorage.getItem(this.popoverStorageKey)){this.localStorage.setItem(this.popoverStorageKey,!0);var t;t=this.attr.visibilitySettingsLearnMorePath?_('You can control who sees your birthday on Twitter.<br /><a href="{{learn_more_path}}" target="_blank">Learn More</a>',{learn_more_path:this.attr.visibilitySettingsLearnMorePath}):"You can control who sees your birthday on Twitter.",this.addPopover(t)}},this.maybeRemovePopovers=function(){this.select("fieldsSelector").hasClass(this.attr.expandedClass)&&this.hideAndClearPopover()},this.setButtonTitle=function(t,e){e.has_birthdate?this.select("buttonSelector").text(e.title).removeClass(this.attr.notSetClass):this.select("buttonSelector").text("Birthday").addClass(this.attr.notSetClass)},this.storeNumberOfTimesBirthdateChanged=function(){if(this.isChangingDateFields()){var t=this.localStorage.getItem(this.numChangesStorageKey)||0;this.localStorage.setItem(this.numChangesStorageKey,t+1),this.localStorage.setItem(this.lastBirthdateChangeStorageKey,Date.now())}},this.after("initialize",function(){this.popoverStorageKey=this.attr.userId+"_hasShownVisibilityHelpPopover",this.numChangesStorageKey=this.attr.userId+"_timesBirthdateHasBeenChanged",this.lastBirthdateChangeStorageKey=this.attr.userId+"_msBirthdateWasLastChanged",this.on(document,"uiEditProfileStart",this.initializeSelectedBirthdateData),this.on("uiVisibilitySettingSelected uiDateSelectorOptionsChanged",this.updateSelectedBirthdateData),this.on("uiBirthdateSelectHasInvalidDate",this.notifyInvalidDate),this.on(this.select("buttonSelector"),"click",this.showFields),this.on(document,"uiEditProfileEnd uiBeforePageChanged",this.resetFields),this.on(document,"uiEditProfileSuccess",this.storeNumberOfTimesBirthdateChanged),this.on("uiVisibilitySettingSelected",this.close),this.on("uiDateSelectorOptionsChanged",this.updateYearVisibility),this.on("uiBirthdateSelectSetFields",this.setBirthdateSelectFields),this.on(document,"uiBirthdateSelectGotTitle",this.setButtonTitle),this.on(document,"click",this.maybeRemovePopovers)})}var _=i(22),n=i(10),o=i(726),a=i(727),r=i(728),l=i(97),h=i(25);t.exports=n(s,o,a,r)},726:function(t,e){function i(){this.defaultAttrs({genericSelectSelector:".js-dateSelector",daySelectSelector:".js-dateSelectDay",monthSelectSelector:".js-dateSelectMonth",yearSelectSelector:".js-dateSelectYear",missingFieldClass:"is-missing",maximumDateAvailable:void 0}),this.dayOptions,this.monthOptions,this.yearOptions,this.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0},this.getDaysInMonth=function(t,e){var i=+t||1,s=+(e||this.yearOptions[1].value);switch(i){case 2:return this.isLeapYear(s)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},this.getDateSelected=function(){var t=this.select("daySelectSelector"),e=this.select("monthSelectSelector"),i=this.select("yearSelectSelector");return{day:t.val(),month:e.val(),year:i.val()}},this.getDateSelectedData=function(){var t=this.select("daySelectSelector"),e=this.select("monthSelectSelector"),i=this.select("yearSelectSelector");return{day:{value:t.val(),name:t.attr("name"),type:"date_select"},month:{value:e.val(),name:e.attr("name"),type:"date_select"},year:{value:i.val(),name:i.attr("name"),type:"date_select"}}},this.setDateSelectorOption=function(t,e){var i=this.select("genericSelectSelector").filter('[name="'+t+'"]');i.val()!==e&&(i.val(e),this.updateDateOptions())},this.hasSelectedMaximumYear=function(t){return this.attr.maximumDateAvailable&&t.year>=this.attr.maximumDateAvailable.year},this.hasSelectedMaximumMonth=function(t){return this.attr.maximumDateAvailable&&t.month>=this.attr.maximumDateAvailable.month},this.updateDateOptions=function(){this.setFieldsWidth(),this.updateYearOptions(),this.updateMonthOptions(),this.updateDayOptions(),this.swapSelectedAttrs(),this.trigger("uiDateSelectorOptionsChanged",this.getDateSelectedData())},this.setFieldsWidth=function(){var t=this.select("daySelectSelector"),e=this.select("monthSelectSelector"),i=this.select("yearSelectSelector");t.is(":visible")&&t.css({width:t.css("width")}),e.is(":visible")&&e.css({width:e.css("width")}),i.is(":visible")&&i.css({width:i.css("width")})},this.updateDayOptions=function(){var t=this.select("daySelectSelector"),e=this.getDateSelected(),i=this.getDaysInMonth(e.month,e.year),s=this.hasSelectedMaximumYear(e)&&this.hasSelectedMaximumMonth(e),n=e.day,o=n,a=this.dayOptions.filter(function(t,e){var n=+e.value;return s?n<=this.attr.maximumDateAvailable.day:n<=i}.bind(this));n>0&&s&&n>=this.attr.maximumDateAvailable.day?o=this.attr.maximumDateAvailable.day:n>0&&n>i&&(o=i),t.empty().append(a).val(o);var r=!o&&(e.year>0||e.month>0);t.toggleClass(this.attr.missingFieldClass,r)},this.updateMonthOptions=function(){var t=this.select("monthSelectSelector"),e=this.getDateSelected(),i=this.monthOptions,s=e.month,n=s;this.hasSelectedMaximumYear(e)&&(i=i.filter(function(t,i){var s=+i.value;return s===this.attr.maximumDateAvailable.month&&e.day<=this.attr.maximumDateAvailable.day||s<this.attr.maximumDateAvailable.month}.bind(this)),s>0&&s>this.attr.maximumDateAvailable.month&&(n=this.attr.maximumDateAvailable.month)),t.empty().append(i).val(n);var o=!n&&(e.year>0||e.day>0);t.toggleClass(this.attr.missingFieldClass,o)},this.updateYearOptions=function(){var t=this.select("yearSelectSelector"),e=this.getDateSelected(),i=this.yearOptions,s=e.year,n=s;this.hasSelectedMaximumMonth(e)&&(e.month>this.attr.maximumDateAvailable.month||e.day>this.attr.maximumDateAvailable.day)&&(i=i.filter(function(t,e){var i=+e.value;return i<this.attr.maximumDateAvailable.year}.bind(this)),s===this.attr.maximumDateAvailable.year&&(n=this.attr.maximumDateAvailable.year-1)),t.empty().append(i).val(n);var o=!n&&(e.month>0||e.day>0);t.toggleClass(this.attr.missingFieldClass,o)},this.swapSelectedAttrs=function(){var t=this.getDateSelected();this.dayOptions.removeAttr("selected").filter('[value="'+t.day+'"]').attr("selected",!0),this.monthOptions.removeAttr("selected").filter('[value="'+t.month+'"]').attr("selected",!0),this.yearOptions.removeAttr("selected").filter('[value="'+t.year+'"]').attr("selected",!0)},this.after("initialize",function(){this.dayOptions=this.select("daySelectSelector").find("option"),this.monthOptions=this.select("monthSelectSelector").find("option"),this.yearOptions=this.select("yearSelectSelector").find("option"),this.on(document,"uiEditProfileStart",this.updateDateOptions),this.on("change",{genericSelectSelector:this.updateDateOptions})}),this.disableDateOptions=function(){var t=this.getDateSelected();this.dayOptions.filter('[value!=""]').attr("disabled",!0),this.dayOptions.filter('[value="'+t.day+'"]').removeAttr("disabled"),this.monthOptions.filter('[value!=""]').attr("disabled",!0),this.monthOptions.filter('[value="'+t.month+'"]').removeAttr("disabled"),this.yearOptions.filter('[value!=""]').attr("disabled",!0),this.yearOptions.filter('[value="'+t.year+'"]').removeAttr("disabled")},this.enableDateOptions=function(){this.dayOptions.removeAttr("disabled"),this.monthOptions.removeAttr("disabled"),this.yearOptions.removeAttr("disabled")}}t.exports=i},727:function(t,e,i){(function(e){function s(){n.mixin(this,[o]),this.defaultAttrs({settingsSelector:".VisibilitySettings",dropdownIconSelector:".VisibilitySettings-dropdownIcon",selectedDropdownIconSelector:".VisibilitySettings-dropdownIcon:not(.u-hidden)",hiddenClass:"u-hidden",hiddenSelector:".u-hidden",visibilityButtonSelector:".VisibilitySettings-button",visibilityOptionSelector:".VisibilitySettings-option",visibilityRadioSelector:".js-visibilitySettingsRadio"}),this.updateSelectionFromEvent=function(t){var i=e(t.target).closest(this.attr.visibilityOptionSelector);this.updateSelection(i)},this.updateSelection=function(t){var e=t.closest(this.attr.settingsSelector),i=t.find(this.attr.visibilityRadioSelector),s=e.find(this.attr.visibilityButtonSelector),n=e.find(this.attr.dropdownIconSelector),o=e.find(this.attr.selectedDropdownIconSelector),a=i.data("dropdown-icon-selector");this.clearSelection(e),i.prop("checked",!0),o.addClass(this.attr.hiddenClass),n.filter(a).removeClass(this.attr.hiddenClass),s.attr("data-original-title",i.data("setting-name")),s.focus(),this.trigger("uiVisibilitySettingSelected",this.getSelectedVisibilitySettingsData())},this.setVisibilitySettingOption=function(t,e){var i=this.$node.find('input[name="'+t+'"][value="'+e+'"]'),s=i.closest(this.attr.visibilityOptionSelector);this.updateSelection(s)},this.clearSelection=function(t){t.find(this.attr.visibilityRadioSelector).each(function(t,i){e(i).prop("checked",!1)})},this.hideOptions=function(t,i){var s=t.find(this.attr.visibilityOptionSelector);if(s.each(function(t,s){var n=e(s);"function"==typeof i&&i(n)&&n.addClass(this.attr.hiddenClass)}.bind(this)),this.selectedOptionIsHidden(t)){var n=s.not(this.attr.hiddenSelector).first();this.updateSelection(n)}},this.selectedOptionIsHidden=function(t){return t.find(this.attr.visibilityRadioSelector).filter(":checked").closest(this.attr.visibilityOptionSelector).hasClass(this.attr.hiddenClass)},this.unhideOptions=function(t,i){t.find(this.attr.visibilityOptionSelector).each(function(t,s){var n=e(s);("function"==typeof i&&i(n)||"undefined"==typeof i)&&n.removeClass(this.attr.hiddenClass)}.bind(this))},this.getSelectedVisibilitySettingsData=function(){var t={};return this.select("visibilityRadioSelector").filter(":checked").each(function(i,s){var n=e(s);t[n.attr("name")]=this.getRadioOptionData(n)}.bind(this)),t},this.getRadioOptionData=function(t){return{value:t.val(),name:t.attr("name"),type:"visibility_setting"}},this.after("initialize",function(){this.on("click",{visibilityOptionSelector:this.updateSelectionFromEvent})})}var n=i(20),o=i(397);t.exports=s}).call(e,i(1))},728:function(t,e,i){(function(e){function i(){this.addPopover=function(t){this.$popover?this.hideAndClearPopover():this.initializePopover(),this.$popoverText.html(t),this.$node.append(this.$popover)},this.hideAndClearPopover=function(){this.$popover&&this.$popoverText&&(this.$popover.remove(),this.$popoverText.empty())},this.initializePopover=function(){this.$popover=e('<div class="Popover"><div class="Popover-text"></div></div>"'),this.$popoverText=this.$popover.children(),this.$node.addClass("Popover-container"),this.on(this.$popover,"click",this.hideAndClearPopover)}}t.exports=i}).call(e,i(1))},729:function(t,e,i){function s(){this.defaultAttrs({scribeContext:{component:"inline_edit",element:"birthdate_select"}}),this.scribeBirthdateSelectAction=function(t,e,i){var s=i&&i.sourceEventData,n=a.merge(this.attr.scribeContext,{action:t});this.scribe(n,s||i)},this.after("initialize",function(){this.on(document,"uiBirthdateSelectFieldsExpanded",this.scribeBirthdateSelectAction.bind(this,"expand")),this.on(document,"uiBirthdateSelectHasInvalidDate",this.scribeBirthdateSelectAction.bind(this,"invalid")),this.on(document,"uiBirthdateSelectHasReachedChangeLimit",this.scribeBirthdateSelectAction.bind(this,"limit_exceeded"))})}var n=i(10),o=i(40),a=i(25);t.exports=n(s,o)},730:function(t,e,i){(function(e){function s(){this.defaultAttrs({fileInputSelector:".file-input",uploadType:"avatar",chooseExistingSelector:"#photo-choose-existing",chooseWebcamSelector:"#photo-choose-webcam",deleteImageSelector:"#photo-delete-image",caretSelector:".dropdown-caret",photoSelector:"div.photo-selector",showDeleteSuccessMessage:!0,alwaysOpen:!1,confirmDelete:!1,defaultToFileInputOpen:!1,supportsAutoOpen:!0}),this.openWebCamDialog=function(t){t.preventDefault(),this.trigger("uiCropperWebcam",{uploadType:this.attr.uploadType})},this.webcamDetected=function(){l.hasCanvas()&&this.updateDropdownItemVisibility(this.select("chooseWebcamSelector"),!0)},this.dropdownOpened=function(t,e){var i=e&&e.scribeContext||this.attr.eventData.scribeContext;this.scribe(h.merge(i,{action:"open"}))},this.deleteImage=function(){if("background"!==this.attr.uploadType){this.attr.confirmDelete&&(this.preventMenuClose=!0);var t=this.attr.confirmDelete?"uiConfirmDeleteImage":"uiDeleteImage";this.trigger(t,{uploadType:this.attr.uploadType})}else this.hideFileName();this.attr.confirmDelete||this.hideDeleteLink()},this.handleSaveImageSuccess=function(t,e){e.message&&this.attr.showSaveSuccessMessage&&this.trigger("uiAlertBanner",e),this.showDeleteLink()},this.handleSaveImageFailure=function(t,e){e.message=e.message||_("Sorry! Something went wrong saving your photo. Please try again.",this.attr),this.trigger("uiAlertBanner",e)},this.handleDeleteImageSuccess=function(t,e){e.message&&this.attr.showDeleteSuccessMessage&&this.trigger("uiAlertBanner",e)},this.handleDeleteImageFailure=function(t,e){e.message=e.message||_("Sorry! Something went wrong deleting your photo. Please try again.",this.attr),this.trigger("uiAlertBanner",e),this.showDeleteLink()},this.showDeleteLinkForTargetedButton=function(t,e){"background"===e.uploadType&&this.showDeleteLink()},this.showDeleteLink=function(t,e){this.updateDropdownItemVisibility(this.select("deleteImageSelector"),!0)},this.hideDeleteLink=function(t,e){this.updateDropdownItemVisibility(this.select("deleteImageSelector"),!1)},this.showFileName=function(t,e){this.$node.siblings(".display-file-requirement").hide(),this.$node.siblings(".display-file-name").text(e.fileName).show()},this.hideFileName=function(){this.$node.siblings(".display-file-requirement").show(),this.$node.siblings(".display-file-name").hide()},this.updateDropdownItemVisibility=function(t,e){t.toggleClass("u-hidden",!e),this.updateMenuHierarchy()},this.upliftFilePicker=function(){var t=this.select("photoSelector");this.select("togglerSelector").hide(),t.find("button").attr("disabled",!1),t.appendTo(this.$node)},this.moveFilePickerBackIntoMenu=function(){var t=this.select("photoSelector");t.appendTo(this.select("chooseExistingSelector")),this.select("togglerSelector").show()},this.updateMenuHierarchy=function(){this.attr.alwaysOpen||(1===this.availableDropdownItems().length?this.upliftFilePicker():this.moveFilePickerBackIntoMenu())},this.availableDropdownItems=function(){return this.select("menuItemSelector").filter(function(){return"none"!==e(this).css("display")})},this.addCaretHover=function(){this.select("caretSelector").addClass("hover")},this.removeCaretHover=function(){this.select("caretSelector").removeClass("hover")},this.handleCloseRequest=function(t){(this.attr.alwaysOpen||this.preventMenuClose)&&t.preventDefault()},this.handleOpenRequest=function(t){var e=this.availableDropdownItems();1===e.length&&this.attr.supportsAutoOpen&&l.supportsCropper()&&(t.preventDefault(),this.attr.defaultToFileInputOpen?(this.trigger("uiEditProfileHideOptions"),e.find(this.attr.fileInputSelector).click()):e.click())},this.preventIncompatibleBrowsersUploadingPhotos=function(t){l.supportsCropper()||(this.trigger("uiAlertBanner",{message:"Please upgrade your browser to upload photos."}),t.preventDefault())},this.after("initialize",function(){this.on(document,"uiFileSelected",this.verifyUploadType(this.showDeleteLinkForTargetedButton)),this.on(document,"uiFileNameReady",this.verifyUploadType(this.showFileName)),this.on(document,"uiHideDeleteLink",this.verifyUploadType(this.hideDeleteLink)),this.on(document,"dataSaveImageSuccess",this.verifyUploadType(this.handleSaveImageSuccess)),this.on(document,"dataSaveImageFailure",this.verifyUploadType(this.handleSaveImageFailure)),this.on(document,"dataDeleteImageSuccess",this.verifyUploadType(this.handleDeleteImageSuccess)),this.on(document,"dataDeleteImageFailure",this.verifyUploadType(this.handleDeleteImageFailure)),this.on("uiDropdownOpened",this.dropdownOpened),this.on("uiDropdownOpenRequested",this.handleOpenRequest),this.on("uiDropdownCloseRequested",this.handleCloseRequest),this.on("click",{chooseWebcamSelector:this.openWebCamDialog,deleteImageSelector:this.deleteImage,chooseExistingSelector:this.preventIncompatibleBrowsersUploadingPhotos}),this.on("mouseover focusin",{firstMenuItemSelector:this.addCaretHover}),this.on("mouseout focusout",{firstMenuItemSelector:this.removeCaretHover}),this.updateMenuHierarchy()}),this.before("teardown",function(){delete window.webcam})}var n=i(10),o=i(397),a=i(40),r=i(731),l=i(269),h=i(25),_=i(22);t.exports=n(s,o,a,r)}).call(e,i(1))},731:function(t,e){function i(){this.verifyUploadType=function(t){return function(e,i){if(i&&(i.uploadType||i.sourceEventData&&i.sourceEventData.uploadType)===this.attr.uploadType)return t.apply(this,arguments)}}}t.exports=i},732:function(t,e,i){(function(e){function s(){this.defaultAttrs({colorPickerColorBoxSelector:".ColorPicker-color",colorPickerColorRadioSelector:".ColorPicker-color :radio",colorPickerHexBoxSelector:".ColorPicker-hex",colorPickerHexInputSelector:".ColorPicker-hexInput",colorPickerHexRadioSelector:".ColorPicker-hex :radio",colorPickerMoreBoxSelector:".ColorPicker-more",colorPickerMoreRadioSelector:".ColorPicker-more :radio",colorPickerSelector:".ColorPicker",colorPickerTransparentContainerSelector:".ColorPicker-transparent",currentColorSelector:".js-current-color",hiddenClass:"u-hiddenVisually",iconCheckClass:"Icon--check",iconDiscoverClass:"Icon--discover",iconSelector:".Icon",radioSelector:":radio",isFocusedClass:"is-focused"});var t={9:"Tab",37:"Left Arrow",38:"Up Arrow",39:"Right Arrow",40:"Down Arrow"},i="^#([0-9a-f]{3}|[0-9a-f]{6})$";this.addFocusClass=function(i,s){t.hasOwnProperty(i.which)&&e(s.el).addClass(this.attr.isFocusedClass)},this.removeFocusClass=function(i,s){(t.hasOwnProperty(i.which)||"focusout"===i.type)&&e(s.el).removeClass(this.attr.isFocusedClass)},this.removeAndAddClassesToTargetIcon=function(t,e,i){t="string"==typeof t?t:"",e="string"==typeof e?e:"",i.find(this.attr.iconSelector).removeClass(t).addClass(e)},this.focusColorPicker=function(){this.$colorPickerHexInput.is(":visible")?this.$colorPickerHexInput.focus():this.select("colorPickerSelector").focus()},this.changeHexBoxColor=function(t){this.$colorPickerHexBox.css("border-color",t).css("background-color",t).attr("data-color",t),this.$colorPickerHexInput.css("border-color",t)},this.changeHexInput=function(t){"#"===t.charAt(0)&&(t=t.substring(1)),this.$colorPickerHexInput.val(t)},this.isHexCode=function(t){return t.match(i)},this.currentColor=function(){return this.select("currentColorSelector").attr("data-color").toLowerCase()},this.setColor=function(t){t=t.toLowerCase(),this.isHexCode(t)&&(this.select("currentColorSelector").attr("value",t),this.trigger("uiColorPicked",{targetSelector:"#"+this.select("togglerSelector").attr("id"),hex:t}),this.isHexVisible?this.changeHexBoxColor(t):this.changeHexInput(t))},this.showHex=function(){this.select("colorPickerMoreBoxSelector").closest(this.attr.colorPickerTransparentContainerSelector).addClass(this.attr.hiddenClass).hide(),
this.$colorPickerHexBox.removeClass(this.attr.hiddenClass).css("display","inline-block"),this.$colorPickerHexInput.val("").focus()},this.hideHex=function(){this.$colorPickerHexBox.addClass(this.attr.hiddenClass).hide(),this.select("colorPickerMoreBoxSelector").closest(this.attr.colorPickerTransparentContainerSelector).removeClass(this.attr.hiddenClass).css("display","inline-block");var t=this.$colorPickerHexBox.data("original-color");this.changeHexBoxColor(t),this.removeAndAddClassesToTargetIcon(null,this.attr.iconDiscoverClass,this.$colorPickerHexBox)},this.initColorPicker=function(){this.$colorPickerHexBox.hide(),this.$colorPickerHexInput.attr("placeholder",this.currentColor().substring(1)),this.$selectedBox&&this.removeAndAddClassesToTargetIcon(this.attr.iconCheckClass,null,this.$selectedBox);var t=this.currentColor(),e='[data-color="'+(t||"")+'"]',i=this.$node.find(this.attr.colorPickerColorBoxSelector+e).first();0===i.length?(this.isHexVisible=!0,this.showHex(),t?(this.changeHexBoxColor(t),this.changeHexInput(t),this.$selectedBox=this.$colorPickerHexBox,this.removeAndAddClassesToTargetIcon(this.attr.iconDiscoverClass,this.attr.iconCheckClass,this.$selectedBox)):this.$selectedBox=this.select("colorPickerMoreBoxSelector")):(this.isHexVisible=!1,this.hideHex(),this.$selectedBox=i,this.removeAndAddClassesToTargetIcon(null,this.attr.iconCheckClass,this.$selectedBox),this.$selectedBox.find(this.attr.radioSelector).attr("checked",!0))},this.selectColorBox=function(t){var i=e(t.target).closest("[data-color]").attr("data-color").toLowerCase();this.isHexVisible?(this.isHexVisible=!1,this.setColor(i),this.hideHex()):this.setColor(i),this.removeAndAddClassesToTargetIcon(this.attr.iconCheckClass,null,this.$selectedBox),this.$selectedBox=e(t.target).closest(this.attr.colorPickerColorBoxSelector),this.removeAndAddClassesToTargetIcon(null,this.attr.iconCheckClass,this.$selectedBox)},this.selectMoreBox=function(){this.isHexVisible===!1&&(this.showHex(),this.isHexVisible=!0,this.$selectedBox.find(this.attr.radioSelector).attr("checked",!0))},this.selectHexInput=function(t){var i="#"+e(t.target).val();this.setColor(i),this.$selectedBox.is(this.$colorPickerHexBox)===!1&&this.isHexCode("#"+this.$colorPickerHexInput.val())&&(this.removeAndAddClassesToTargetIcon(this.attr.iconCheckClass,null,this.$selectedBox),this.$selectedBox=this.$colorPickerHexBox,this.removeAndAddClassesToTargetIcon(this.attr.iconDiscoverClass,this.attr.iconCheckClass,this.$selectedBox),this.select("colorPickerHexRadioSelector").attr("checked",!0))},this.renderColorPicker=function(){var t=o["highline/components/color_picker"].render(o);this.$node.append(t),this.$colorPickerHexBox=this.select("colorPickerHexBoxSelector"),this.$colorPickerHexInput=this.select("colorPickerHexInputSelector"),this.wasRendered=!0},this.addColorPicker=function(){this.wasRendered||this.renderColorPicker(),this.initColorPicker()},this.after("closeAndRestoreFocus",function(){this.select("togglerSelector").focus()}),this.after("initialize",function(){this.wasRendered=!1,this.on("uiDropdownOpened",a.once(this.addColorPicker)),this.on("uiDropdownOpened",this.focusColorPicker),this.on(document,"uiEditProfileStart",this.addColorPicker),this.on("change",{colorPickerColorRadioSelector:this.selectColorBox}),this.on("click",{colorPickerMoreRadioSelector:this.selectMoreBox}),this.on("input",{colorPickerHexInputSelector:this.selectHexInput}),this.on("keyup",{colorPickerColorBoxSelector:this.addFocusClass,colorPickerMoreBoxSelector:this.addFocusClass}),this.on("keydown focusout",{colorPickerColorBoxSelector:this.removeFocusClass,colorPickerMoreBoxSelector:this.removeFocusClass})}),this.before("teardown",function(){this.select("colorPickerSelector").remove()})}var n=i(10),o=i(108),a=i(25),r=i(312);t.exports=n(r,s)}).call(e,i(1))},733:function(t,e,i){function s(){this.after("initialize",function(){this.scribeOnEvent("uiDropped",{action:"drag_and_drop"})})}var n=i(10),o=i(40);t.exports=n(s,o)},734:function(t,e,i){function s(){this.defaultAttrs({uploadType:"",enableEvent:"uiEditProfileStart",disableEvent:"uiEditProfileEnd"}),this.triggerGotProfileImageData=function(t){this.trigger("uiGotProfileImageData",{fileId:t.fileId,uploadType:this.attr.uploadType,wasDropped:!0})},this.getDroppedImageData=function(t,e){if(this.editing){var i=e.files&&e.files[0];!i||i.type&&!i.type.match(/^image\//)||(t.stopImmediatePropagation(),a.getFileInfo(i.name,i).then(this.triggerGotProfileImageData.bind(this)))}},this.enableDrop=function(){this.editing=!0},this.disableDrop=function(){this.editing=!1},this.after("initialize",function(){this.editing=!1,this.on(document,this.attr.enableEvent,this.enableDrop),this.on(document,this.attr.disableEvent,this.disableDrop),this.on("uiDrop",this.getDroppedImageData)})}var n=i(10),o=i(299),a=i(259);t.exports=n(s,o)},735:function(t,e,i){function s(){this.defaults={uploadType:"",fileNameTextSelector:".photo-file-name",alertEvent:"uiAlertBanner"},this.updateFileNameText=function(t,e){var i=this.truncate(e.fileName,18);this.select("fileNameSelector").val(e.fileName),this.select("fileNameTextSelector").text(i),this.trigger("uiFileNameReady",{fileName:i})},this.addFileError=function(t){var e=t===a.FILE_TOO_LARGE?this.attr.fileTooBigMessage:o(t);e&&this.trigger(this.attr.alertEvent,{message:e}),this.scribe({component:"profile_image",element:"upload",action:"failure"}),"function"==typeof this.attr.onError&&this.attr.onError(),this.reset()},this.truncate=function(t,e){if(t.length<=e)return t;var i=Math.ceil(e/2),s=Math.floor(e/2),n=t.substr(0,i),o=t.substr(t.length-s,s);return n+"…"+o},this.initializeButton=function(){this.select("buttonSelector").attr("disabled",!1),this.updateAcceptedFormats()},this.resetUploader=function(){this.select("fileNameSelector").val(""),this.select("fileNameTextSelector").text("No file selected")},this.after("initialize",function(){this.maxSizeInBytes=this.attr.maxSizeInBytes,this.initializeButton(),this.on(this.$node,"uiPreviewThumbnailShow",this.updateFileNameText),this.on("uiResetUploader",this.resetUploader)})}var n=i(10),o=i(272),a=i(264),r=i(273),l=i(40),h=(i(22),n(s,r,l));t.exports=h},736:function(t,e,i){(function(e){function s(){this.attributes({editableCheckboxSelector:null,globalProfileFieldSelector:null,hiddenClass:"u-hidden"}),this.editableFieldValue=function(){return this.$editableField.is(":checked")},this.saveOldValue=function(){this.oldValue=this.editableFieldValue()},this.resetToOldValues=function(){this.$editableField.attr("checked",this.oldValue),this.updateProfileField(this.oldValue)},this.syncValue=function(){var t=this.editableFieldValue();this.oldValue!==t&&(this.updateProfileField(t),this.trigger("uiInlineEditSave",{newValue:t,field:this.$editableField.attr("name")}))},this.updateProfileField=function(t){"boolean"==typeof this.oldValue&&this.$profileField.toggleClass(this.attr.hiddenClass,!t)},this.closeOpenDropdowns=function(){this.trigger("uiEditProfileHideOptions")},this.after("initialize",function(){this.$editableField=this.select("editableCheckboxSelector"),this.$profileField=e(this.attr.globalProfileFieldSelector),this.on(document,"uiEditProfileStart",this.saveOldValue),this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileCancel uiEditProfileEditError",this.resetToOldValues),this.on(this.$editableField,"focus",this.closeOpenDropdowns)})}var n=i(10);t.exports=n(s)}).call(e,i(1))},737:function(t,e,i){(function(e){function s(){var t=1.2;this.defaultAttrs({editableFieldSelector:".editable-field",profileFieldSelector:".profile-field",globalProfileFieldSelector:null,globalProfileFieldContainerSelector:null,measuringFieldSelector:".measuring-field",padding:20,extraCharsForMeasuring:""}),this.syncDimensions=function(){if(this.$measuringField.length){var t=this.getDimensions(this.currentText());if(this.isTextArea){var e=Math.ceil(t.height/this.lineHeight);this.$editableField.attr("rows",e)}else this.$editableField.width(t.width+this.padding)}},this.saveOldValues=function(){this.oldTextValue=this.editableFieldValue(),this.oldHtmlValue=this.$profileField.html()},this.resetProfileField=function(){this.$profileField.html(this.oldHtmlValue)},this.resetToOldValues=function(){this.$editableField.val(this.oldTextValue).trigger("uiInputChanged"),this.resetProfileField(),this.updateProfileFieldContainerVisibility()},this.syncValue=function(){var t=this.editableFieldValue();this.oldTextValue!==t&&(this.setProfileField(),this.trigger("uiInlineEditSave",{newValue:t,field:this.$editableField.attr("name")}))},this.setProfileField=function(){var t=this.editableFieldValue();this.truncateLength&&t.length>this.truncateLength&&(t=t.substr(0,this.truncateLength)+"…"),this.$profileField.text(t),this.updateProfileFieldContainerVisibility()},this.currentText=function(){return this.editableFieldValue()||this.getPlaceholderText()},this.editableFieldValue=function(){return this.$editableField.val()},this.updateProfileFieldContainerVisibility=function(){var t=""===this.editableFieldValue().trim();this.$profileFieldContainer.toggleClass("u-hidden",t)},this.addPadding=function(){this.padding=this.attr.padding},this.removePadding=function(){this.padding=0},this.getDimensions=function(t){return this.truncateLength&&(t=t.substr(0,this.truncateLength)),this.prevText!==t&&(this.measureDimensions(t),this.prevText=t),{width:this.width,height:this.height}},this.measureDimensions=function(t){this.$measuringField.text(t+this.attr.extraCharsForMeasuring),this.height=this.$measuringField.height(),this.width=this.$measuringField.width()},this.preventNewlineAndLeadingSpace=function(t){(13===t.keyCode||32===t.keyCode&&!this.editableFieldValue())&&(t.preventDefault(),t.stopImmediatePropagation())},this.getPlaceholderText=function(){return this.$editableField.attr("placeholder")},this.closeOpenDropdowns=function(){this.trigger("uiEditProfileHideOptions")},this.after("initialize",function(){this.$editableField=this.select("editableFieldSelector"),this.$profileField=this.attr.globalProfileFieldSelector?e(this.attr.globalProfileFieldSelector):this.select("profileFieldSelector"),this.$measuringField=this.select("measuringFieldSelector"),this.$profileFieldContainer=e(this.attr.globalProfileFieldContainerSelector),this.lineHeight=parseInt(this.$profileField.css("line-height"),10)||parseInt(this.$profileField.css("font-size"),10)*t,this.isTextArea=this.$editableField.is("textarea"),this.truncateLength=parseInt(this.$editableField.attr("data-truncate-length"),10),this.padding=0,this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileStart",this.saveOldValues),this.on(document,"uiEditProfileCancel",this.resetToOldValues),this.on(document,"uiEditProfileStart",this.syncDimensions),this.on(document,"uiShowProfileEditError",this.resetProfileField),this.on(this.$editableField,"keydown",this.preventNewlineAndLeadingSpace),this.on(this.$editableField,"focus",this.closeOpenDropdowns),this.isTextArea||(this.on(this.$editableField,"focus",this.addPadding),this.on(this.$editableField,"blur",this.removePadding)),this.on(this.$editableField,"keyup focus blur update paste",this.syncDimensions)})}var n=i(10);t.exports=n(s)}).call(e,i(1))},738:function(t,e,i){function s(){this.defaultAttrs({scribeContext:{component:"inline_edit"}}),this.scribeAction=function(t){var e=o.merge(this.attr.scribeContext,{action:t});return function(t,i){this.scribe(e,i)}},this.after("initialize",function(){this.on("uiEditProfileStart",this.scribeAction("edit")),this.on("uiEditProfileCancel",this.scribeAction("cancel")),this.on("dataInlineEditSaveSuccess",this.scribeAction("success")),this.on("dataInlineEditSaveError",this.scribeAction("error"))})}var n=i(10),o=i(25),a=i(40),r=n(s,a);t.exports=r},739:function(t,e,i){function s(){this.oldBirthdateData={},this.newBirthdateData={},this.saveOldBirthdateData=function(t,e){this.oldBirthdateData=e},this.setNewBirthdateData=function(t,e){this.newBirthdateData=e},this.isNewBirthdateDifferentThanOldBirthdate=function(){return Object.keys(this.newBirthdateData).some(function(t){return this.newBirthdateData[t].value!==this.oldBirthdateData[t].value},this)},this.isValidNewBirthdate=function(){var t=!1,e=!1;for(var i in this.newBirthdateData)"date_select"===this.newBirthdateData[i].type&&(0===this.newBirthdateData[i].value?t=!0:e=!0);return e&&!t||t&&!e},this.syncBirthdateData=function(){if(this.isNewBirthdateDifferentThanOldBirthdate())if(this.isValidNewBirthdate())for(var t in this.newBirthdateData)this.trigger("uiInlineEditSave",{newValue:this.newBirthdateData[t].value,field:this.newBirthdateData[t].name});else this.trigger("uiBirthdateSelectHasInvalidDate")},this.replaceOldBirthdateData=function(){this.oldBirthdateData=this.newBirthdateData},this.resetOldBirthdateData=function(){this.isNewBirthdateDifferentThanOldBirthdate()&&this.trigger("uiBirthdateSelectSetFields",this.oldBirthdateData)},this.after("initialize",function(){this.on("uiBirthdateSelectDataInitialized",this.saveOldBirthdateData),this.on("uiBirthdateSelectDataUpdated",this.setNewBirthdateData),this.on("uiBirthdateSelectGotInvalidDateMessage","uiInlineEditSaveValidationError"),this.on(document,"uiEditProfileSaveFields",this.syncBirthdateData),this.on(document,"uiEditProfileSuccess",this.replaceOldBirthdateData),this.on(document,"uiEditProfileCancel uiBeforePageChanged",this.resetOldBirthdateData)})}var n=i(10);t.exports=n(s)},740:function(t,e,i){function s(){this.setUserColor=function(t){this.trigger("uiOverrideUserCss",{color:t}),this.$node.attr("data-color",t)},this.saveOldColor=function(){this.oldColor=this.$node.attr("data-color")},this.setNewColor=function(t,e){this.$node.is(e.targetSelector)&&this.setUserColor(e.hex)},this.syncValue=function(){var t=this.$node.attr("data-color");this.oldColor!==t&&this.trigger("uiInlineEditSave",{newValue:t,field:this.$node.attr("name")})},this.resetOldColor=function(){this.oldColor&&this.setUserColor(this.oldColor)},this.hideColorPicker=function(){this.trigger("uiHideColorPicker")},this.after("initialize",function(){this.on(document,"uiEditProfileStart uiEditProfileSuccess",this.saveOldColor),this.on(document,"uiColorPicked uiColorPreview",this.setNewColor),this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileCancel uiBeforePageChanged",this.resetOldColor),this.on(document,"uiEditProfileSuccess uiEditProfileCancel uiBeforePageChanged",this.hideColorPicker)})}var n=i(10);t.exports=n(s)},741:function(t,e,i){(function(e){function s(){this.defaultAttrs({editableLocationFieldSelector:".ProfileHeaderCardEditing-editableField",placeIdFieldSelector:".ProfileHeaderCardEditing-locationPlaceId",globalProfileFieldSelector:".ProfileHeaderCard-locationText",globalProfileFieldContainerSelector:".ProfileHeaderCard-location",hiddenClass:"u-hidden",templatePath:"highline/user_location"}),this.saveOldLocationValues=function(){this.oldLocationValue=this.editableLocationFieldValue(),this.oldPlaceIdValue=this.$placeIdField.val(),this.oldHtmlValue=this.$profileField.html(),this.savedLocation=!1,this.savedLocationId=!1},this.resetProfileLocationField=function(){this.$profileField.html(this.oldHtmlValue)},this.resetToOldLocationValues=function(){this.$editableLocationField.val(this.oldLocationValue),this.$placeIdField.val(this.oldPlaceIdValue),this.resetProfileLocationField(),this.updateProfileFieldContainerVisibility()},this.syncLocationValues=function(){var t=!1,e=this.editableLocationFieldValue(),i=this.$placeIdField.val();this.oldPlaceIdValue!==i&&""!==i?(t=!0,this.trigger("uiInlineEditSave",{newValue:e,field:this.$editableLocationField.attr("name")}),this.trigger("uiInlineEditSave",{newValue:i,field:this.$placeIdField.attr("name")})):this.oldLocationValue!==e&&(t=!0,this.trigger("uiInlineEditSave",{newValue:e,field:this.$editableLocationField.attr("name")})),t&&(this.setProfileLocationField(),this.trigger("uiEditProfileSaveLocation"))},this.trackSavedLocationFields=function(t,e){e.field===this.$editableLocationField.attr("name")?this.savedLocation=!0:e.field===this.$placeIdField.attr("name")&&(this.savedLocationId=!0)},this.setProfileLocationField=function(){var t=this.editableLocationFieldValue(),e=this.$placeIdField.val();t=e?t:t.substring(0,30);var i={location:t,place_id:e};this.$profileField.html(o[this.attr.templatePath].render(i,o)),this.updateProfileFieldContainerVisibility()},this.editableLocationFieldValue=function(){return this.$editableLocationField.val()},this.updateProfileFieldContainerVisibility=function(){var t=""===this.editableLocationFieldValue().trim();this.$profileFieldContainer.toggleClass(this.attr.hiddenClass,t)},this.preventLeadingSpace=function(t){32!==t.keyCode||this.editableLocationFieldValue()||(t.preventDefault(),t.stopImmediatePropagation())},this.startEditLocation=function(t){var i=e(t.target);i.trigger("uiStartEditGeoLocation")},this.finishEditLocation=function(t){var i=e(t.target);i.trigger("uiFinishEditGeoLocation")},this.after("initialize",function(){this.$editableLocationField=this.select("editableLocationFieldSelector"),this.$placeIdField=this.select("placeIdFieldSelector"),this.$profileField=e(this.attr.globalProfileFieldSelector),this.$profileFieldContainer=e(this.attr.globalProfileFieldContainerSelector),this.on(document,"uiEditProfileSaveFields",this.syncLocationValues),this.on(document,"uiEditProfileStart",this.saveOldLocationValues),this.on(document,"uiEditProfileCancel",this.resetToOldLocationValues),this.on(document,"uiShowProfileEditError",this.resetProfileLocationField),this.on(document,"uiInlineEditSave",this.trackSavedLocationFields),this.on(this.$editableLocationField,"keydown",this.preventLeadingSpace),this.on(this.$editableLocationField,"focus","uiEditProfileHideOptions"),this.on(this.$editableLocationField,"focus",this.startEditLocation),this.on(this.$editableLocationField,"focusout",this.finishEditLocation)})}var n=i(10),o=i(108);t.exports=n(s)}).call(e,i(1))},742:function(t,e,i){(function(e){function s(){this.defaultAttrs({cancelProfileButtonSelector:".cancel-profile-btn",saveProfileButtonSelector:".save-profile-btn",saveProfileFooterSelector:".save-profile-footer",bioProfileFieldSelector:".bio.profile-field",locationSelector:".location",urlProfileFieldSelector:".url .profile-field",dividerSelector:".location-and-url .divider",anchorSelector:"a",ignoreInTabIndex:".js-tooltip",keepTabIndexSelector:".js-keepTabIndex",tooltipSelector:".js-tooltip",updateSaveMessage:"Your profile has been saved.",scrollResetDuration:300,profileSavingClass:"profile-saving",profileEditingClass:"profile-editing",updateErrorMessage:"There was an error updating your profile.",useProfileErrorDialog:!0,firstActiveControlSelector:".ProfileCanopy",lastActiveControlSelector:".ProfilePage-editingButtons",firstEditableFieldSelector:".ProfileHeaderCardEditing",birthdateFieldSelector:".ProfileHeaderCard-birthdateText",birthdateContainerSelector:".ProfileHeaderCard-birthdate",nameProfileFieldSelector:".ProfileHeaderCard-nameLink",endEditOnSave:!0,onProfile:!0}),this.saveProfile=function(t,e){t.preventDefault(),this.trigger("uiEditProfileSaveFields"),this.trigger("uiEditProfileSave")},this.cancelProfileEditing=function(t,i){t.preventDefault();var s=e(t.target).attr("data-scribe-element");this.trigger("uiEditProfileCancel",{scribeContext:{element:s}}),this.trigger("uiEditProfileEnd")},this.isEditing=function(){return this.$body.hasClass(this.attr.profileEditingClass)},this.editModeOn=function(){this.attr.onProfile&&(n(0,this.attr.scrollResetDuration,function(){this.trigger(document,"uiProfileEditingOn")}.bind(this)),this.calculateScrollbarWidth(),this.$body.addClass(this.attr.profileEditingClass))},this.editModeOff=function(){this.$body.removeClass(this.attr.profileEditingClass),this.trigger(document,"uiProfileEditingOff")},this.fieldEditingModeOn=function(){this.$body.addClass("profile-field-editing"),this.select("dividerSelector").show()},this.fieldEditingModeOff=function(){this.$body.removeClass("profile-field-editing"),r(this.$node,this.attr.dividerSelector,this.attr.locationSelector,this.attr.urlProfileFieldSelector)},this.catchAnchorClicks=function(t){var i="_blank"===e(t.target).attr("target");this.isEditing()&&!i&&t.preventDefault()},this.focusFirstActiveControl=function(t){this.focusNextAvailableControl("first",this.select("firstActiveControlSelector")),t.preventDefault()},this.focusLastActiveControl=function(t){this.focusNextAvailableControl("last",this.select("lastActiveControlSelector")),t.preventDefault()},this.disabledTabbing=function(){this.select("ignoreInTabIndex").not(this.attr.keepTabIndexSelector).attr("tabindex","-1"),this.createFirstLastTabStop(this.$node,1,4),this.focusNextAvailableControl("first",this.select("firstEditableFieldSelector")),this.on(this.$node.find(this.attr.lastTabStopSelector),"focus",this.focusFirstActiveControl),this.on(this.$node.find(this.attr.firstTabStopSelector),"focus",this.focusLastActiveControl)},this.enableTabbing=function(){this.select("ignoreInTabIndex").not(this.attr.keepTabIndexSelector).removeAttr("tabindex"),this.removeFirstLastTabStop(this.$node),this.off(this.$node.find(this.attr.lastTabStopSelector),"focus",this.focusFirstActiveControl),this.off(this.$node.find(this.attr.firstTabStopSelector),"focus",this.focusLastActiveControl)},this.saving=function(){this.$body.addClass(this.attr.profileSavingClass)},this.handleError=function(t,e){this.doneSaving(),this.fieldEditingModeOn();var i={message:e.message||this.attr.updateErrorMessage};this.trigger("uiShowProfileEditError",i),this.attr.useProfileErrorDialog||this.trigger("uiShowError",i)},this.savingError=function(t,e){o.setTimeoutEvent("uiHandleSaveError",1e3,{message:e.message})},this.saveSuccess=function(t,e){this.doneSaving(),this.trigger("uiShowMessage",{message:this.attr.updateSaveMessage}),this.trigger("uiEditProfileSuccess")},this.doneSaving=function(){this.$body.removeClass(this.attr.profileSavingClass)},this.disableTooltips=function(){this.select("tooltipSelector").tooltip("disable").tooltip("hide")},this.enableTooltips=function(){this.select("tooltipSelector").tooltip("enable")},this.finishedProcessing=function(t,e){e&&(e.emojified_name&&this.select("nameProfileFieldSelector").html(e.emojified_name),e.linkified_description&&this.select("bioProfileFieldSelector").html(e.linkified_description),e.user_url&&this.select("urlProfileFieldSelector").html(e.user_url),e.has_birthdate&&e.birthdate&&(this.select("birthdateFieldSelector").html(e.birthdate),e.autoplay_balloon_animation&&this.trigger("uiBalloonAnimationRequested",{autoplay:!0})),"undefined"!=typeof e.has_birthdate&&(this.select("birthdateContainerSelector").toggleClass(this.attr.hiddenClass,!e.has_birthdate),this.trigger("uiBirthdateSelectGotTitle",{title:e.formatted_birthdate,has_birthdate:e.has_birthdate}))),this.attr.endEditOnSave&&this.trigger("uiEditProfileEnd")},this.after("initialize",function(){this.$body=e("body"),this.on("click",{cancelProfileButtonSelector:this.cancelProfileEditing,saveProfileButtonSelector:this.saveProfile,anchorSelector:this.catchAnchorClicks}),this.on("uiEditProfileStart",this.editModeOn),this.on("uiEditProfileEnd",this.editModeOff),this.on("uiEditProfileStart",this.disableTooltips),this.on("uiEditProfileEnd",this.enableTooltips),this.on("uiEditProfileStart",this.fieldEditingModeOn),this.on("uiEditProfileSave",this.fieldEditingModeOff),this.on("uiEditProfileEnd",this.fieldEditingModeOff),this.on("uiEditProfileStart",this.disabledTabbing),this.on("uiEditProfileEnd",this.enableTabbing),this.on(document,"dataInlineEditSaveStarted",this.saving),this.on(document,"dataInlineEditSaveSuccess",this.saveSuccess),this.on(document,"dataInlineEditSaveError",this.savingError),this.on(document,"uiHandleSaveError",this.handleError),this.on(document,"dataInlineEditSaveSuccess",this.finishedProcessing)})}var n=(i(22),i(580)),o=i(9),a=i(10),r=i(743),l=i(744),h=i(61),c=i(60);t.exports=a(s,c,l,h)}).call(e,i(1))},743:function(t,e,i){(function(e){t.exports=function(t,i,s,n){var o=t.find(i),a=!!e.trim(t.find(s).text()),r=!!e.trim(t.find(n).text());a&&r?o.show():o.hide()}}).call(e,i(1))},744:function(t,e,i){(function(e){function s(){n.mixin(this,[o]),this.defaultAttrs({avatarSelector:".avatar:first",avatarContainerSelector:".profile-picture:first",avatarPlaceholderSelector:".profile-picture-placeholder",hiddenClass:"hidden",removeFromPreview:".profile-editing-dialogs, .edit-header-target, input, label, textarea, .controls, .inline-edit-icon",avatarEditingSelector:".ProfileAvatarEditing",headerImageUploadDialogSelector:"#header_image_upload_dialog",headerCropperSelector:"#header_image_upload_dialog .cropper-mask",profileHeaderEditingClass:"is-editingHeader",profileHeaderInnerSelector:".ProfileCanopy-header",profileHeaderImageContainerSelector:".ProfileCanopy-headerBg",profileHeaderImageSelector:".ProfileCanopy-headerBg img",headerEditingSelector:".ProfileHeaderEditing",hasHeaderClass:"is-withHeader",iframeSavingClass:"is-iframeSaving"}),this.editHeaderModeOn=function(){this.$body.addClass(this.attr.profileHeaderEditingClass),this.hideHeaderOptions()},this.editHeaderModeOff=function(){this.$body.removeClass(this.attr.profileHeaderEditingClass),this.removeHeaderPreview()},this.removeHeaderPreview=function(){this.$headerPreview&&this.$headerPreview.remove()},this.updateImage=function(t,e){var i=e.status;this.isOfType("header",e)&&this.updateHeader(i),this.isOfType("avatar",e)&&(this.select("avatarSelector").attr("src",i),this.showAvatar())},this.updateHeader=function(t){var e=this.select("profileHeaderImageSelector");e.attr("src",t),e.removeClass(this.attr.hiddenClass),this.trigger("uiProfileHeaderUpdated"),this.select("headerEditingSelector").addClass(this.attr.hasHeaderClass)},this.useDefaultHeader=function(){this.select("profileHeaderImageSelector").addClass(this.attr.hiddenClass),this.select("headerEditingSelector").removeClass(this.attr.hasHeaderClass),this.trigger("uiProfileHeaderUpdated")},this.hasHeader=function(){return this.select("headerEditingSelector").hasClass(this.attr.hasHeaderClass)},this.showAvatar=function(){this.select("avatarContainerSelector").removeClass(this.attr.hiddenClass),this.select("avatarPlaceholderSelector").addClass(this.attr.hiddenClass),this.trigger("uiProfileAvatarUpdated"),this.select("avatarEditingSelector").addClass("is-withAvatar")},this.showAvatarPlaceholder=function(){this.select("avatarContainerSelector").addClass(this.attr.hiddenClass),this.select("avatarPlaceholderSelector").removeClass(this.attr.hiddenClass),this.trigger("uiProfileAvatarUpdated"),this.select("avatarEditingSelector").removeClass("is-withAvatar")},this.showDefaultImage=function(t,e){this.isOfType("avatar",e)&&this.showAvatarPlaceholder(),this.isOfType("header",e)&&this.useDefaultHeader()},this.isOfType=function(t,e){if(e)return e.sourceEventData&&e.sourceEventData.uploadType===t||e.uploadType===t},this.showLargeCanopy=function(){this.trigger("uiShowLargeCanopy")},this.showNormalCanopy=function(){this.trigger(this.hasHeader()?"uiShowLargeCanopy":"uiShowSmallCanopy")},this.showSavingHelp=function(t,e){this.isOfType("header",e)?this.select("headerEditingSelector").addClass(this.attr.iframeSavingClass):this.isOfType("avatar",e)&&this.select("avatarEditingSelector").addClass(this.attr.iframeSavingClass)},this.hideSavingHelp=function(t,e){this.isOfType("header",e)?this.select("headerEditingSelector").removeClass(this.attr.iframeSavingClass):this.isOfType("avatar",e)&&this.select("avatarEditingSelector").removeClass(this.attr.iframeSavingClass)},this.after("initialize",function(){this.$body=e("body"),this.on("uiDialogOpened",{headerImageUploadDialogSelector:this.editHeaderModeOn}),this.on("uiDialogClosed",{headerImageUploadDialogSelector:this.editHeaderModeOff}),this.on(document,"dataSaveImageSuccess",this.updateImage),this.on(document,"dataDeleteImageSuccess",this.showDefaultImage),this.on(document,"uiEditProfileStart",this.showLargeCanopy),this.on(document,"uiEditProfileEnd",this.showNormalCanopy),this.on(document,"dataLegacySaveImageStart",this.showSavingHelp),this.on(document,"dataLegacySaveImageFinish",this.hideSavingHelp)})}var n=i(20),o=i(745);t.exports=s}).call(e,i(1))},745:function(t,e,i){(function(e){function s(){this.defaultAttrs({editHeaderSelector:".edit-header-target",editAvatarSelector:".profile-picture",cancelOptionsSelector:".cancel-options",changePhotoSelector:"#choose-photo",changeHeaderSelector:"#choose-header",canToggleHeaderOptions:!1}),this.isShowingHeaderOptions=function(){return this.$body.hasClass("show-header-options")},this.optionsEnabled=function(){this.canShowOptions=!0},this.optionsDisabled=function(){this.canShowOptions=!1},this.toggleAvatarOptions=function(t){t.preventDefault(),this.hideHeaderOptions(),n()?this.hideAvatarOptions():this.showAvatarOptions()},this.showAvatarOptions=function(){this.canShowOptions&&!n()&&(this.$body.addClass("show-avatar-options"),this.trigger(this.select("changePhotoSelector"),"uiShouldShowDropdown"))},this.hideAvatarOptions=function(){this.$body.hasClass("show-avatar-options")&&(this.$body.removeClass("show-avatar-options"),this.trigger(document,"uiForceDropdownClosed"))},this.toggleHeaderOptions=function(t){t.preventDefault(),this.hideAvatarOptions(),this.isShowingHeaderOptions()?this.hideHeaderOptions():this.showHeaderOptions()},this.showHeaderOptions=function(){this.canShowOptions&&!this.$body.hasClass("show-header-options")&&(this.$body.addClass("show-header-options"),this.trigger(this.select("changeHeaderSelector"),"uiShouldShowDropdown"))},this.hideHeaderOptions=function(){this.$body.hasClass("show-header-options")&&(this.$body.removeClass("show-header-options"),this.trigger(document,"uiForceDropdownClosed"))},this.hideOptions=function(){this.hideHeaderOptions(),this.hideAvatarOptions()},this.after("initialize",function(){this.$body=e("body"),this.on("click",{editAvatarSelector:this.toggleAvatarOptions,editHeaderSelector:this.attr.canToggleHeaderOptions?this.toggleHeaderOptions:this.showHeaderOptions,cancelOptionsSelector:this.hideOptions}),this.attr.canToggleHeaderOptions||this.on("uiDropdownCloseRequested",function(t){this.isShowingHeaderOptions()&&t.preventDefault()}),this.on("uiEditProfileStart",this.optionsEnabled),this.on("uiEditProfileEnd",this.optionsDisabled),this.on("uiProfileHeaderUpdated uiProfileAvatarUpdated uiEditProfileEnd uiEditProfileHideOptions",this.hideOptions),this.on(document,"uiShortcutEsc",this.hideOptions),this.on(document,"uiShowEditAvatarOptions",this.showAvatarOptions),this.on(document,"uiShowEditHeaderOptions",this.showHeaderOptions)})}var n=i(746);t.exports=s}).call(e,i(1))},746:function(t,e,i){(function(e){t.exports=function(){return e("body").hasClass("show-avatar-options")}}).call(e,i(1))},747:function(t,e,i){(function(e){function s(){this.defaultAttrs({profileEditingCSSBundle:""}),this.initializeInlineProfileEditing=function(t,e){o.loadOnce(this.attr.profileEditingCSSBundle,this.triggerStart.bind(this,e.scribeElement))},this.editHeader=function(t,i){e(document).one("uiEditProfileStart",this.showHeaderOptions.bind(this)),this.trigger("uiEditProfileInitialize",{scribeElement:i.scribeElement})},this.showHeaderOptions=function(){this.trigger("uiShowEditHeaderOptions")},this.triggerStart=function(t){this.trigger("uiEditProfileStart",{scribeContext:{element:t}})},this.after("initialize",function(){this.retryCount=0,this.on(document,"uiEditProfileInitialize",this.initializeInlineProfileEditing),this.on(document,"uiEditProfileInitializeAndFocusOnHeaderOptions",this.editHeader)})}var n=i(10),o=i(748);t.exports=n(s)}).call(e,i(1))},748:function(t,e){function i(t,e){var i="function"==typeof e;if(o.indexOf(t)>-1)i&&e();else{var a=s(t);n(a,function(){o.push(t),i&&e()})}}function s(t,e,i){function s(t){return a.body?t():void setTimeout(function(){s(t)})}function n(){r.addEventListener&&r.removeEventListener("load",n),r.media=i||"all"}var o,a=window.document,r=a.createElement("link");if(e)o=e;else{var l=(a.body||a.getElementsByTagName("head")[0]).childNodes;
o=l[l.length-1]}var h=a.styleSheets;r.rel="stylesheet",r.href=t,r.media="only x",s(function(){o.parentNode.insertBefore(r,e?o:o.nextSibling)});var c=function(t){for(var e=r.href,i=h.length;i--;)if(h[i].href===e)return t();setTimeout(function(){c(t)})};return r.addEventListener&&r.addEventListener("load",n),r.onloadcssdefined=c,c(n),r}function n(t,e){function i(){!s&&e&&(s=!0,e.call(t))}var s;t.addEventListener&&t.addEventListener("load",i),t.attachEvent&&t.attachEvent("onload",i),"isApplicationInstalled"in navigator&&"onloadcssdefined"in t&&t.onloadcssdefined(i)}/*! loadCSS: load a CSS file asynchronously. [c]2016 @scottjehl, Filament Group, Inc. Licensed MIT */
/*! onloadCSS: adds onload support for asynchronous stylesheets loaded with loadCSS. [c]2016 @zachleat, Filament Group, Inc. Licensed MIT */
var o=[];t.exports={load:s,loadOnce:i,onload:n}},749:function(t,e,i){(function(e){function s(){this.defaultAttrs({overrideUserCssSelector:"#user-style-me"}),this.override=function(t,i){var s=i.color.replace(r,""),n={style_namespace:"me",user_color_lightest:a(s,.1,"fff"),user_color_lighter:a(s,.25,"fff"),user_color_light:a(s,.4,"fff"),user_color:s,user_color_dark:a(s,.8,"000"),user_color_darker:a(s,.6,"000"),profile_link_color:s,profile_pretty_link_color:a(s,.4,"fff")},l=o.user_css_color.render(n);this.select("overrideUserCssSelector").remove(),e("head").append(l)},this.after("initialize",function(){this.on("uiOverrideUserCss",this.override)})}var n=i(10),o=i(108),a=i(750),r=/^#/;t.exports=n(s)}).call(e,i(1))},750:function(t,e){function i(t){if(!t)return null;var e=t.replace(n,"$1$1$2$2$3$3");return e.match(o)?e.match(a).map(function(t){return parseInt(t,16)}):null}function s(t,e,s){var n=i(t),o=i(s),a=1-e;return n&&o&&n.map(function(t,i){var s=Math.floor(t*e+o[i]*a);return(s+256).toString(16).slice(1)}).join("")}var n=/^(.)(.)(.)$/,o=/^[0-9a-f]{6}$/i,a=/.{2}/g;t.exports=s},751:function(t,e,i){function s(){this.defaultAttrs({removeSelector:".ok-btn",cancelSelector:".cancel-btn",uploadType:""}),this.removeImage=function(){this.disableButtons(),this.trigger("uiDeleteImage",{uploadType:this.attr.uploadType})},this.triggerHideDeleteLink=function(){this.trigger("uiHideDeleteLink",{uploadType:this.attr.uploadType})},this.disableButtons=function(){this.select("removeSelector").attr("disabled",!0),this.select("cancelSelector").stop(!0,!0).fadeOut()},this.enableButtons=function(){this.select("removeSelector").removeAttr("disabled"),this.select("cancelSelector").stop(!0,!0).show()},this.after("initialize",function(){this.on(document,"uiConfirmDeleteImage",this.verifyUploadType(this.open)),this.on(document,"dataDeleteImageSuccess",this.verifyUploadType(this.close)),this.on(document,"dataDeleteImageSuccess",this.verifyUploadType(this.triggerHideDeleteLink)),this.on(document,"dataDeleteImageFailure",this.verifyUploadType(this.enableButtons)),this.on("uiDialogClosed",this.enableButtons),this.on("click",{cancelSelector:this.close,removeSelector:this.removeImage})})}var n=i(10),o=i(59),a=i(731);t.exports=n(s,o,a)},752:function(t,e,i){function s(){this.defaultAttrs({editHeaderParam:"edit_header",editParam:"edit"}),this.hasParam=function(t){return!!o.fromQuery(window.location)[t]},this.hasEditParam=function(){return this.hasParam(this.attr.editParam)},this.hasEditHeaderParam=function(){return this.hasParam(this.attr.editHeaderParam)},this.checkEditParam=function(){this.hasEditParam()?this.trigger("uiEditProfileInitialize",{scribeElement:"edit_param"}):this.hasEditHeaderParam()&&this.trigger("uiEditProfileInitializeAndFocusOnHeaderOptions",{scribeElement:"edit_header_param"})},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.checkEditParam)})}var n=i(10),o=i(233);t.exports=n(s)},753:function(t,e,i){function s(){this.defaultAttrs({placeIdSelector:".GeoSearch-placeId",searchStatusSelector:".GeoSearch-searchStatus",searchResultsContainerSelector:".GeoSearch-resultsContainer"}),this.setDefaultProfileLocations=function(t,e){this.defaultProfileLocationsHtml=e.html||""},this.hasDefaultLocations=function(){return!!this.defaultProfileLocationsHtml},this.showDefaultLocations=function(){this.select("searchStatusSelector").hide(),this.select("searchResultsContainerSelector").html(this.defaultProfileLocationsHtml),this.applyAriaAttrsToResultsAndAnnounceNumResults()},this.prepareInitialDropdown=function(){var t=this.getQuery();this.lastQuery=t,t.trim()?this.selectedNewLocation||(this.trigger("uiShouldShowDropdown"),this.doSearch(t)):this.setDefaultDropdown(),this.selectedNewLocation=!1},this.setDefaultDropdown=function(){this.hasDefaultLocations()?(this.isTypeaheadSearch=!1,this.clearDropdownResults(),this.showDefaultLocations(),this.trigger("uiShouldShowDropdown"),this.applyAriaAttrsToResultsAndAnnounceNumResults()):this.isOpen()&&this.closeDropdown()},this.after("openDropdown",function(){this.isEditingProfileLocation||(this.isEditingProfileLocation=!0,this.trigger("uiLocationPickerOpened"))}),this.after("closeDropdown",function(){this.clearDropdownResults()}),this.finishSaveLocation=function(){var t=this.getQuery();this.hasStructuredLocation()||this.trigger("uiLocationPickerInput",{context:"typeahead",referring_event:t})},this.clearDropdownResults=function(){this.select("searchResultsContainerSelector").empty()},this.clearPlaceId=function(){this.select("placeIdSelector").val("")},this.hasStructuredLocation=function(){return""!==this.select("placeIdSelector").val()},this.changeLocation=function(t,e){var i=this.getQuery(),s=e.placeId;e.placeName&&this.select("querySelector").val(e.placeName),s&&this.select("placeIdSelector").val(e.placeId),this.isEditingProfileLocation=!1,this.selectedNewLocation=!0,this.closeDropdown(),this.isTypeaheadSearch?this.trigger("uiLocationPickerSelect",{context:"typeahead",referring_event:i,message:s}):this.trigger("uiLocationPickerSelect",{context:"default",referring_event:i,message:s})},this.searchAutocomplete=function(){setTimeout(function(){this.searchIfQueryChanged()}.bind(this),0)},this.searchIfQueryChanged=function(){var t=this.getQuery();this.lastQuery!==t&&(this.lastQuery=t,this.clearPlaceId(),""===t?this.setDefaultDropdown():this.doSearch(t))},this.doSearch=function(t){this.isTypeaheadSearch=!0,this.select("searchStatusSelector").text("Searching places...").show(),this.trigger("uiGeoProfileSearch",{query:t})},this.searchResults=function(t,e){var i=e.sourceEventData;i&&i.query===this.select("querySelector").val()&&("unavailable"===e.status?this.closeDropdown():(this.clearDropdownResults(),e.html?(this.trigger("uiShouldShowDropdown"),this.select("searchStatusSelector").hide(),this.select("searchResultsContainerSelector").html(e.html),this.applyAriaAttrsToResultsAndAnnounceNumResults()):this.closeDropdown()))},this.after("initialize",function(){this.isEditingProfileLocation=!1,this.isTypeaheadSearch=!1,this.on(document,"uiEditProfileStart","uiRequestDefaultProfileLocations"),this.on(document,"uiEditProfileSaveLocation",this.finishSaveLocation),this.on(document,"dataDefaultProfileLocations",this.setDefaultProfileLocations),this.on(document,"dataProfileGeoSearchResults",this.searchResults),this.on(document,"dataProfileGeoSearchResultsUnavailable",this.closeDropdown),this.on("uiStartEditGeoLocation",{querySelector:this.prepareInitialDropdown}),this.on(this.select("querySelector"),"uiFinishEditGeoLocation",function(){this.isEditingProfileLocation=!1}),this.on("uiGeoSearchEnter",this.closeDropdown),this.on("uiGeoSearchTab",this.closeDropdown),this.on("uiGeoSearchChangeLocation",this.changeLocation),this.on("uiGeoSearchAutocomplete",this.searchAutocomplete)})}var n=i(10),o=(i(22),i(754));t.exports=n(o,s)},755:function(t,e,i){function s(){this.defaultAttrs({scribeContext:{component:"structured_location",element:"location_picker"}}),this.scribeAction=function(t){var e=o.merge(this.attr.scribeContext,{action:t});return function(t,i){this.scribe(e,i)}},this.after("initialize",function(){this.on("uiLocationPickerOpened",this.scribeAction("open")),this.on("uiLocationPickerInput",this.scribeAction("input")),this.on("uiLocationPickerSelect",this.scribeAction("select"))})}var n=i(10),o=i(25),a=i(40);t.exports=n(s,a)},756:function(t,e,i){function s(){this.defaultAttrs({dialogSelector:"#header_image_upload_dialog",headerSelector:".ProfileCanopy-header",aspectRatio:3}),this.setCropMetrics=function(){var t=this.select("headerSelector"),e=t.width(),i=t.height(),s=e/this.attr.aspectRatio;this.select("dialogSelector").trigger("uiSetCropMetrics",{zoneWidth:e,zoneHeight:i,width:e,height:s,top:(i-s)/2,left:0})},this.after("initialize",function(){this.on(document,"uiDialogOpened",this.setCropMetrics),this.on(window,"resize",this.setCropMetrics)})}var n=i(10);t.exports=n(s)},757:function(t,e,i){"use strict";function s(){this.defaultAttrs({webcamTitle:"Smile!",titleSelector:".modal-title",profileImageCropDivSelector:".image-upload-crop",profileImageWebcamDivSelector:".image-upload-webcam",cancelSelector:".profile-image-cancel",saveSelector:".profile-image-save",cropperSliderSelector:".cropper-slider",cropImageSelector:".crop-image",cropMaskSelector:".cropper-mask",cropOverlaySelector:".cropper-overlay",cropZoneSelector:".crop-zone",captureWebcamSelector:".profile-image-capture-webcam",webcamContainerSelector:".webcam-container",webcamCanvasSelector:".webcam-canvas",videoSelector:"video",videoOverlaySelector:".video-overlay",videoCountdownSelector:".video-countdown",retakeButtonSelector:".profile-image-previous",videoPermissionExplain:".video-permission-explain",videoPermissionFail:".video-permission-fail",imageUploadSpinnerSelector:".image-upload-spinner",maskPadding:40,top:50,uploadType:"",drawSurfaceSelector:".drawsurface",showSuccessMessage:!0,maximumWidth:2048,maximumHeight:2048,savingClass:"saving",isAvatarWhenShowingAvatarOptions:!0,alertMessageEvent:"uiAlertBanner"}),this.showCropper=function(t){this.setTitle(this.attr.originalTitle),this.select("captureWebcamSelector").hide(),this.select("videoSelector").hide(),this.select("saveSelector").show(),this.fileId=t,this.trigger(this.$dialog,"uiDialogContentChanged"),this.trigger("uiShowingCropper",{scribeElement:this.getScribeElement()})},this.setScribeElement=function(t){this.scribeElement=t},this.getScribeElement=function(){return this.scribeElement||"upload"},this.reset=function(){this.select("cropImageSelector").attr("src",""),this.select("cropImageSelector").attr("style",""),this.select("webcamContainerSelector").empty(),this.select("cancelSelector").show(),this.select("saveSelector").attr("disabled",!1).hide(),this.$node.removeClass(this.attr.savingClass),this.select("profileImageWebcamDivSelector").hide(),this.select("profileImageCropDivSelector").hide(),this.select("captureWebcamSelector").hide(),this.select("retakeButtonSelector").hide(),this.select("videoSelector").hide(),this.select("videoPermissionExplain").hide(),this.select("videoPermissionFail").hide()},this.swapVisibility=function(t,e){this.$node.find(t).hide(),this.$node.find(e).show()},this.haveImageSelected=function(t,e){var i=r.get(e.fileId);i&&(t.preventDefault(),this.gotImageData(e.uploadType,i),this.trigger("uiCloseDropdowns"))},this.gotImageData=function(t,e,i){this.openDialog(),this.trigger("uiUploadReceived"),this.select("cropImageSelector").attr("src",o.getObjectUrl(e.fileHandle)),this.select("profileImageCropDivSelector").show(),this.setScribeElement("upload"),this.showCropper(e.fileId),i&&this.trigger("uiDropped")},this.openDialog=function(){this.open(),this.reset()},this.setTitle=function(t){this.select("titleSelector").text(t)},this.showWebcam=function(t,e){this.setTitle(this.attr.webcamTitle),this.openDialog(),this.select("profileImageWebcamDivSelector").show(),this.select("captureWebcamSelector").show(),this.initializeWebcam(),this.trigger("uiShowingWebcam")},this.webcamCaptured=function(t,e){this.swapVisibility(this.attr.profileImageWebcamDivSelector,this.attr.profileImageCropDivSelector),this.setScribeElement("webcam"),this.select("retakeButtonSelector").show(),this.showCropper(e.fileId)},this.save=function(t,e){if(!this.$node.hasClass(this.attr.savingClass))return this.prepareCroppedImage(),t.preventDefault(),!1},this.readyToCrop=function(){var t=this.fileId,e=r.get(t);if(e){var i=this.clientsideCrop(this.determineCrop());r.update(this.fileId,{fileHandle:o.getBlobFromDataUri(i.fileData)}),this.trigger("uiImageSave",{fileId:t,uploadType:this.attr.uploadType,scribeData:{scribeElement:this.getScribeElement()},cropData:i.cropData}),this.enterSavingState()}},this.enterSavingState=function(){this.select("imageUploadSpinnerSelector").css("height",this.select("profileImageCropDivSelector").height()),this.$node.addClass(this.attr.savingClass),this.select("saveSelector").attr("disabled",!0),this.select("cancelSelector").hide()},this.resetState=function(){var t=r.get(this.fileId);t&&(o.revokeObjectUrl(this.select("cropImageSelector").attr("src")),r.remove(this.fileId),this.fileId=null)},this.uploadSuccess=function(t,e){if(this.attr.showSuccessMessage){var i={avatar:"Your profile photo was published successfully.",header:"Your header was published successfully.",background:"Your background was published successfully."};this.trigger("uiAlertBanner",{message:i[this.attr.uploadType]||"Published successfully."})}this.trigger("uiProfileImagePublished",{scribeElement:this.getScribeElement()}),this.close(),this.resetState()},this.uploadFailed=function(t,e){this.trigger("uiProfileImageDialogFailure",{scribeElement:this.getScribeElement()}),this.trigger(this.attr.alertMessageEvent,{message:e.message}),this.close(),this.resetState()},this.interceptGotProfileImageData=function(t,e){var i=this.attr.isAvatarWhenShowingAvatarOptions&&"header"===e.uploadType&&a(),s=i?"avatar":e.uploadType,n=r.get(e.fileId);n&&s===this.attr.uploadType&&this.gotImageData(s,n,e.wasDropped)},this.proxyTakePhoto=function(t,e){this.takePhoto(t,e)},this.after("initialize",function(){this.attr.originalTitle=this.select("titleSelector").text(),this.on(document,"uiCropperWebcam",this.verifyUploadType(this.showWebcam)),this.on(document,"uiFileSelected",this.verifyUploadType(this.haveImageSelected)),this.on("jsCamCapture",this.webcamCaptured),this.on(this.select("captureWebcamSelector"),"click",this.proxyTakePhoto),this.on(this.select("retakeButtonSelector"),"click",this.showWebcam),this.on(this.select("saveSelector"),"click",this.save),this.on(this.attr.cancelSelector,"click",this.close),this.on("uiCroppedImageReady",this.readyToCrop),this.on(document,"dataSaveImageSuccess",this.verifyUploadType(this.uploadSuccess)),this.on(document,"dataSaveImageFailure",this.verifyUploadType(this.uploadFailed)),this.on(document,"uiGotProfileImageData",this.interceptGotProfileImageData),this.on("uiDialogClosed",function(){this.reset(),this.trigger("uiProfileImageDialogClose")})})}var n=(i(22),i(10)),o=i(259),a=i(746),r=i(210),l=i(758),h=i(59),c=i(731),d=i(761);t.exports=n(s,l,h,c,d)},758:function(t,e,i){(function(e){"use strict";function s(t){return t%2!==0}function n(){this.defaultAttrs({maxImageSize:3072e3}),this.determineCrop=function(){var t=this.$cropImage.offset(),e=this.$cropImage.width(),i=this.$cropImage.height(),s=this.$cropMask.offset(),n=this.$cropMask.width(),o=this.$cropMask.height(),a=this.originalWidth/e,r=this.attr.maskPadding,l=s.top-t.top+r,h=s.left-t.left+r,c=s.left+r>t.left?s.left+r:t.left,d=s.top+r>t.top?s.top+r:t.top,u=s.left+n-r<t.left+e?s.left+n-r:t.left+e,f=s.top+o-r<t.top+i?s.top+o-r:t.top+i,m=Math.round(a*(h>=0?h:0)),p=Math.round(a*(l>=0?l:0)),g=this.originalWidth-m,v=this.originalHeight-p;return{maskWidth:n-2*r,maskHeight:o-2*r,imageLeft:m,imageTop:p,imageWidth:Math.min(Math.round(a*(u-c)),g),imageHeight:Math.min(Math.round(a*(f-d)),v),maskY:l<0?-l:0,maskX:h<0?-h:0}},this.determineImageType=function(t){return 0===t.substr(t.indexOf(","),4).indexOf(",/9j")?"image/jpeg":"image/png"},this.compressionImageQuality=function(){var t;return t=o.getDecider("hqImageUploads")?h:o.getDecider("mqImageUploads")?l:r},this.canvasToDataURI=function(t,e){return t.width>d||t.height>c?null:"image/jpeg"===e?t.toDataURL("image/jpeg",this.compressionImageQuality()):t.toDataURL("image/png")},this.prepareCroppedImage=function(){this.$croppedImage=e("<img>"),this.requiresCrossOriginCroppedImage()&&this.$croppedImage.attr("crossorigin","Anonymous"),this.on(this.$croppedImage,"load",this.croppedImageReady),this.$croppedImage.attr("src",this.$cropImage.attr("src"))},this.requiresCrossOriginCroppedImage=function(){var t=this.$cropImage.attr("src");return t&&0!==t.indexOf("data:")},this.croppedImageReady=function(){this.trigger("uiCroppedImageReady")},this.computeTargetRect=function(t){var e=Math.min(Math.max(t.maskWidth,t.imageWidth),this.attr.maximumWidth),i=Math.min(Math.max(t.maskHeight,t.imageHeight),this.attr.maximumHeight);return{width:e,height:i,x:Math.round(t.maskX*(e/t.maskWidth)),y:Math.round(t.maskY*(i/t.maskHeight))}},this.getHeaderCropData=function(t){var e=t.getContext("2d");return{offsetTop:0,offsetLeft:0,width:e.canvas.width,height:e.canvas.height}},this.clientsideCrop=function(t){var e=this.determineImageType(this.$cropImage.attr("src")),i="header"===this.attr.uploadType,s=i?this.clientsideCropLarge(t,e):this.clientsideCropStandard(t),n={fileData:this.canvasToDataURI(s,e)};return i?n:a.merge(n,{cropData:this.getHeaderCropData(s)})},this.clientsideCropStandard=function(t){var e=this.select("drawSurfaceSelector"),i=e[0].getContext("2d"),s=this.computeTargetRect(t);return this.$croppedImage.height(this.originalHeight).width(this.originalWidth),i.canvas.width=s.width,i.canvas.height=s.height,i.fillStyle="white",i.fillRect(0,0,s.width,s.height),i.drawImage(this.$croppedImage[0],t.imageLeft,t.imageTop,t.imageWidth,t.imageHeight,s.x,s.y,s.width,s.height),e[0]},this.clientsideCropLarge=function(t,e){var i=t.imageHeight,s=t.imageWidth,n=t.imageTop,o=t.imageLeft,a=this.createCanvas(s,i),r=a.getContext("2d");r.imageSmoothingEnabled=!1,r.drawImage(this.$croppedImage[0],o,n,s,i,0,0,s,i);for(var l=i,h=s,c=this.canvasToDataURI(a,e);null==c||c.length>this.attr.maxImageSize;){var d=Math.ceil(.5*h),u=Math.ceil(.5*l),f=this.createCanvas(d,u),m=f.getContext("2d");m.imageSmoothingEnabled=!0,m.drawImage(a,0,0,h,l,0,0,d,u),c=this.canvasToDataURI(f,e),a=f,h=d,l=u}return a},this.createCanvas=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i},this.cropDimensions=function(){var t=this.$cropMask.offset();return{top:t.top,left:t.left,maskWidth:this.$cropMask.width(),maskHeight:this.$cropMask.height(),cropWidth:this.$cropMask.width()-2*this.attr.maskPadding,cropHeight:this.$cropMask.height()-2*this.attr.maskPadding}},this.bestFitImage=function(){var t=this.cropDimensions(),e=this.originalWidth,i=this.originalHeight;this.cropWidth=t.cropWidth,this.cropHeight=t.cropHeight;var s=e/i;e>=i&&t.cropWidth>=t.cropHeight&&s>=t.cropWidth/t.cropHeight?(i=t.cropHeight,e=Math.round(e*(i/this.originalHeight))):(e=t.cropWidth,i=Math.round(i*(e/this.originalWidth))),this.$cropImage.width(e).height(i).offset({top:t.maskHeight/2-i/2+t.top,left:t.maskWidth/2-e/2+t.left}),this.bestFitHeight=i,this.bestFitWidth=e},this.onDragStart=function(t,e){this.attr.imageStartOffset=this.select("cropImageSelector").offset()},this.getOffsetConstraints=function(){var t=this.$cropMask.offset(),e=this.attr.maskPadding,i=t.left+e,s=i+this.$cropMask.width()-this.$cropImage.width()-2*e,n=t.top+e,o=n+this.$cropMask.height()-this.$cropImage.height()-2*e;return{minLeft:s,maxLeft:i,minTop:o,maxTop:n,rangeLeft:i-s,rangeTop:n-o}},this.setImageOffsetConstrainedToFit=function(t){var e=this.getOffsetConstraints();this.$cropImage.offset({left:Math.min(Math.max(e.minLeft,t.left),e.maxLeft),top:Math.min(Math.max(e.minTop,t.top),e.maxTop)})},this.onDragHandler=function(t,e){this.setImageOffsetConstrainedToFit({top:this.attr.imageStartOffset.top+e.position.top-e.originalPosition.top,left:this.attr.imageStartOffset.left+e.position.left-e.originalPosition.left})},this.onDragStop=function(t,e){this.select("cropOverlaySelector").offset(this.select("cropMaskSelector").offset())},this.setScaleValue=function(t){var e=this.$cropImage.offset(),i=Math.round(e.left+this.$cropImage.width()/2),n=Math.round(e.top+this.$cropImage.height()/2),o=Math.round(this.bestFitHeight*(1+t/100)),a=Math.round(this.bestFitWidth*(1+t/100));o=s(o)?o+=1:o,a=s(a)?a+=1:a,this.$cropImage.height(o).width(a),this.setImageOffsetConstrainedToFit({top:Math.round(n-o/2),left:Math.round(i-a/2)})},this.onSlide=function(t,e){e.value!==this.lastScaleValue&&(this.lastScaleValue=e.value,this.setScaleValue(e.value))},this.imageLoaded=function(t,e){this.originalHeight=this.$cropImage.height(),this.originalWidth=this.$cropImage.width(),this.$slider.slider({value:0,max:100,min:0,slide:this.onSlide.bind(this)}).slider("option","value",0),this.lastScaleValue=0,this.bestFitImage(),this.select("cropOverlaySelector").draggable({drag:this.onDragHandler.bind(this),stop:this.onDragStop.bind(this),start:this.onDragStart.bind(this),containment:this.attr.cropContainerSelector,scroll:!1})},this.getNormalizedOffset=function(){var t=this.getOffsetConstraints(),e=this.$cropImage.offset();return{left:(e.left-t.minLeft)/(t.rangeLeft||1),top:(e.top-t.minTop)/(t.rangeTop||1)}},this.setNormalizedOffset=function(t){var e=this.getOffsetConstraints();this.$cropImage.offset({left:e.minLeft+e.rangeLeft*t.left,top:e.minTop+e.rangeTop*t.top})},this.setCropMetrics=function(t,e){var i=this.getNormalizedOffset();this.select("cropZoneSelector").height(e.zoneHeight).width(e.zoneWidth),this.$cropMask.css({left:e.left,top:e.top,width:e.width,height:e.height}),this.cropWidth===e.width&&this.cropHeight===e.height||(this.bestFitImage(),this.setScaleValue(this.lastScaleValue),this.setNormalizedOffset(i))},this.after("initialize",function(){this.$cropImage=this.select("cropImageSelector"),this.$cropMask=this.select("cropMaskSelector"),this.$slider=this.select("cropperSliderSelector"),this.on(this.attr.cropImageSelector,"load",this.imageLoaded),this.on("uiSetCropMetrics",this.setCropMetrics)})}i(759);var o=i(34),a=i(25),r=.75,l=.85,h=.9,c=4096,d=4096;t.exports=n}).call(e,i(1))},759:function(t,e,i){i(66)(i(760))},760:function(t,e){t.exports='(function (factory) {\n  if (typeof define === "function" && define.amd) {\n    define(["jquery"], factory);\n  } else if (typeof module === "object" && exports) {\n    factory(require("jquery"));\n  } else {\n    factory(jQuery);\n  }\n})(function ($) {\n  $.ui = $.ui || {};$.extend($.ui, { version: "1.11.4", keyCode: { BACKSPACE: 8, COMMA: 188, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, LEFT: 37, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SPACE: 32, TAB: 9, UP: 38 } });$.fn.extend({ scrollParent: function (includeHidden) {\n      var position = this.css("position"),\n          excludeStaticParent = position === "absolute",\n          overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\n          scrollParent = this.parents().filter(function () {\n        var parent = $(this);if (excludeStaticParent && parent.css("position") === "static") {\n          return false;\n        }return overflowRegex.test(parent.css("overflow") + parent.css("overflow-y") + parent.css("overflow-x"));\n      }).eq(0);return position === "fixed" || !scrollParent.length ? $(this[0].ownerDocument || document) : scrollParent;\n    }, uniqueId: function () {\n      var uuid = 0;return function () {\n        return this.each(function () {\n          if (!this.id) {\n            this.id = "ui-id-" + ++uuid;\n          }\n        });\n      };\n    }(), removeUniqueId: function () {\n      return this.each(function () {\n        if (/^ui-id-\\d+$/.test(this.id)) {\n          $(this).removeAttr("id");\n        }\n      });\n    } });function focusable(element, isTabIndexNotNaN) {\n    var map,\n        mapName,\n        img,\n        nodeName = element.nodeName.toLowerCase();if ("area" === nodeName) {\n      map = element.parentNode;mapName = map.name;if (!element.href || !mapName || map.nodeName.toLowerCase() !== "map") {\n        return false;\n      }img = $("img[usemap=\'#" + mapName + "\']")[0];return !!img && visible(img);\n    }return (/^(input|select|textarea|button|object)$/.test(nodeName) ? !element.disabled : "a" === nodeName ? element.href || isTabIndexNotNaN : isTabIndexNotNaN) && visible(element);\n  }function visible(element) {\n    return $.expr.filters.visible(element) && !$(element).parents().addBack().filter(function () {\n      return $.css(this, "visibility") === "hidden";\n    }).length;\n  }$.extend($.expr[":"], { data: $.expr.createPseudo ? $.expr.createPseudo(function (dataName) {\n      return function (elem) {\n        return !!$.data(elem, dataName);\n      };\n    }) : function (elem, i, match) {\n      return !!$.data(elem, match[3]);\n    }, focusable: function (element) {\n      return focusable(element, !isNaN($.attr(element, "tabindex")));\n    }, tabbable: function (element) {\n      var tabIndex = $.attr(element, "tabindex"),\n          isTabIndexNaN = isNaN(tabIndex);return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n    } });if (!$("<a>").outerWidth(1).jquery) {\n    $.each(["Width", "Height"], function (i, name) {\n      var side = name === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],\n          type = name.toLowerCase(),\n          orig = { innerWidth: $.fn.innerWidth, innerHeight: $.fn.innerHeight, outerWidth: $.fn.outerWidth, outerHeight: $.fn.outerHeight };function reduce(elem, size, border, margin) {\n        $.each(side, function () {\n          size -= parseFloat($.css(elem, "padding" + this)) || 0;if (border) {\n            size -= parseFloat($.css(elem, "border" + this + "Width")) || 0;\n          }if (margin) {\n            size -= parseFloat($.css(elem, "margin" + this)) || 0;\n          }\n        });return size;\n      }$.fn["inner" + name] = function (size) {\n        if (size === undefined) {\n          return orig["inner" + name].call(this);\n        }return this.each(function () {\n          $(this).css(type, reduce(this, size) + "px");\n        });\n      };$.fn["outer" + name] = function (size, margin) {\n        if (typeof size !== "number") {\n          return orig["outer" + name].call(this, size);\n        }return this.each(function () {\n          $(this).css(type, reduce(this, size, true, margin) + "px");\n        });\n      };\n    });\n  }if (!$.fn.addBack) {\n    $.fn.addBack = function (selector) {\n      return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));\n    };\n  }if ($("<a>").data("a-b", "a").removeData("a-b").data("a-b")) {\n    $.fn.removeData = function (removeData) {\n      return function (key) {\n        if (arguments.length) {\n          return removeData.call(this, $.camelCase(key));\n        } else {\n          return removeData.call(this);\n        }\n      };\n    }($.fn.removeData);\n  }$.ui.ie = !!/msie [\\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({ focus: function (orig) {\n      return function (delay, fn) {\n        return typeof delay === "number" ? this.each(function () {\n          var elem = this;setTimeout(function () {\n            $(elem).focus();if (fn) {\n              fn.call(elem);\n            }\n          }, delay);\n        }) : orig.apply(this, arguments);\n      };\n    }($.fn.focus), disableSelection: function () {\n      var eventType = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";return function () {\n        return this.bind(eventType + ".ui-disableSelection", function (event) {\n          event.preventDefault();\n        });\n      };\n    }(), enableSelection: function () {\n      return this.unbind(".ui-disableSelection");\n    }, zIndex: function (zIndex) {\n      if (zIndex !== undefined) {\n        return this.css("zIndex", zIndex);\n      }if (this.length) {\n        var elem = $(this[0]),\n            position,\n            value;while (elem.length && elem[0] !== document) {\n          position = elem.css("position");if (position === "absolute" || position === "relative" || position === "fixed") {\n            value = parseInt(elem.css("zIndex"), 10);if (!isNaN(value) && value !== 0) {\n              return value;\n            }\n          }elem = elem.parent();\n        }\n      }return 0;\n    } });$.ui.plugin = { add: function (module, option, set) {\n      var i,\n          proto = $.ui[module].prototype;for (i in set) {\n        proto.plugins[i] = proto.plugins[i] || [];proto.plugins[i].push([option, set[i]]);\n      }\n    }, call: function (instance, name, args, allowDisconnected) {\n      var i,\n          set = instance.plugins[name];if (!set) {\n        return;\n      }if (!allowDisconnected && (!instance.element[0].parentNode || instance.element[0].parentNode.nodeType === 11)) {\n        return;\n      }for (i = 0; i < set.length; i++) {\n        if (instance.options[set[i][0]]) {\n          set[i][1].apply(instance.element, args);\n        }\n      }\n    } };var widget_uuid = 0,\n      widget_slice = Array.prototype.slice;$.cleanData = function (orig) {\n    return function (elems) {\n      var events, elem, i;for (i = 0; (elem = elems[i]) != null; i++) {\n        try {\n          events = $._data(elem, "events");if (events && events.remove) {\n            $(elem).triggerHandler("remove");\n          }\n        } catch (e) {}\n      }orig(elems);\n    };\n  }($.cleanData);$.widget = function (name, base, prototype) {\n    var fullName,\n        existingConstructor,\n        constructor,\n        basePrototype,\n        proxiedPrototype = {},\n        namespace = name.split(".")[0];name = name.split(".")[1];fullName = namespace + "-" + name;if (!prototype) {\n      prototype = base;base = $.Widget;\n    }$.expr[":"][fullName.toLowerCase()] = function (elem) {\n      return !!$.data(elem, fullName);\n    };$[namespace] = $[namespace] || {};existingConstructor = $[namespace][name];constructor = $[namespace][name] = function (options, element) {\n      if (!this._createWidget) {\n        return new constructor(options, element);\n      }if (arguments.length) {\n        this._createWidget(options, element);\n      }\n    };$.extend(constructor, existingConstructor, { version: prototype.version, _proto: $.extend({}, prototype), _childConstructors: [] });basePrototype = new base();basePrototype.options = $.widget.extend({}, basePrototype.options);$.each(prototype, function (prop, value) {\n      if (!$.isFunction(value)) {\n        proxiedPrototype[prop] = value;return;\n      }proxiedPrototype[prop] = function () {\n        var _super = function () {\n          return base.prototype[prop].apply(this, arguments);\n        },\n            _superApply = function (args) {\n          return base.prototype[prop].apply(this, args);\n        };return function () {\n          var __super = this._super,\n              __superApply = this._superApply,\n              returnValue;this._super = _super;this._superApply = _superApply;returnValue = value.apply(this, arguments);this._super = __super;this._superApply = __superApply;return returnValue;\n        };\n      }();\n    });constructor.prototype = $.widget.extend(basePrototype, { widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix || name : name }, proxiedPrototype, { constructor: constructor, namespace: namespace, widgetName: name, widgetFullName: fullName });if (existingConstructor) {\n      $.each(existingConstructor._childConstructors, function (i, child) {\n        var childPrototype = child.prototype;$.widget(childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto);\n      });delete existingConstructor._childConstructors;\n    } else {\n      base._childConstructors.push(constructor);\n    }$.widget.bridge(name, constructor);return constructor;\n  };$.widget.extend = function (target) {\n    var input = widget_slice.call(arguments, 1),\n        inputIndex = 0,\n        inputLength = input.length,\n        key,\n        value;for (; inputIndex < inputLength; inputIndex++) {\n      for (key in input[inputIndex]) {\n        value = input[inputIndex][key];if (input[inputIndex].hasOwnProperty(key) && value !== undefined) {\n          if ($.isPlainObject(value)) {\n            target[key] = $.isPlainObject(target[key]) ? $.widget.extend({}, target[key], value) : $.widget.extend({}, value);\n          } else {\n            target[key] = value;\n          }\n        }\n      }\n    }return target;\n  };$.widget.bridge = function (name, object) {\n    var fullName = object.prototype.widgetFullName || name;$.fn[name] = function (options) {\n      var isMethodCall = typeof options === "string",\n          args = widget_slice.call(arguments, 1),\n          returnValue = this;if (isMethodCall) {\n        this.each(function () {\n          var methodValue,\n              instance = $.data(this, fullName);if (options === "instance") {\n            returnValue = instance;return false;\n          }if (!instance) {\n            return $.error("cannot call methods on " + name + " prior to initialization; " + "attempted to call method \'" + options + "\'");\n          }if (!$.isFunction(instance[options]) || options.charAt(0) === "_") {\n            return $.error("no such method \'" + options + "\' for " + name + " widget instance");\n          }methodValue = instance[options].apply(instance, args);if (methodValue !== instance && methodValue !== undefined) {\n            returnValue = methodValue && methodValue.jquery ? returnValue.pushStack(methodValue.get()) : methodValue;return false;\n          }\n        });\n      } else {\n        if (args.length) {\n          options = $.widget.extend.apply(null, [options].concat(args));\n        }this.each(function () {\n          var instance = $.data(this, fullName);if (instance) {\n            instance.option(options || {});if (instance._init) {\n              instance._init();\n            }\n          } else {\n            $.data(this, fullName, new object(options, this));\n          }\n        });\n      }return returnValue;\n    };\n  };$.Widget = function () {};$.Widget._childConstructors = [];$.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: { disabled: false, create: null }, _createWidget: function (options, element) {\n      element = $(element || this.defaultElement || this)[0];this.element = $(element);this.uuid = widget_uuid++;this.eventNamespace = "." + this.widgetName + this.uuid;this.bindings = $();this.hoverable = $();this.focusable = $();if (element !== this) {\n        $.data(element, this.widgetFullName, this);this._on(true, this.element, { remove: function (event) {\n            if (event.target === element) {\n              this.destroy();\n            }\n          } });this.document = $(element.style ? element.ownerDocument : element.document || element);this.window = $(this.document[0].defaultView || this.document[0].parentWindow);\n      }this.options = $.widget.extend({}, this.options, this._getCreateOptions(), options);this._create();this._trigger("create", null, this._getCreateEventData());this._init();\n    }, _getCreateOptions: $.noop, _getCreateEventData: $.noop, _create: $.noop, _init: $.noop, destroy: function () {\n      this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");\n    }, _destroy: $.noop, widget: function () {\n      return this.element;\n    }, option: function (key, value) {\n      var options = key,\n          parts,\n          curOption,\n          i;if (arguments.length === 0) {\n        return $.widget.extend({}, this.options);\n      }if (typeof key === "string") {\n        options = {};parts = key.split(".");key = parts.shift();if (parts.length) {\n          curOption = options[key] = $.widget.extend({}, this.options[key]);for (i = 0; i < parts.length - 1; i++) {\n            curOption[parts[i]] = curOption[parts[i]] || {};curOption = curOption[parts[i]];\n          }key = parts.pop();if (arguments.length === 1) {\n            return curOption[key] === undefined ? null : curOption[key];\n          }curOption[key] = value;\n        } else {\n          if (arguments.length === 1) {\n            return this.options[key] === undefined ? null : this.options[key];\n          }options[key] = value;\n        }\n      }this._setOptions(options);return this;\n    }, _setOptions: function (options) {\n      var key;for (key in options) {\n        this._setOption(key, options[key]);\n      }return this;\n    }, _setOption: function (key, value) {\n      this.options[key] = value;if (key === "disabled") {\n        this.widget().toggleClass(this.widgetFullName + "-disabled", !!value);if (value) {\n          this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");\n        }\n      }return this;\n    }, enable: function () {\n      return this._setOptions({ disabled: false });\n    }, disable: function () {\n      return this._setOptions({ disabled: true });\n    }, _on: function (suppressDisabledCheck, element, handlers) {\n      var delegateElement,\n          instance = this;if (typeof suppressDisabledCheck !== "boolean") {\n        handlers = element;element = suppressDisabledCheck;suppressDisabledCheck = false;\n      }if (!handlers) {\n        handlers = element;element = this.element;delegateElement = this.widget();\n      } else {\n        element = delegateElement = $(element);this.bindings = this.bindings.add(element);\n      }$.each(handlers, function (event, handler) {\n        function handlerProxy() {\n          if (!suppressDisabledCheck && (instance.options.disabled === true || $(this).hasClass("ui-state-disabled"))) {\n            return;\n          }return (typeof handler === "string" ? instance[handler] : handler).apply(instance, arguments);\n        }if (typeof handler !== "string") {\n          handlerProxy.guid = handler.guid = handler.guid || handlerProxy.guid || $.guid++;\n        }var match = event.match(/^([\\w:-]*)\\s*(.*)$/),\n            eventName = match[1] + instance.eventNamespace,\n            selector = match[2];if (selector) {\n          delegateElement.delegate(selector, eventName, handlerProxy);\n        } else {\n          element.bind(eventName, handlerProxy);\n        }\n      });\n    }, _off: function (element, eventName) {\n      eventName = (eventName || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings = $(this.bindings.not(element).get());this.focusable = $(this.focusable.not(element).get());this.hoverable = $(this.hoverable.not(element).get());\n    }, _delay: function (handler, delay) {\n      function handlerProxy() {\n        return (typeof handler === "string" ? instance[handler] : handler).apply(instance, arguments);\n      }var instance = this;return setTimeout(handlerProxy, delay || 0);\n    }, _hoverable: function (element) {\n      this.hoverable = this.hoverable.add(element);this._on(element, { mouseenter: function (event) {\n          $(event.currentTarget).addClass("ui-state-hover");\n        }, mouseleave: function (event) {\n          $(event.currentTarget).removeClass("ui-state-hover");\n        } });\n    }, _focusable: function (element) {\n      this.focusable = this.focusable.add(element);this._on(element, { focusin: function (event) {\n          $(event.currentTarget).addClass("ui-state-focus");\n        }, focusout: function (event) {\n          $(event.currentTarget).removeClass("ui-state-focus");\n        } });\n    }, _trigger: function (type, event, data) {\n      var prop,\n          orig,\n          callback = this.options[type];data = data || {};event = $.Event(event);event.type = (type === this.widgetEventPrefix ? type : this.widgetEventPrefix + type).toLowerCase();event.target = this.element[0];orig = event.originalEvent;if (orig) {\n        for (prop in orig) {\n          if (!(prop in event)) {\n            event[prop] = orig[prop];\n          }\n        }\n      }this.element.trigger(event, data);return !($.isFunction(callback) && callback.apply(this.element[0], [event].concat(data)) === false || event.isDefaultPrevented());\n    } };$.each({ show: "fadeIn", hide: "fadeOut" }, function (method, defaultEffect) {\n    $.Widget.prototype["_" + method] = function (element, options, callback) {\n      if (typeof options === "string") {\n        options = { effect: options };\n      }var hasOptions,\n          effectName = !options ? method : options === true || typeof options === "number" ? defaultEffect : options.effect || defaultEffect;options = options || {};if (typeof options === "number") {\n        options = { duration: options };\n      }hasOptions = !$.isEmptyObject(options);options.complete = callback;if (options.delay) {\n        element.delay(options.delay);\n      }if (hasOptions && $.effects && $.effects.effect[effectName]) {\n        element[method](options);\n      } else if (effectName !== method && element[effectName]) {\n        element[effectName](options.duration, options.easing, callback);\n      } else {\n        element.queue(function (next) {\n          $(this)[method]();if (callback) {\n            callback.call(element[0]);\n          }next();\n        });\n      }\n    };\n  });var widget = $.widget;var mouseHandled = false;$(document).mouseup(function () {\n    mouseHandled = false;\n  });var mouse = $.widget("ui.mouse", { version: "1.11.4", options: { cancel: "input,textarea,button,select,option", distance: 1, delay: 0 }, _mouseInit: function () {\n      var that = this;this.element.bind("mousedown." + this.widgetName, function (event) {\n        return that._mouseDown(event);\n      }).bind("click." + this.widgetName, function (event) {\n        if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {\n          $.removeData(event.target, that.widgetName + ".preventClickEvent");event.stopImmediatePropagation();return false;\n        }\n      });this.started = false;\n    }, _mouseDestroy: function () {\n      this.element.unbind("." + this.widgetName);if (this._mouseMoveDelegate) {\n        this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);\n      }\n    }, _mouseDown: function (event) {\n      if (mouseHandled) {\n        return;\n      }this._mouseMoved = false;this._mouseStarted && this._mouseUp(event);this._mouseDownEvent = event;var that = this,\n          btnIsLeft = event.which === 1,\n          elIsCancel = typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false;if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {\n        return true;\n      }this.mouseDelayMet = !this.options.delay;if (!this.mouseDelayMet) {\n        this._mouseDelayTimer = setTimeout(function () {\n          that.mouseDelayMet = true;\n        }, this.options.delay);\n      }if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n        this._mouseStarted = this._mouseStart(event) !== false;if (!this._mouseStarted) {\n          event.preventDefault();return true;\n        }\n      }if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {\n        $.removeData(event.target, this.widgetName + ".preventClickEvent");\n      }this._mouseMoveDelegate = function (event) {\n        return that._mouseMove(event);\n      };this._mouseUpDelegate = function (event) {\n        return that._mouseUp(event);\n      };this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate);event.preventDefault();mouseHandled = true;return true;\n    }, _mouseMove: function (event) {\n      if (this._mouseMoved) {\n        if ($.ui.ie && (!document.documentMode || document.documentMode < 9) && !event.button) {\n          return this._mouseUp(event);\n        } else if (!event.which) {\n          return this._mouseUp(event);\n        }\n      }if (event.which || event.button) {\n        this._mouseMoved = true;\n      }if (this._mouseStarted) {\n        this._mouseDrag(event);return event.preventDefault();\n      }if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n        this._mouseStarted = this._mouseStart(this._mouseDownEvent, event) !== false;this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event);\n      }return !this._mouseStarted;\n    }, _mouseUp: function (event) {\n      this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);if (this._mouseStarted) {\n        this._mouseStarted = false;if (event.target === this._mouseDownEvent.target) {\n          $.data(event.target, this.widgetName + ".preventClickEvent", true);\n        }this._mouseStop(event);\n      }mouseHandled = false;return false;\n    }, _mouseDistanceMet: function (event) {\n      return Math.max(Math.abs(this._mouseDownEvent.pageX - event.pageX), Math.abs(this._mouseDownEvent.pageY - event.pageY)) >= this.options.distance;\n    }, _mouseDelayMet: function () {\n      return this.mouseDelayMet;\n    }, _mouseStart: function () {}, _mouseDrag: function () {}, _mouseStop: function () {}, _mouseCapture: function () {\n      return true;\n    } });$.widget("ui.draggable", $.ui.mouse, { version: "1.11.4", widgetEventPrefix: "drag", options: { addClasses: true, appendTo: "parent", axis: false, connectToSortable: false, containment: false, cursor: "auto", cursorAt: false, grid: false, handle: false, helper: "original", iframeFix: false, opacity: false, refreshPositions: false, revert: false, revertDuration: 500, scope: "default", scroll: true, scrollSensitivity: 20, scrollSpeed: 20, snap: false, snapMode: "both", snapTolerance: 20, stack: false, zIndex: false, drag: null, start: null, stop: null }, _create: function () {\n      if (this.options.helper === "original") {\n        this._setPositionRelative();\n      }if (this.options.addClasses) {\n        this.element.addClass("ui-draggable");\n      }if (this.options.disabled) {\n        this.element.addClass("ui-draggable-disabled");\n      }this._setHandleClassName();this._mouseInit();\n    }, _setOption: function (key, value) {\n      this._super(key, value);if (key === "handle") {\n        this._removeHandleClassName();this._setHandleClassName();\n      }\n    }, _destroy: function () {\n      if ((this.helper || this.element).is(".ui-draggable-dragging")) {\n        this.destroyOnClear = true;return;\n      }this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy();\n    }, _mouseCapture: function (event) {\n      var o = this.options;this._blurActiveElement(event);if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {\n        return false;\n      }this.handle = this._getHandle(event);if (!this.handle) {\n        return false;\n      }this._blockFrames(o.iframeFix === true ? "iframe" : o.iframeFix);return true;\n    }, _blockFrames: function (selector) {\n      this.iframeBlocks = this.document.find(selector).map(function () {\n        var iframe = $(this);return $("<div>").css("position", "absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];\n      });\n    }, _unblockFrames: function () {\n      if (this.iframeBlocks) {\n        this.iframeBlocks.remove();delete this.iframeBlocks;\n      }\n    }, _blurActiveElement: function (event) {\n      var document = this.document[0];if (!this.handleElement.is(event.target)) {\n        return;\n      }try {\n        if (document.activeElement && document.activeElement.nodeName.toLowerCase() !== "body") {\n          $(document.activeElement).blur();\n        }\n      } catch (error) {}\n    }, _mouseStart: function (event) {\n      var o = this.options;this.helper = this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if ($.ui.ddmanager) {\n        $.ui.ddmanager.current = this;\n      }this._cacheMargins();this.cssPosition = this.helper.css("position");this.scrollParent = this.helper.scrollParent(true);this.offsetParent = this.helper.offsetParent();this.hasFixedAncestor = this.helper.parents().filter(function () {\n        return $(this).css("position") === "fixed";\n      }).length > 0;this.positionAbs = this.element.offset();this._refreshOffsets(event);this.originalPosition = this.position = this._generatePosition(event, false);this.originalPageX = event.pageX;this.originalPageY = event.pageY;o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt);this._setContainment();if (this._trigger("start", event) === false) {\n        this._clear();return false;\n      }this._cacheHelperProportions();if ($.ui.ddmanager && !o.dropBehaviour) {\n        $.ui.ddmanager.prepareOffsets(this, event);\n      }this._normalizeRightBottom();this._mouseDrag(event, true);if ($.ui.ddmanager) {\n        $.ui.ddmanager.dragStart(this, event);\n      }return true;\n    }, _refreshOffsets: function (event) {\n      this.offset = { top: this.positionAbs.top - this.margins.top, left: this.positionAbs.left - this.margins.left, scroll: false, parent: this._getParentOffset(), relative: this._getRelativeOffset() };this.offset.click = { left: event.pageX - this.offset.left, top: event.pageY - this.offset.top };\n    }, _mouseDrag: function (event, noPropagation) {\n      if (this.hasFixedAncestor) {\n        this.offset.parent = this._getParentOffset();\n      }this.position = this._generatePosition(event, true);this.positionAbs = this._convertPositionTo("absolute");if (!noPropagation) {\n        var ui = this._uiHash();if (this._trigger("drag", event, ui) === false) {\n          this._mouseUp({});return false;\n        }this.position = ui.position;\n      }this.helper[0].style.left = this.position.left + "px";this.helper[0].style.top = this.position.top + "px";if ($.ui.ddmanager) {\n        $.ui.ddmanager.drag(this, event);\n      }return false;\n    }, _mouseStop: function (event) {\n      var that = this,\n          dropped = false;if ($.ui.ddmanager && !this.options.dropBehaviour) {\n        dropped = $.ui.ddmanager.drop(this, event);\n      }if (this.dropped) {\n        dropped = this.dropped;this.dropped = false;\n      }if (this.options.revert === "invalid" && !dropped || this.options.revert === "valid" && dropped || this.options.revert === true || $.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped)) {\n        $(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {\n          if (that._trigger("stop", event) !== false) {\n            that._clear();\n          }\n        });\n      } else {\n        if (this._trigger("stop", event) !== false) {\n          this._clear();\n        }\n      }return false;\n    }, _mouseUp: function (event) {\n      this._unblockFrames();if ($.ui.ddmanager) {\n        $.ui.ddmanager.dragStop(this, event);\n      }if (this.handleElement.is(event.target)) {\n        this.element.focus();\n      }return $.ui.mouse.prototype._mouseUp.call(this, event);\n    }, cancel: function () {\n      if (this.helper.is(".ui-draggable-dragging")) {\n        this._mouseUp({});\n      } else {\n        this._clear();\n      }return this;\n    }, _getHandle: function (event) {\n      return this.options.handle ? !!$(event.target).closest(this.element.find(this.options.handle)).length : true;\n    }, _setHandleClassName: function () {\n      this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element;this.handleElement.addClass("ui-draggable-handle");\n    }, _removeHandleClassName: function () {\n      this.handleElement.removeClass("ui-draggable-handle");\n    }, _createHelper: function (event) {\n      var o = this.options,\n          helperIsFunction = $.isFunction(o.helper),\n          helper = helperIsFunction ? $(o.helper.apply(this.element[0], [event])) : o.helper === "clone" ? this.element.clone().removeAttr("id") : this.element;if (!helper.parents("body").length) {\n        helper.appendTo(o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo);\n      }if (helperIsFunction && helper[0] === this.element[0]) {\n        this._setPositionRelative();\n      }if (helper[0] !== this.element[0] && !/(fixed|absolute)/.test(helper.css("position"))) {\n        helper.css("position", "absolute");\n      }return helper;\n    }, _setPositionRelative: function () {\n      if (!/^(?:r|a|f)/.test(this.element.css("position"))) {\n        this.element[0].style.position = "relative";\n      }\n    }, _adjustOffsetFromHelper: function (obj) {\n      if (typeof obj === "string") {\n        obj = obj.split(" ");\n      }if ($.isArray(obj)) {\n        obj = { left: +obj[0], top: +obj[1] || 0 };\n      }if ("left" in obj) {\n        this.offset.click.left = obj.left + this.margins.left;\n      }if ("right" in obj) {\n        this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n      }if ("top" in obj) {\n        this.offset.click.top = obj.top + this.margins.top;\n      }if ("bottom" in obj) {\n        this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n      }\n    }, _isRootNode: function (element) {\n      return (/(html|body)/i.test(element.tagName) || element === this.document[0]\n      );\n    }, _getParentOffset: function () {\n      var po = this.offsetParent.offset(),\n          document = this.document[0];if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n        po.left += this.scrollParent.scrollLeft();po.top += this.scrollParent.scrollTop();\n      }if (this._isRootNode(this.offsetParent[0])) {\n        po = { top: 0, left: 0 };\n      }return { top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) };\n    }, _getRelativeOffset: function () {\n      if (this.cssPosition !== "relative") {\n        return { top: 0, left: 0 };\n      }var p = this.element.position(),\n          scrollIsRootNode = this._isRootNode(this.scrollParent[0]);return { top: p.top - (parseInt(this.helper.css("top"), 10) || 0) + (!scrollIsRootNode ? this.scrollParent.scrollTop() : 0), left: p.left - (parseInt(this.helper.css("left"), 10) || 0) + (!scrollIsRootNode ? this.scrollParent.scrollLeft() : 0) };\n    }, _cacheMargins: function () {\n      this.margins = { left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0 };\n    }, _cacheHelperProportions: function () {\n      this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() };\n    }, _setContainment: function () {\n      var isUserScrollable,\n          c,\n          ce,\n          o = this.options,\n          document = this.document[0];this.relativeContainer = null;if (!o.containment) {\n        this.containment = null;return;\n      }if (o.containment === "window") {\n        this.containment = [$(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, $(window).scrollLeft() + $(window).width() - this.helperProportions.width - this.margins.left, $(window).scrollTop() + ($(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];return;\n      }if (o.containment === "document") {\n        this.containment = [0, 0, $(document).width() - this.helperProportions.width - this.margins.left, ($(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];return;\n      }if (o.containment.constructor === Array) {\n        this.containment = o.containment;return;\n      }if (o.containment === "parent") {\n        o.containment = this.helper[0].parentNode;\n      }c = $(o.containment);ce = c[0];if (!ce) {\n        return;\n      }isUserScrollable = /(scroll|auto)/.test(c.css("overflow"));this.containment = [(parseInt(c.css("borderLeftWidth"), 10) || 0) + (parseInt(c.css("paddingLeft"), 10) || 0), (parseInt(c.css("borderTopWidth"), 10) || 0) + (parseInt(c.css("paddingTop"), 10) || 0), (isUserScrollable ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) - (parseInt(c.css("borderRightWidth"), 10) || 0) - (parseInt(c.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (isUserScrollable ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) - (parseInt(c.css("borderBottomWidth"), 10) || 0) - (parseInt(c.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom];this.relativeContainer = c;\n    }, _convertPositionTo: function (d, pos) {\n      if (!pos) {\n        pos = this.position;\n      }var mod = d === "absolute" ? 1 : -1,\n          scrollIsRootNode = this._isRootNode(this.scrollParent[0]);return { top: pos.top + this.offset.relative.top * mod + this.offset.parent.top * mod - (this.cssPosition === "fixed" ? -this.offset.scroll.top : scrollIsRootNode ? 0 : this.offset.scroll.top) * mod, left: pos.left + this.offset.relative.left * mod + this.offset.parent.left * mod - (this.cssPosition === "fixed" ? -this.offset.scroll.left : scrollIsRootNode ? 0 : this.offset.scroll.left) * mod };\n    }, _generatePosition: function (event, constrainPosition) {\n      var containment,\n          co,\n          top,\n          left,\n          o = this.options,\n          scrollIsRootNode = this._isRootNode(this.scrollParent[0]),\n          pageX = event.pageX,\n          pageY = event.pageY;if (!scrollIsRootNode || !this.offset.scroll) {\n        this.offset.scroll = { top: this.scrollParent.scrollTop(), left: this.scrollParent.scrollLeft() };\n      }if (constrainPosition) {\n        if (this.containment) {\n          if (this.relativeContainer) {\n            co = this.relativeContainer.offset();containment = [this.containment[0] + co.left, this.containment[1] + co.top, this.containment[2] + co.left, this.containment[3] + co.top];\n          } else {\n            containment = this.containment;\n          }if (event.pageX - this.offset.click.left < containment[0]) {\n            pageX = containment[0] + this.offset.click.left;\n          }if (event.pageY - this.offset.click.top < containment[1]) {\n            pageY = containment[1] + this.offset.click.top;\n          }if (event.pageX - this.offset.click.left > containment[2]) {\n            pageX = containment[2] + this.offset.click.left;\n          }if (event.pageY - this.offset.click.top > containment[3]) {\n            pageY = containment[3] + this.offset.click.top;\n          }\n        }if (o.grid) {\n          top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;pageY = containment ? top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3] ? top : top - this.offset.click.top >= containment[1] ? top - o.grid[1] : top + o.grid[1] : top;left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;pageX = containment ? left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2] ? left : left - this.offset.click.left >= containment[0] ? left - o.grid[0] : left + o.grid[0] : left;\n        }if (o.axis === "y") {\n          pageX = this.originalPageX;\n        }if (o.axis === "x") {\n          pageY = this.originalPageY;\n        }\n      }return { top: pageY - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.offset.scroll.top : scrollIsRootNode ? 0 : this.offset.scroll.top), left: pageX - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.offset.scroll.left : scrollIsRootNode ? 0 : this.offset.scroll.left) };\n    }, _clear: function () {\n      this.helper.removeClass("ui-draggable-dragging");if (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {\n        this.helper.remove();\n      }this.helper = null;this.cancelHelperRemoval = false;if (this.destroyOnClear) {\n        this.destroy();\n      }\n    }, _normalizeRightBottom: function () {\n      if (this.options.axis !== "y" && this.helper.css("right") !== "auto") {\n        this.helper.width(this.helper.width());this.helper.css("right", "auto");\n      }if (this.options.axis !== "x" && this.helper.css("bottom") !== "auto") {\n        this.helper.height(this.helper.height());this.helper.css("bottom", "auto");\n      }\n    }, _trigger: function (type, event, ui) {\n      ui = ui || this._uiHash();$.ui.plugin.call(this, type, [event, ui, this], true);if (/^(drag|start|stop)/.test(type)) {\n        this.positionAbs = this._convertPositionTo("absolute");ui.offset = this.positionAbs;\n      }return $.Widget.prototype._trigger.call(this, type, event, ui);\n    }, plugins: {}, _uiHash: function () {\n      return { helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs };\n    } });$.ui.plugin.add("draggable", "connectToSortable", { start: function (event, ui, draggable) {\n      var uiSortable = $.extend({}, ui, { item: draggable.element });draggable.sortables = [];$(draggable.options.connectToSortable).each(function () {\n        var sortable = $(this).sortable("instance");if (sortable && !sortable.options.disabled) {\n          draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate", event, uiSortable);\n        }\n      });\n    }, stop: function (event, ui, draggable) {\n      var uiSortable = $.extend({}, ui, { item: draggable.element });draggable.cancelHelperRemoval = false;$.each(draggable.sortables, function () {\n        var sortable = this;if (sortable.isOver) {\n          sortable.isOver = 0;draggable.cancelHelperRemoval = true;sortable.cancelHelperRemoval = false;sortable._storedCSS = { position: sortable.placeholder.css("position"), top: sortable.placeholder.css("top"), left: sortable.placeholder.css("left") };sortable._mouseStop(event);sortable.options.helper = sortable.options._helper;\n        } else {\n          sortable.cancelHelperRemoval = true;sortable._trigger("deactivate", event, uiSortable);\n        }\n      });\n    }, drag: function (event, ui, draggable) {\n      $.each(draggable.sortables, function () {\n        var innermostIntersecting = false,\n            sortable = this;sortable.positionAbs = draggable.positionAbs;sortable.helperProportions = draggable.helperProportions;sortable.offset.click = draggable.offset.click;if (sortable._intersectsWith(sortable.containerCache)) {\n          innermostIntersecting = true;$.each(draggable.sortables, function () {\n            this.positionAbs = draggable.positionAbs;this.helperProportions = draggable.helperProportions;this.offset.click = draggable.offset.click;if (this !== sortable && this._intersectsWith(this.containerCache) && $.contains(sortable.element[0], this.element[0])) {\n              innermostIntersecting = false;\n            }return innermostIntersecting;\n          });\n        }if (innermostIntersecting) {\n          if (!sortable.isOver) {\n            sortable.isOver = 1;draggable._parent = ui.helper.parent();sortable.currentItem = ui.helper.appendTo(sortable.element).data("ui-sortable-item", true);sortable.options._helper = sortable.options.helper;sortable.options.helper = function () {\n              return ui.helper[0];\n            };event.target = sortable.currentItem[0];sortable._mouseCapture(event, true);sortable._mouseStart(event, true, true);sortable.offset.click.top = draggable.offset.click.top;sortable.offset.click.left = draggable.offset.click.left;sortable.offset.parent.left -= draggable.offset.parent.left - sortable.offset.parent.left;sortable.offset.parent.top -= draggable.offset.parent.top - sortable.offset.parent.top;draggable._trigger("toSortable", event);draggable.dropped = sortable.element;$.each(draggable.sortables, function () {\n              this.refreshPositions();\n            });draggable.currentItem = draggable.element;sortable.fromOutside = draggable;\n          }if (sortable.currentItem) {\n            sortable._mouseDrag(event);ui.position = sortable.position;\n          }\n        } else {\n          if (sortable.isOver) {\n            sortable.isOver = 0;sortable.cancelHelperRemoval = true;sortable.options._revert = sortable.options.revert;sortable.options.revert = false;sortable._trigger("out", event, sortable._uiHash(sortable));sortable._mouseStop(event, true);sortable.options.revert = sortable.options._revert;sortable.options.helper = sortable.options._helper;if (sortable.placeholder) {\n              sortable.placeholder.remove();\n            }ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position = draggable._generatePosition(event, true);draggable._trigger("fromSortable", event);draggable.dropped = false;$.each(draggable.sortables, function () {\n              this.refreshPositions();\n            });\n          }\n        }\n      });\n    } });$.ui.plugin.add("draggable", "cursor", { start: function (event, ui, instance) {\n      var t = $("body"),\n          o = instance.options;if (t.css("cursor")) {\n        o._cursor = t.css("cursor");\n      }t.css("cursor", o.cursor);\n    }, stop: function (event, ui, instance) {\n      var o = instance.options;if (o._cursor) {\n        $("body").css("cursor", o._cursor);\n      }\n    } });$.ui.plugin.add("draggable", "opacity", { start: function (event, ui, instance) {\n      var t = $(ui.helper),\n          o = instance.options;if (t.css("opacity")) {\n        o._opacity = t.css("opacity");\n      }t.css("opacity", o.opacity);\n    }, stop: function (event, ui, instance) {\n      var o = instance.options;if (o._opacity) {\n        $(ui.helper).css("opacity", o._opacity);\n      }\n    } });$.ui.plugin.add("draggable", "scroll", { start: function (event, ui, i) {\n      if (!i.scrollParentNotHidden) {\n        i.scrollParentNotHidden = i.helper.scrollParent(false);\n      }if (i.scrollParentNotHidden[0] !== i.document[0] && i.scrollParentNotHidden[0].tagName !== "HTML") {\n        i.overflowOffset = i.scrollParentNotHidden.offset();\n      }\n    }, drag: function (event, ui, i) {\n      var o = i.options,\n          scrolled = false,\n          scrollParent = i.scrollParentNotHidden[0],\n          document = i.document[0];if (scrollParent !== document && scrollParent.tagName !== "HTML") {\n        if (!o.axis || o.axis !== "x") {\n          if (i.overflowOffset.top + scrollParent.offsetHeight - event.pageY < o.scrollSensitivity) {\n            scrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\n          } else if (event.pageY - i.overflowOffset.top < o.scrollSensitivity) {\n            scrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\n          }\n        }if (!o.axis || o.axis !== "y") {\n          if (i.overflowOffset.left + scrollParent.offsetWidth - event.pageX < o.scrollSensitivity) {\n            scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\n          } else if (event.pageX - i.overflowOffset.left < o.scrollSensitivity) {\n            scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\n          }\n        }\n      } else {\n        if (!o.axis || o.axis !== "x") {\n          if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\n            scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\n          } else if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\n            scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\n          }\n        }if (!o.axis || o.axis !== "y") {\n          if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\n            scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\n          } else if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\n            scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\n          }\n        }\n      }if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\n        $.ui.ddmanager.prepareOffsets(i, event);\n      }\n    } });$.ui.plugin.add("draggable", "snap", { start: function (event, ui, i) {\n      var o = i.options;i.snapElements = [];$(o.snap.constructor !== String ? o.snap.items || ":data(ui-draggable)" : o.snap).each(function () {\n        var $t = $(this),\n            $o = $t.offset();if (this !== i.element[0]) {\n          i.snapElements.push({ item: this, width: $t.outerWidth(), height: $t.outerHeight(), top: $o.top, left: $o.left });\n        }\n      });\n    }, drag: function (event, ui, inst) {\n      var ts,\n          bs,\n          ls,\n          rs,\n          l,\n          r,\n          t,\n          b,\n          i,\n          first,\n          o = inst.options,\n          d = o.snapTolerance,\n          x1 = ui.offset.left,\n          x2 = x1 + inst.helperProportions.width,\n          y1 = ui.offset.top,\n          y2 = y1 + inst.helperProportions.height;for (i = inst.snapElements.length - 1; i >= 0; i--) {\n        l = inst.snapElements[i].left - inst.margins.left;r = l + inst.snapElements[i].width;t = inst.snapElements[i].top - inst.margins.top;b = t + inst.snapElements[i].height;if (x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains(inst.snapElements[i].item.ownerDocument, inst.snapElements[i].item)) {\n          if (inst.snapElements[i].snapping) {\n            inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item }));\n          }inst.snapElements[i].snapping = false;continue;\n        }if (o.snapMode !== "inner") {\n          ts = Math.abs(t - y2) <= d;bs = Math.abs(b - y1) <= d;ls = Math.abs(l - x2) <= d;rs = Math.abs(r - x1) <= d;if (ts) {\n            ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top;\n          }if (bs) {\n            ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top;\n          }if (ls) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left;\n          }if (rs) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left;\n          }\n        }first = ts || bs || ls || rs;if (o.snapMode !== "outer") {\n          ts = Math.abs(t - y1) <= d;bs = Math.abs(b - y2) <= d;ls = Math.abs(l - x1) <= d;rs = Math.abs(r - x2) <= d;if (ts) {\n            ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top;\n          }if (bs) {\n            ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top;\n          }if (ls) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left;\n          }if (rs) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left;\n          }\n        }if (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {\n          inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item }));\n        }inst.snapElements[i].snapping = ts || bs || ls || rs || first;\n      }\n    } });$.ui.plugin.add("draggable", "stack", { start: function (event, ui, instance) {\n      var min,\n          o = instance.options,\n          group = $.makeArray($(o.stack)).sort(function (a, b) {\n        return (parseInt($(a).css("zIndex"), 10) || 0) - (parseInt($(b).css("zIndex"), 10) || 0);\n      });if (!group.length) {\n        return;\n      }min = parseInt($(group[0]).css("zIndex"), 10) || 0;$(group).each(function (i) {\n        $(this).css("zIndex", min + i);\n      });this.css("zIndex", min + group.length);\n    } });$.ui.plugin.add("draggable", "zIndex", { start: function (event, ui, instance) {\n      var t = $(ui.helper),\n          o = instance.options;if (t.css("zIndex")) {\n        o._zIndex = t.css("zIndex");\n      }t.css("zIndex", o.zIndex);\n    }, stop: function (event, ui, instance) {\n      var o = instance.options;if (o._zIndex) {\n        $(ui.helper).css("zIndex", o._zIndex);\n      }\n    } });var draggable = $.ui.draggable;$.widget("ui.resizable", $.ui.mouse, { version: "1.11.4", widgetEventPrefix: "resize", options: { alsoResize: false, animate: false, animateDuration: "slow", animateEasing: "swing", aspectRatio: false, autoHide: false, containment: false, ghost: false, grid: false, handles: "e,s,se", helper: false, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null }, _num: function (value) {\n      return parseInt(value, 10) || 0;\n    }, _isNumber: function (value) {\n      return !isNaN(parseInt(value, 10));\n    }, _hasScroll: function (el, a) {\n      if ($(el).css("overflow") === "hidden") {\n        return false;\n      }var scroll = a && a === "left" ? "scrollLeft" : "scrollTop",\n          has = false;if (el[scroll] > 0) {\n        return true;\n      }el[scroll] = 1;has = el[scroll] > 0;el[scroll] = 0;return has;\n    }, _create: function () {\n      var n,\n          i,\n          handle,\n          axis,\n          hname,\n          that = this,\n          o = this.options;this.element.addClass("ui-resizable");$.extend(this, { _aspectRatio: !!o.aspectRatio, aspectRatio: o.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null });if (this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)) {\n        this.element.wrap($("<div class=\'ui-wrapper\' style=\'overflow: hidden;\'></div>").css({ position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left") }));this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance"));this.elementIsWrapper = true;this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") });this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 });this.originalResizeStyle = this.originalElement.css("resize");this.originalElement.css("resize", "none");this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" }));this.originalElement.css({ margin: this.originalElement.css("margin") });this._proportionallyResize();\n      }this.handles = o.handles || (!$(".ui-resizable-handle", this.element).length ? "e,s,se" : { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" });this._handles = $();if (this.handles.constructor === String) {\n        if (this.handles === "all") {\n          this.handles = "n,e,s,w,se,sw,ne,nw";\n        }n = this.handles.split(",");this.handles = {};for (i = 0; i < n.length; i++) {\n          handle = $.trim(n[i]);hname = "ui-resizable-" + handle;axis = $("<div class=\'ui-resizable-handle " + hname + "\'></div>");axis.css({ zIndex: o.zIndex });this.handles[handle] = ".ui-resizable-" + handle;this.element.append(axis);\n        }\n      }this._renderAxis = function (target) {\n        var i, axis, padPos, padWrapper;target = target || this.element;for (i in this.handles) {\n          if (this.handles[i].constructor === String) {\n            this.handles[i] = this.element.children(this.handles[i]).first().show();\n          } else if (this.handles[i].jquery || this.handles[i].nodeType) {\n            this.handles[i] = $(this.handles[i]);this._on(this.handles[i], { mousedown: that._mouseDown });\n          }if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)) {\n            axis = $(this.handles[i], this.element);padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();padPos = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join("");target.css(padPos, padWrapper);this._proportionallyResize();\n          }this._handles = this._handles.add(this.handles[i]);\n        }\n      };this._renderAxis(this.element);this._handles = this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function () {\n        if (!that.resizing) {\n          if (this.className) {\n            axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);\n          }that.axis = axis && axis[1] ? axis[1] : "se";\n        }\n      });if (o.autoHide) {\n        this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function () {\n          if (o.disabled) {\n            return;\n          }$(this).removeClass("ui-resizable-autohide");that._handles.show();\n        }).mouseleave(function () {\n          if (o.disabled) {\n            return;\n          }if (!that.resizing) {\n            $(this).addClass("ui-resizable-autohide");that._handles.hide();\n          }\n        });\n      }this._mouseInit();\n    }, _destroy: function () {\n      this._mouseDestroy();var wrapper,\n          _destroy = function (exp) {\n        $(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();\n      };if (this.elementIsWrapper) {\n        _destroy(this.element);wrapper = this.element;this.originalElement.css({ position: wrapper.css("position"), width: wrapper.outerWidth(), height: wrapper.outerHeight(), top: wrapper.css("top"), left: wrapper.css("left") }).insertAfter(wrapper);wrapper.remove();\n      }this.originalElement.css("resize", this.originalResizeStyle);_destroy(this.originalElement);return this;\n    }, _mouseCapture: function (event) {\n      var i,\n          handle,\n          capture = false;for (i in this.handles) {\n        handle = $(this.handles[i])[0];if (handle === event.target || $.contains(handle, event.target)) {\n          capture = true;\n        }\n      }return !this.options.disabled && capture;\n    }, _mouseStart: function (event) {\n      var curleft,\n          curtop,\n          cursor,\n          o = this.options,\n          el = this.element;this.resizing = true;this._renderProxy();curleft = this._num(this.helper.css("left"));curtop = this._num(this.helper.css("top"));if (o.containment) {\n        curleft += $(o.containment).scrollLeft() || 0;curtop += $(o.containment).scrollTop() || 0;\n      }this.offset = this.helper.offset();this.position = { left: curleft, top: curtop };this.size = this._helper ? { width: this.helper.width(), height: this.helper.height() } : { width: el.width(), height: el.height() };this.originalSize = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };this.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };this.originalPosition = { left: curleft, top: curtop };this.originalMousePosition = { left: event.pageX, top: event.pageY };this.aspectRatio = typeof o.aspectRatio === "number" ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1;cursor = $(".ui-resizable-" + this.axis).css("cursor");$("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);el.addClass("ui-resizable-resizing");this._propagate("start", event);return true;\n    }, _mouseDrag: function (event) {\n      var data,\n          props,\n          smp = this.originalMousePosition,\n          a = this.axis,\n          dx = event.pageX - smp.left || 0,\n          dy = event.pageY - smp.top || 0,\n          trigger = this._change[a];this._updatePrevProperties();if (!trigger) {\n        return false;\n      }data = trigger.apply(this, [event, dx, dy]);this._updateVirtualBoundaries(event.shiftKey);if (this._aspectRatio || event.shiftKey) {\n        data = this._updateRatio(data, event);\n      }data = this._respectSize(data, event);this._updateCache(data);this._propagate("resize", event);props = this._applyChanges();if (!this._helper && this._proportionallyResizeElements.length) {\n        this._proportionallyResize();\n      }if (!$.isEmptyObject(props)) {\n        this._updatePrevProperties();this._trigger("resize", event, this.ui());this._applyChanges();\n      }return false;\n    }, _mouseStop: function (event) {\n      this.resizing = false;var pr,\n          ista,\n          soffseth,\n          soffsetw,\n          s,\n          left,\n          top,\n          o = this.options,\n          that = this;if (this._helper) {\n        pr = this._proportionallyResizeElements;ista = pr.length && /textarea/i.test(pr[0].nodeName);soffseth = ista && this._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height;soffsetw = ista ? 0 : that.sizeDiff.width;s = { width: that.helper.width() - soffsetw, height: that.helper.height() - soffseth };left = parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left) || null;top = parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top) || null;if (!o.animate) {\n          this.element.css($.extend(s, { top: top, left: left }));\n        }that.helper.height(that.size.height);that.helper.width(that.size.width);if (this._helper && !o.animate) {\n          this._proportionallyResize();\n        }\n      }$("body").css("cursor", "auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop", event);if (this._helper) {\n        this.helper.remove();\n      }return false;\n    }, _updatePrevProperties: function () {\n      this.prevPosition = { top: this.position.top, left: this.position.left };this.prevSize = { width: this.size.width, height: this.size.height };\n    }, _applyChanges: function () {\n      var props = {};if (this.position.top !== this.prevPosition.top) {\n        props.top = this.position.top + "px";\n      }if (this.position.left !== this.prevPosition.left) {\n        props.left = this.position.left + "px";\n      }if (this.size.width !== this.prevSize.width) {\n        props.width = this.size.width + "px";\n      }if (this.size.height !== this.prevSize.height) {\n        props.height = this.size.height + "px";\n      }this.helper.css(props);return props;\n    }, _updateVirtualBoundaries: function (forceAspectRatio) {\n      var pMinWidth,\n          pMaxWidth,\n          pMinHeight,\n          pMaxHeight,\n          b,\n          o = this.options;b = { minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0, maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : Infinity, minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0, maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : Infinity };if (this._aspectRatio || forceAspectRatio) {\n        pMinWidth = b.minHeight * this.aspectRatio;pMinHeight = b.minWidth / this.aspectRatio;pMaxWidth = b.maxHeight * this.aspectRatio;pMaxHeight = b.maxWidth / this.aspectRatio;if (pMinWidth > b.minWidth) {\n          b.minWidth = pMinWidth;\n        }if (pMinHeight > b.minHeight) {\n          b.minHeight = pMinHeight;\n        }if (pMaxWidth < b.maxWidth) {\n          b.maxWidth = pMaxWidth;\n        }if (pMaxHeight < b.maxHeight) {\n          b.maxHeight = pMaxHeight;\n        }\n      }this._vBoundaries = b;\n    }, _updateCache: function (data) {\n      this.offset = this.helper.offset();if (this._isNumber(data.left)) {\n        this.position.left = data.left;\n      }if (this._isNumber(data.top)) {\n        this.position.top = data.top;\n      }if (this._isNumber(data.height)) {\n        this.size.height = data.height;\n      }if (this._isNumber(data.width)) {\n        this.size.width = data.width;\n      }\n    }, _updateRatio: function (data) {\n      var cpos = this.position,\n          csize = this.size,\n          a = this.axis;if (this._isNumber(data.height)) {\n        data.width = data.height * this.aspectRatio;\n      } else if (this._isNumber(data.width)) {\n        data.height = data.width / this.aspectRatio;\n      }if (a === "sw") {\n        data.left = cpos.left + (csize.width - data.width);data.top = null;\n      }if (a === "nw") {\n        data.top = cpos.top + (csize.height - data.height);data.left = cpos.left + (csize.width - data.width);\n      }return data;\n    }, _respectSize: function (data) {\n      var o = this._vBoundaries,\n          a = this.axis,\n          ismaxw = this._isNumber(data.width) && o.maxWidth && o.maxWidth < data.width,\n          ismaxh = this._isNumber(data.height) && o.maxHeight && o.maxHeight < data.height,\n          isminw = this._isNumber(data.width) && o.minWidth && o.minWidth > data.width,\n          isminh = this._isNumber(data.height) && o.minHeight && o.minHeight > data.height,\n          dw = this.originalPosition.left + this.originalSize.width,\n          dh = this.position.top + this.size.height,\n          cw = /sw|nw|w/.test(a),\n          ch = /nw|ne|n/.test(a);if (isminw) {\n        data.width = o.minWidth;\n      }if (isminh) {\n        data.height = o.minHeight;\n      }if (ismaxw) {\n        data.width = o.maxWidth;\n      }if (ismaxh) {\n        data.height = o.maxHeight;\n      }if (isminw && cw) {\n        data.left = dw - o.minWidth;\n      }if (ismaxw && cw) {\n        data.left = dw - o.maxWidth;\n      }if (isminh && ch) {\n        data.top = dh - o.minHeight;\n      }if (ismaxh && ch) {\n        data.top = dh - o.maxHeight;\n      }if (!data.width && !data.height && !data.left && data.top) {\n        data.top = null;\n      } else if (!data.width && !data.height && !data.top && data.left) {\n        data.left = null;\n      }return data;\n    }, _getPaddingPlusBorderDimensions: function (element) {\n      var i = 0,\n          widths = [],\n          borders = [element.css("borderTopWidth"), element.css("borderRightWidth"), element.css("borderBottomWidth"), element.css("borderLeftWidth")],\n          paddings = [element.css("paddingTop"), element.css("paddingRight"), element.css("paddingBottom"), element.css("paddingLeft")];for (; i < 4; i++) {\n        widths[i] = parseInt(borders[i], 10) || 0;widths[i] += parseInt(paddings[i], 10) || 0;\n      }return { height: widths[0] + widths[2], width: widths[1] + widths[3] };\n    }, _proportionallyResize: function () {\n      if (!this._proportionallyResizeElements.length) {\n        return;\n      }var prel,\n          i = 0,\n          element = this.helper || this.element;for (; i < this._proportionallyResizeElements.length; i++) {\n        prel = this._proportionallyResizeElements[i];if (!this.outerDimensions) {\n          this.outerDimensions = this._getPaddingPlusBorderDimensions(prel);\n        }prel.css({ height: element.height() - this.outerDimensions.height || 0, width: element.width() - this.outerDimensions.width || 0 });\n      }\n    }, _renderProxy: function () {\n      var el = this.element,\n          o = this.options;this.elementOffset = el.offset();if (this._helper) {\n        this.helper = this.helper || $("<div style=\'overflow:hidden;\'></div>");this.helper.addClass(this._helper).css({ width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++o.zIndex });this.helper.appendTo("body").disableSelection();\n      } else {\n        this.helper = this.element;\n      }\n    }, _change: { e: function (event, dx) {\n        return { width: this.originalSize.width + dx };\n      }, w: function (event, dx) {\n        var cs = this.originalSize,\n            sp = this.originalPosition;return { left: sp.left + dx, width: cs.width - dx };\n      }, n: function (event, dx, dy) {\n        var cs = this.originalSize,\n            sp = this.originalPosition;return { top: sp.top + dy, height: cs.height - dy };\n      }, s: function (event, dx, dy) {\n        return { height: this.originalSize.height + dy };\n      }, se: function (event, dx, dy) {\n        return $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));\n      }, sw: function (event, dx, dy) {\n        return $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));\n      }, ne: function (event, dx, dy) {\n        return $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));\n      }, nw: function (event, dx, dy) {\n        return $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));\n      } }, _propagate: function (n, event) {\n      $.ui.plugin.call(this, n, [event, this.ui()]);n !== "resize" && this._trigger(n, event, this.ui());\n    }, plugins: {}, ui: function () {\n      return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition };\n    } });$.ui.plugin.add("resizable", "animate", { stop: function (event) {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          pr = that._proportionallyResizeElements,\n          ista = pr.length && /textarea/i.test(pr[0].nodeName),\n          soffseth = ista && that._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height,\n          soffsetw = ista ? 0 : that.sizeDiff.width,\n          style = { width: that.size.width - soffsetw, height: that.size.height - soffseth },\n          left = parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left) || null,\n          top = parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top) || null;that.element.animate($.extend(style, top && left ? { top: top, left: left } : {}), { duration: o.animateDuration, easing: o.animateEasing, step: function () {\n          var data = { width: parseInt(that.element.css("width"), 10), height: parseInt(that.element.css("height"), 10), top: parseInt(that.element.css("top"), 10), left: parseInt(that.element.css("left"), 10) };if (pr && pr.length) {\n            $(pr[0]).css({ width: data.width, height: data.height });\n          }that._updateCache(data);that._propagate("resize", event);\n        } });\n    } });$.ui.plugin.add("resizable", "containment", { start: function () {\n      var element,\n          p,\n          co,\n          ch,\n          cw,\n          width,\n          height,\n          that = $(this).resizable("instance"),\n          o = that.options,\n          el = that.element,\n          oc = o.containment,\n          ce = oc instanceof $ ? oc.get(0) : /parent/.test(oc) ? el.parent().get(0) : oc;if (!ce) {\n        return;\n      }that.containerElement = $(ce);if (/document/.test(oc) || oc === document) {\n        that.containerOffset = { left: 0, top: 0 };that.containerPosition = { left: 0, top: 0 };that.parentData = { element: $(document), left: 0, top: 0, width: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight };\n      } else {\n        element = $(ce);p = [];$(["Top", "Right", "Left", "Bottom"]).each(function (i, name) {\n          p[i] = that._num(element.css("padding" + name));\n        });that.containerOffset = element.offset();that.containerPosition = element.position();that.containerSize = { height: element.innerHeight() - p[3], width: element.innerWidth() - p[1] };co = that.containerOffset;ch = that.containerSize.height;cw = that.containerSize.width;width = that._hasScroll(ce, "left") ? ce.scrollWidth : cw;height = that._hasScroll(ce) ? ce.scrollHeight : ch;that.parentData = { element: ce, left: co.left, top: co.top, width: width, height: height };\n      }\n    }, resize: function (event) {\n      var woset,\n          hoset,\n          isParent,\n          isOffsetRelative,\n          that = $(this).resizable("instance"),\n          o = that.options,\n          co = that.containerOffset,\n          cp = that.position,\n          pRatio = that._aspectRatio || event.shiftKey,\n          cop = { top: 0, left: 0 },\n          ce = that.containerElement,\n          continueResize = true;if (ce[0] !== document && /static/.test(ce.css("position"))) {\n        cop = co;\n      }if (cp.left < (that._helper ? co.left : 0)) {\n        that.size.width = that.size.width + (that._helper ? that.position.left - co.left : that.position.left - cop.left);if (pRatio) {\n          that.size.height = that.size.width / that.aspectRatio;continueResize = false;\n        }that.position.left = o.helper ? co.left : 0;\n      }if (cp.top < (that._helper ? co.top : 0)) {\n        that.size.height = that.size.height + (that._helper ? that.position.top - co.top : that.position.top);if (pRatio) {\n          that.size.width = that.size.height * that.aspectRatio;continueResize = false;\n        }that.position.top = that._helper ? co.top : 0;\n      }isParent = that.containerElement.get(0) === that.element.parent().get(0);isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));if (isParent && isOffsetRelative) {\n        that.offset.left = that.parentData.left + that.position.left;that.offset.top = that.parentData.top + that.position.top;\n      } else {\n        that.offset.left = that.element.offset().left;that.offset.top = that.element.offset().top;\n      }woset = Math.abs(that.sizeDiff.width + (that._helper ? that.offset.left - cop.left : that.offset.left - co.left));hoset = Math.abs(that.sizeDiff.height + (that._helper ? that.offset.top - cop.top : that.offset.top - co.top));if (woset + that.size.width > that.parentData.width) {\n        that.size.width = that.parentData.width - woset;if (pRatio) {\n          that.size.height = that.size.width / that.aspectRatio;continueResize = false;\n        }\n      }if (hoset + that.size.height > that.parentData.height) {\n        that.size.height = that.parentData.height - hoset;if (pRatio) {\n          that.size.width = that.size.height * that.aspectRatio;continueResize = false;\n        }\n      }if (!continueResize) {\n        that.position.left = that.prevPosition.left;that.position.top = that.prevPosition.top;that.size.width = that.prevSize.width;that.size.height = that.prevSize.height;\n      }\n    }, stop: function () {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          co = that.containerOffset,\n          cop = that.containerPosition,\n          ce = that.containerElement,\n          helper = $(that.helper),\n          ho = helper.offset(),\n          w = helper.outerWidth() - that.sizeDiff.width,\n          h = helper.outerHeight() - that.sizeDiff.height;if (that._helper && !o.animate && /relative/.test(ce.css("position"))) {\n        $(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });\n      }if (that._helper && !o.animate && /static/.test(ce.css("position"))) {\n        $(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });\n      }\n    } });$.ui.plugin.add("resizable", "alsoResize", { start: function () {\n      var that = $(this).resizable("instance"),\n          o = that.options;$(o.alsoResize).each(function () {\n        var el = $(this);el.data("ui-resizable-alsoresize", { width: parseInt(el.width(), 10), height: parseInt(el.height(), 10), left: parseInt(el.css("left"), 10), top: parseInt(el.css("top"), 10) });\n      });\n    }, resize: function (event, ui) {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          os = that.originalSize,\n          op = that.originalPosition,\n          delta = { height: that.size.height - os.height || 0, width: that.size.width - os.width || 0, top: that.position.top - op.top || 0, left: that.position.left - op.left || 0 };$(o.alsoResize).each(function () {\n        var el = $(this),\n            start = $(this).data("ui-resizable-alsoresize"),\n            style = {},\n            css = el.parents(ui.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];$.each(css, function (i, prop) {\n          var sum = (start[prop] || 0) + (delta[prop] || 0);if (sum && sum >= 0) {\n            style[prop] = sum || null;\n          }\n        });el.css(style);\n      });\n    }, stop: function () {\n      $(this).removeData("resizable-alsoresize");\n    } });$.ui.plugin.add("resizable", "ghost", { start: function () {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          cs = that.size;that.ghost = that.originalElement.clone();that.ghost.css({ opacity: .25, display: "block", position: "relative", height: cs.height, width: cs.width, margin: 0, left: 0, top: 0 }).addClass("ui-resizable-ghost").addClass(typeof o.ghost === "string" ? o.ghost : "");that.ghost.appendTo(that.helper);\n    }, resize: function () {\n      var that = $(this).resizable("instance");if (that.ghost) {\n        that.ghost.css({ position: "relative", height: that.size.height, width: that.size.width });\n      }\n    }, stop: function () {\n      var that = $(this).resizable("instance");if (that.ghost && that.helper) {\n        that.helper.get(0).removeChild(that.ghost.get(0));\n      }\n    } });$.ui.plugin.add("resizable", "grid", { resize: function () {\n      var outerDimensions,\n          that = $(this).resizable("instance"),\n          o = that.options,\n          cs = that.size,\n          os = that.originalSize,\n          op = that.originalPosition,\n          a = that.axis,\n          grid = typeof o.grid === "number" ? [o.grid, o.grid] : o.grid,\n          gridX = grid[0] || 1,\n          gridY = grid[1] || 1,\n          ox = Math.round((cs.width - os.width) / gridX) * gridX,\n          oy = Math.round((cs.height - os.height) / gridY) * gridY,\n          newWidth = os.width + ox,\n          newHeight = os.height + oy,\n          isMaxWidth = o.maxWidth && o.maxWidth < newWidth,\n          isMaxHeight = o.maxHeight && o.maxHeight < newHeight,\n          isMinWidth = o.minWidth && o.minWidth > newWidth,\n          isMinHeight = o.minHeight && o.minHeight > newHeight;o.grid = grid;if (isMinWidth) {\n        newWidth += gridX;\n      }if (isMinHeight) {\n        newHeight += gridY;\n      }if (isMaxWidth) {\n        newWidth -= gridX;\n      }if (isMaxHeight) {\n        newHeight -= gridY;\n      }if (/^(se|s|e)$/.test(a)) {\n        that.size.width = newWidth;that.size.height = newHeight;\n      } else if (/^(ne)$/.test(a)) {\n        that.size.width = newWidth;that.size.height = newHeight;that.position.top = op.top - oy;\n      } else if (/^(sw)$/.test(a)) {\n        that.size.width = newWidth;that.size.height = newHeight;that.position.left = op.left - ox;\n      } else {\n        if (newHeight - gridY <= 0 || newWidth - gridX <= 0) {\n          outerDimensions = that._getPaddingPlusBorderDimensions(this);\n        }if (newHeight - gridY > 0) {\n          that.size.height = newHeight;that.position.top = op.top - oy;\n        } else {\n          newHeight = gridY - outerDimensions.height;that.size.height = newHeight;that.position.top = op.top + os.height - newHeight;\n        }if (newWidth - gridX > 0) {\n          that.size.width = newWidth;that.position.left = op.left - ox;\n        } else {\n          newWidth = gridX - outerDimensions.width;that.size.width = newWidth;that.position.left = op.left + os.width - newWidth;\n        }\n      }\n    } });var resizable = $.ui.resizable;var slider = $.widget("ui.slider", $.ui.mouse, { version: "1.11.4", widgetEventPrefix: "slide", options: { animate: false, distance: 0, max: 100, min: 0, orientation: "horizontal", range: false, step: 1, value: 0, values: null, change: null, slide: null, start: null, stop: null }, numPages: 5, _create: function () {\n      this._keySliding = false;this._mouseSliding = false;this._animateOff = true;this._handleIndex = null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider" + " ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all");this._refresh();this._setOption("disabled", this.options.disabled);this._animateOff = false;\n    }, _refresh: function () {\n      this._createRange();this._createHandles();this._setupEvents();this._refreshValue();\n    }, _createHandles: function () {\n      var i,\n          handleCount,\n          options = this.options,\n          existingHandles = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),\n          handle = "<span class=\'ui-slider-handle ui-state-default ui-corner-all\' tabindex=\'0\'></span>",\n          handles = [];handleCount = options.values && options.values.length || 1;if (existingHandles.length > handleCount) {\n        existingHandles.slice(handleCount).remove();existingHandles = existingHandles.slice(0, handleCount);\n      }for (i = existingHandles.length; i < handleCount; i++) {\n        handles.push(handle);\n      }this.handles = existingHandles.add($(handles.join("")).appendTo(this.element));this.handle = this.handles.eq(0);this.handles.each(function (i) {\n        $(this).data("ui-slider-handle-index", i);\n      });\n    }, _createRange: function () {\n      var options = this.options,\n          classes = "";if (options.range) {\n        if (options.range === true) {\n          if (!options.values) {\n            options.values = [this._valueMin(), this._valueMin()];\n          } else if (options.values.length && options.values.length !== 2) {\n            options.values = [options.values[0], options.values[0]];\n          } else if ($.isArray(options.values)) {\n            options.values = options.values.slice(0);\n          }\n        }if (!this.range || !this.range.length) {\n          this.range = $("<div></div>").appendTo(this.element);classes = "ui-slider-range" + " ui-widget-header ui-corner-all";\n        } else {\n          this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({ left: "", bottom: "" });\n        }this.range.addClass(classes + (options.range === "min" || options.range === "max" ? " ui-slider-range-" + options.range : ""));\n      } else {\n        if (this.range) {\n          this.range.remove();\n        }this.range = null;\n      }\n    }, _setupEvents: function () {\n      this._off(this.handles);this._on(this.handles, this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles);\n    }, _destroy: function () {\n      this.handles.remove();if (this.range) {\n        this.range.remove();\n      }this.element.removeClass("ui-slider" + " ui-slider-horizontal" + " ui-slider-vertical" + " ui-widget" + " ui-widget-content" + " ui-corner-all");this._mouseDestroy();\n    }, _mouseCapture: function (event) {\n      var position,\n          normValue,\n          distance,\n          closestHandle,\n          index,\n          allowed,\n          offset,\n          mouseOverHandle,\n          that = this,\n          o = this.options;if (o.disabled) {\n        return false;\n      }this.elementSize = { width: this.element.outerWidth(), height: this.element.outerHeight() };this.elementOffset = this.element.offset();position = { x: event.pageX, y: event.pageY };normValue = this._normValueFromMouse(position);distance = this._valueMax() - this._valueMin() + 1;this.handles.each(function (i) {\n        var thisDistance = Math.abs(normValue - that.values(i));\n\n        if (distance > thisDistance || distance === thisDistance && (i === that._lastChangedValue || that.values(i) === o.min)) {\n          distance = thisDistance;closestHandle = $(this);index = i;\n        }\n      });allowed = this._start(event, index);if (allowed === false) {\n        return false;\n      }this._mouseSliding = true;this._handleIndex = index;closestHandle.addClass("ui-state-active").focus();offset = closestHandle.offset();mouseOverHandle = !$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : { left: event.pageX - offset.left - closestHandle.width() / 2, top: event.pageY - offset.top - closestHandle.height() / 2 - (parseInt(closestHandle.css("borderTopWidth"), 10) || 0) - (parseInt(closestHandle.css("borderBottomWidth"), 10) || 0) + (parseInt(closestHandle.css("marginTop"), 10) || 0) };if (!this.handles.hasClass("ui-state-hover")) {\n        this._slide(event, index, normValue);\n      }this._animateOff = true;return true;\n    }, _mouseStart: function () {\n      return true;\n    }, _mouseDrag: function (event) {\n      var position = { x: event.pageX, y: event.pageY },\n          normValue = this._normValueFromMouse(position);this._slide(event, this._handleIndex, normValue);return false;\n    }, _mouseStop: function (event) {\n      this.handles.removeClass("ui-state-active");this._mouseSliding = false;this._stop(event, this._handleIndex);this._change(event, this._handleIndex);this._handleIndex = null;this._clickOffset = null;this._animateOff = false;return false;\n    }, _detectOrientation: function () {\n      this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal";\n    }, _normValueFromMouse: function (position) {\n      var pixelTotal, pixelMouse, percentMouse, valueTotal, valueMouse;if (this.orientation === "horizontal") {\n        pixelTotal = this.elementSize.width;pixelMouse = position.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0);\n      } else {\n        pixelTotal = this.elementSize.height;pixelMouse = position.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0);\n      }percentMouse = pixelMouse / pixelTotal;if (percentMouse > 1) {\n        percentMouse = 1;\n      }if (percentMouse < 0) {\n        percentMouse = 0;\n      }if (this.orientation === "vertical") {\n        percentMouse = 1 - percentMouse;\n      }valueTotal = this._valueMax() - this._valueMin();valueMouse = this._valueMin() + percentMouse * valueTotal;return this._trimAlignValue(valueMouse);\n    }, _start: function (event, index) {\n      var uiHash = { handle: this.handles[index], value: this.value() };if (this.options.values && this.options.values.length) {\n        uiHash.value = this.values(index);uiHash.values = this.values();\n      }return this._trigger("start", event, uiHash);\n    }, _slide: function (event, index, newVal) {\n      var otherVal, newValues, allowed;if (this.options.values && this.options.values.length) {\n        otherVal = this.values(index ? 0 : 1);if (this.options.values.length === 2 && this.options.range === true && (index === 0 && newVal > otherVal || index === 1 && newVal < otherVal)) {\n          newVal = otherVal;\n        }if (newVal !== this.values(index)) {\n          newValues = this.values();newValues[index] = newVal;allowed = this._trigger("slide", event, { handle: this.handles[index], value: newVal, values: newValues });otherVal = this.values(index ? 0 : 1);if (allowed !== false) {\n            this.values(index, newVal);\n          }\n        }\n      } else {\n        if (newVal !== this.value()) {\n          allowed = this._trigger("slide", event, { handle: this.handles[index], value: newVal });if (allowed !== false) {\n            this.value(newVal);\n          }\n        }\n      }\n    }, _stop: function (event, index) {\n      var uiHash = { handle: this.handles[index], value: this.value() };if (this.options.values && this.options.values.length) {\n        uiHash.value = this.values(index);uiHash.values = this.values();\n      }this._trigger("stop", event, uiHash);\n    }, _change: function (event, index) {\n      if (!this._keySliding && !this._mouseSliding) {\n        var uiHash = { handle: this.handles[index], value: this.value() };if (this.options.values && this.options.values.length) {\n          uiHash.value = this.values(index);uiHash.values = this.values();\n        }this._lastChangedValue = index;this._trigger("change", event, uiHash);\n      }\n    }, value: function (newValue) {\n      if (arguments.length) {\n        this.options.value = this._trimAlignValue(newValue);this._refreshValue();this._change(null, 0);return;\n      }return this._value();\n    }, values: function (index, newValue) {\n      var vals, newValues, i;if (arguments.length > 1) {\n        this.options.values[index] = this._trimAlignValue(newValue);this._refreshValue();this._change(null, index);return;\n      }if (arguments.length) {\n        if ($.isArray(arguments[0])) {\n          vals = this.options.values;newValues = arguments[0];for (i = 0; i < vals.length; i += 1) {\n            vals[i] = this._trimAlignValue(newValues[i]);this._change(null, i);\n          }this._refreshValue();\n        } else {\n          if (this.options.values && this.options.values.length) {\n            return this._values(index);\n          } else {\n            return this.value();\n          }\n        }\n      } else {\n        return this._values();\n      }\n    }, _setOption: function (key, value) {\n      var i,\n          valsLength = 0;if (key === "range" && this.options.range === true) {\n        if (value === "min") {\n          this.options.value = this._values(0);this.options.values = null;\n        } else if (value === "max") {\n          this.options.value = this._values(this.options.values.length - 1);this.options.values = null;\n        }\n      }if ($.isArray(this.options.values)) {\n        valsLength = this.options.values.length;\n      }if (key === "disabled") {\n        this.element.toggleClass("ui-state-disabled", !!value);\n      }this._super(key, value);switch (key) {case "orientation":\n          this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation);this._refreshValue();this.handles.css(value === "horizontal" ? "bottom" : "left", "");break;case "value":\n          this._animateOff = true;this._refreshValue();this._change(null, 0);this._animateOff = false;break;case "values":\n          this._animateOff = true;this._refreshValue();for (i = 0; i < valsLength; i += 1) {\n            this._change(null, i);\n          }this._animateOff = false;break;case "step":case "min":case "max":\n          this._animateOff = true;this._calculateNewMax();this._refreshValue();this._animateOff = false;break;case "range":\n          this._animateOff = true;this._refresh();this._animateOff = false;break;}\n    }, _value: function () {\n      var val = this.options.value;val = this._trimAlignValue(val);return val;\n    }, _values: function (index) {\n      var val, vals, i;if (arguments.length) {\n        val = this.options.values[index];val = this._trimAlignValue(val);return val;\n      } else if (this.options.values && this.options.values.length) {\n        vals = this.options.values.slice();for (i = 0; i < vals.length; i += 1) {\n          vals[i] = this._trimAlignValue(vals[i]);\n        }return vals;\n      } else {\n        return [];\n      }\n    }, _trimAlignValue: function (val) {\n      if (val <= this._valueMin()) {\n        return this._valueMin();\n      }if (val >= this._valueMax()) {\n        return this._valueMax();\n      }var step = this.options.step > 0 ? this.options.step : 1,\n          valModStep = (val - this._valueMin()) % step,\n          alignValue = val - valModStep;if (Math.abs(valModStep) * 2 >= step) {\n        alignValue += valModStep > 0 ? step : -step;\n      }return parseFloat(alignValue.toFixed(5));\n    }, _calculateNewMax: function () {\n      var max = this.options.max,\n          min = this._valueMin(),\n          step = this.options.step,\n          aboveMin = Math.floor(+(max - min).toFixed(this._precision()) / step) * step;max = aboveMin + min;this.max = parseFloat(max.toFixed(this._precision()));\n    }, _precision: function () {\n      var precision = this._precisionOf(this.options.step);if (this.options.min !== null) {\n        precision = Math.max(precision, this._precisionOf(this.options.min));\n      }return precision;\n    }, _precisionOf: function (num) {\n      var str = num.toString(),\n          decimal = str.indexOf(".");return decimal === -1 ? 0 : str.length - decimal - 1;\n    }, _valueMin: function () {\n      return this.options.min;\n    }, _valueMax: function () {\n      return this.max;\n    }, _refreshValue: function () {\n      var lastValPercent,\n          valPercent,\n          value,\n          valueMin,\n          valueMax,\n          oRange = this.options.range,\n          o = this.options,\n          that = this,\n          animate = !this._animateOff ? o.animate : false,\n          _set = {};if (this.options.values && this.options.values.length) {\n        this.handles.each(function (i) {\n          valPercent = (that.values(i) - that._valueMin()) / (that._valueMax() - that._valueMin()) * 100;_set[that.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";$(this).stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);if (that.options.range === true) {\n            if (that.orientation === "horizontal") {\n              if (i === 0) {\n                that.range.stop(1, 1)[animate ? "animate" : "css"]({ left: valPercent + "%" }, o.animate);\n              }if (i === 1) {\n                that.range[animate ? "animate" : "css"]({ width: valPercent - lastValPercent + "%" }, { queue: false, duration: o.animate });\n              }\n            } else {\n              if (i === 0) {\n                that.range.stop(1, 1)[animate ? "animate" : "css"]({ bottom: valPercent + "%" }, o.animate);\n              }if (i === 1) {\n                that.range[animate ? "animate" : "css"]({ height: valPercent - lastValPercent + "%" }, { queue: false, duration: o.animate });\n              }\n            }\n          }lastValPercent = valPercent;\n        });\n      } else {\n        value = this.value();valueMin = this._valueMin();valueMax = this._valueMax();valPercent = valueMax !== valueMin ? (value - valueMin) / (valueMax - valueMin) * 100 : 0;_set[this.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";this.handle.stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);if (oRange === "min" && this.orientation === "horizontal") {\n          this.range.stop(1, 1)[animate ? "animate" : "css"]({ width: valPercent + "%" }, o.animate);\n        }if (oRange === "max" && this.orientation === "horizontal") {\n          this.range[animate ? "animate" : "css"]({ width: 100 - valPercent + "%" }, { queue: false, duration: o.animate });\n        }if (oRange === "min" && this.orientation === "vertical") {\n          this.range.stop(1, 1)[animate ? "animate" : "css"]({ height: valPercent + "%" }, o.animate);\n        }if (oRange === "max" && this.orientation === "vertical") {\n          this.range[animate ? "animate" : "css"]({ height: 100 - valPercent + "%" }, { queue: false, duration: o.animate });\n        }\n      }\n    }, _handleEvents: { keydown: function (event) {\n        var allowed,\n            curVal,\n            newVal,\n            step,\n            index = $(event.target).data("ui-slider-handle-index");switch (event.keyCode) {case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:\n            event.preventDefault();if (!this._keySliding) {\n              this._keySliding = true;$(event.target).addClass("ui-state-active");allowed = this._start(event, index);if (allowed === false) {\n                return;\n              }\n            }break;}step = this.options.step;if (this.options.values && this.options.values.length) {\n          curVal = newVal = this.values(index);\n        } else {\n          curVal = newVal = this.value();\n        }switch (event.keyCode) {case $.ui.keyCode.HOME:\n            newVal = this._valueMin();break;case $.ui.keyCode.END:\n            newVal = this._valueMax();break;case $.ui.keyCode.PAGE_UP:\n            newVal = this._trimAlignValue(curVal + (this._valueMax() - this._valueMin()) / this.numPages);break;case $.ui.keyCode.PAGE_DOWN:\n            newVal = this._trimAlignValue(curVal - (this._valueMax() - this._valueMin()) / this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:\n            if (curVal === this._valueMax()) {\n              return;\n            }newVal = this._trimAlignValue(curVal + step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:\n            if (curVal === this._valueMin()) {\n              return;\n            }newVal = this._trimAlignValue(curVal - step);break;}this._slide(event, index, newVal);\n      }, keyup: function (event) {\n        var index = $(event.target).data("ui-slider-handle-index");if (this._keySliding) {\n          this._keySliding = false;this._stop(event, index);this._change(event, index);$(event.target).removeClass("ui-state-active");\n        }\n      } } });\n});';
},761:function(t,e,i){function s(){this.initializeWebcam=function(){this.startHtml5Webcam(!1)},this.takePhoto=function(){this.takeHtml5Photo(3)},this.startHtml5Webcam=function(t){var e,i;t?(e={video:!0},i=this.html5LoadFailure.bind(this)):(e={video:{mandatory:{minWidth:1280,minHeight:720}}},i=function(){this.startHtml5Webcam(!0)}.bind(this)),this.select("videoPermissionExplain").show(),n.getUserMedia(e,this.html5StreamLoaded.bind(this),i)},this.html5StreamLoaded=function(t){var e=this.select("videoSelector");e.show();var i=e[0];this.cleanupStream(),void 0!==i.srcObject?i.srcObject=t:navigator.mozGetUserMedia?i.mozSrcObject=t:i.src=o.getObjectUrl(t),this.localMediaStream=t,this.select("captureWebcamSelector").attr("disabled",!1),this.select("videoPermissionExplain").hide(),this.trigger("uiWebcamFound")},this.html5LoadFailure=function(t){this.select("videoPermissionExplain").hide(),this.select("videoPermissionFail").show(),this.trigger("uiWebcamUnavailable")},this.actuallyTakeHtml5Photo=function(){var t=this.select("videoSelector"),e=t[0];t.css({width:"auto"});var i=this.select("webcamCanvasSelector")[0];i.width=e.clientWidth,i.height=e.clientHeight;var s=i.getContext("2d");s.drawImage(e,0,0),t.css({width:"100%"}),this.cleanupStream(),o.canvasToBlob(i).then(o.getFileInfo.bind(o,"avatar-from-webcam")).then(function(t){this.select("cropImageSelector").attr("src",t.thumbnail.src),this.trigger("jsCamCapture",{fileId:t.fileId})}.bind(this))},this.takeHtml5Photo=function(t){if(0===t)this.select("videoOverlaySelector").hide(),this.actuallyTakeHtml5Photo();else{var e=this.select("videoOverlaySelector");this.select("videoCountdownSelector").text(t),e.show(),setTimeout(function(){this.takeHtml5Photo(t-1)}.bind(this),1e3)}},this.cleanupStream=function(){var t=this.select("videoSelector")[0];this.localMediaStream&&(this.localMediaStream.stop?this.localMediaStream.stop():this.localMediaStream.getVideoTracks()[0].stop(),t.srcObject?t.srcObject=null:navigator.mozGetUserMedia?t.mozSrcObject=null:t.src=null,this.localMediaStream=null)},this.after("initialize",function(){this.on("uiDialogClosed",function(){this.cleanupStream()})})}var n=i(269),o=i(259);t.exports=s},762:function(t,e,i){function s(){this.scribeEvent=function(t,e){this.scribe(o.merge(t.scribeContext,e))},this.after("initialize",function(){this.scribeOnEvent("uiUploadReceived",{element:"upload",action:"complete"}),this.scribeOnEvent("uiShowingWebcam",{element:"webcam",action:"impression"}),this.scribeOnEvent("uiWebcamFound",{element:"webcam",action:"show"}),this.scribeOnEvent("uiWebcamUnavailable",{element:"webcam",action:"failure"}),this.scribeOnEvent("jsCamCapture",{element:"webcam",action:"complete"}),this.scribeOnEvent("uiProfileImageDialogClose",{action:"close"}),this.on("uiImageSave",function(t,e){this.scribeEvent(e,{element:"crop_"+e.scribeData.scribeElement,action:"complete"})}),this.on("uiShowingCropper",function(t,e){this.scribeEvent(e,{element:"crop_"+e.scribeElement,action:"impression"})}),this.on("uiProfileImagePublished",function(t,e){this.scribeEvent(e,{element:"save_"+e.scribeElement,action:"complete"})}),this.on("uiProfileImageDialogFailure",function(t,e){this.scribeEvent(e,{element:"save_"+e.scribeElement,action:"failure"})})})}var n=i(10),o=i(25),a=i(40),r=n(s,a);t.exports=r},763:function(t,e,i){function s(){this.defaultAttrs({noShowError:!0}),this.verifyUsername=function(t,e){this.get({url:"/users/username_available",eventData:e,data:e,success:"dataUsernameResult",error:"dataUsernameError"})},this.verifyEmail=function(t,e){this.get({url:"/users/email_available",eventData:e,data:e,success:"dataEmailResult",error:"dataEmailError"})},this.cancelPendingEmail=function(t,e){var i=function(t){this.trigger("dataCancelEmailSuccess",t)},s=function(t){this.trigger("dataCancelEmailFailure",t)};this.post({url:e.url,data:{},success:i.bind(this),error:s.bind(this)})},this.resendPendingEmail=function(t,e){var i=function(t){this.trigger("dataResendEmailSuccess",t)},s=function(t){this.trigger("dataResendEmailFailure",t)};this.post({url:e.url,data:{},success:i.bind(this),error:s.bind(this)})},this.resendPassword=function(t,e){this.post({url:e.url,data:{},dataType:"text",success:function(){this.trigger("dataForgotPasswordSuccess",{})}.bind(this)})},this.deleteGeoData=function(t){var e=function(t){this.trigger("dataGeoDeletionError",{})};this.post({url:"/account/delete_location_data",dataType:"text",data:{},error:e.bind(this)})},this.revokeAuthority=function(t,e){this.post({url:"/oauth/revoke",eventData:e,data:e,success:"dataOAuthRevokeResultSuccess",error:"dataOAuthRevokeResultFailure"})},this.revokeActiveSession=function(t,e){this.post({url:"/account/sessions/revoke",eventData:e,data:e,success:"dataActiveSessionRevokeResultSuccess",error:"dataActiveSessionRevokeResultFailure"})},this.revokeAllActiveSessions=function(t,e){this.post({url:"/account/sessions/revoke_all",eventData:e,data:e,success:"dataAllActiveSessionsRevokeResultSuccess",error:"dataAllActiveSessionsRevokeResultFailure"})},this.notifyFailure=function(t){this.trigger("dataSaveImageFailure",{uploadType:t.uploadType})},this.updateProfileImage=function(t,e){var i={header:"/i/profiles/update_profile_banner",avatar:"/i/profiles/update_profile_image"};t.page_context=this.attr.pageName,t.section_context=this.attr.sectionName,t.mediaId=e,this.post({url:i[t.uploadType],eventData:t,data:t,success:"dataSaveImageSuccess",error:"dataSaveImageFailure"})},this.saveImage=function(t,e){var i=e.fileId,s=o.get(i);if(s){this.trigger(document,"uiMediaSruInit",{fileId:i,uploadId:s.uploadId,mediaCategory:s.mediaCategory});var n={uploadType:e.uploadType},r=e.cropData||{},l=a.merge(n,e.scribeData,r);this.mediaSruFinalize(s).then(this.updateProfileImage.bind(this,l)).fail(this.notifyFailure.bind(this))}},this.deleteImage=function(t,e){var i={header:"/i/profiles/remove_profile_banner",avatar:"/i/profiles/remove_profile_image"};e.page_context=this.attr.pageName,e.section_context=this.attr.sectionName,this.destroy({url:i[e.uploadType],eventData:e,data:e,success:"dataDeleteImageSuccess",error:"dataDeleteImageFailure"})},this.resendConfirmationEmail=function(t,e){this.post({url:"/account/resend_confirmation_email",eventData:e,data:e,success:"dataResendConfirmationEmailSuccess",error:"dataResendConfirmationEmailError"})},this.tweetExport=function(t,e){this.post({url:"/account/request_tweet_export",eventData:e,data:e,success:"dataTweetExportSuccess",error:"dataTweetExportError"})},this.tweetExportResend=function(t,e){this.post({url:"/account/request_tweet_export_resend",eventData:e,data:e,success:"dataTweetExportResendSuccess",error:"dataTweetExportResendError"})},this.tweetExportIncrRateLimiter=function(t,e){this.post({url:"/account/request_tweet_export_download",eventData:e,data:e,success:"dataTweetExportDownloadSuccess",error:"dataTweetExportDownloadError"})},this.after("initialize",function(){this.on("uiUsernameChange",this.verifyUsername),this.on("uiEmailChange",this.verifyEmail),this.on("uiCancelPendingEmail",this.cancelPendingEmail),this.on("uiResendPendingEmail",this.resendPendingEmail),this.on("uiForgotPassword",this.resendPassword),this.on("uiDeleteGeoData",this.deleteGeoData),this.on("uiRevokeClick",this.revokeAuthority),this.on("uiRevokeActiveSessionClick",this.revokeActiveSession),this.on("uiRevokeAllActiveSessionsClick",this.revokeAllActiveSessions),this.on("uiImageSave",this.saveImage),this.on("uiDeleteImage",this.deleteImage),this.on("uiTweetExportButtonClicked",this.tweetExport),this.on("uiTweetExportResendButtonClicked",this.tweetExportResend),this.on("uiTweetExportConfirmEmail",this.resendConfirmationEmail),this.on("uiTweetExportIncrRateLimiter",this.tweetExportIncrRateLimiter)})}var n=i(10),o=i(210),a=i(25),r=i(226),l=i(370),h=n(s,r,l);t.exports=h},764:function(t,e,i){var s=i(765),n=i(766),o=i(767),a=i(768),r=i(769),l=i(770);t.exports=function(t){a.attachTo(document),s.attachTo(document,{src:t.src,trendsCacheKey:t.trendsCacheKey,trendsModuleEndpoint:t.trendsEndpoint,show_context:t.show_context,profileUserId:t.profile_id,query:t.query}),r.attachTo(".module.trends",{loggedIn:t.loggedIn,displaySource:t.src,eventData:{scribeContext:{component:"trends"}}}),n.attachTo(document),o.attachTo(document),l.attachTo("#trends_dialog",{typeaheadData:t.typeaheadData,eventData:{scribeContext:{component:"trends_location_dialog"}}})}},765:function(t,e,i){(function(e){function s(){this.defaultAttrs({src:"module",$backoffNode:e(window),trendsModuleEndpoint:"/i/trends",trendsCacheKey:null,show_context:!0,trendsPollingOptions:{focusedInterval:3e5,blurredInterval:12e5,eventData:{source:"clock"}}}),this.makeTrendsRequest=function(t){var e=t.woeid,i=t.source,s=function(t){t.source=i,this.trigger("dataTrendsRefreshed",t)};this.get({url:this.attr.trendsModuleEndpoint,eventData:t,data:{k:this.currentCacheKey,woeid:e,pc:!0,personalized:t.personalized,src:this.attr.src,show_context:this.attr.show_context,profileUserId:this.attr.profileUserId,query:this.attr.query},success:s.bind(this),error:"dataTrendsRefreshedError"})},this.makeTrendsDialogRequest=function(t,e){var i={woeid:t.woeid,personalized:t.personalized,pc:!0},s=function(t){this.trigger("dataGotTrendsDialog",t),this.currentWoeid&&this.currentWoeid!==t.woeid&&this.trigger("dataTrendsLocationChanged"),this.currentWoeid=t.woeid,t.trends_cache_key&&(this.currentCacheKey=t.trends_cache_key,this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)},n=e?this.post:this.get;n.call(this,{url:"/trends/dialog",eventData:t,data:i,success:s.bind(this),error:"dataGotTrendsDialogError"})},this.changeTrendsLocation=function(t,e){this.makeTrendsDialogRequest(e,!0)},this.refreshTrends=function(t,e){e=e||{},this.makeTrendsRequest(e)},this.getTrendsDialog=function(t,e){e=e||{},this.makeTrendsDialogRequest(e)},this.updateTrendsCacheKey=function(t,e){this.currentCacheKey=e.trendsCacheKey},this.after("initialize",function(){this.currentCacheKey=this.attr.trendsCacheKey,this.timer=o("uiRefreshTrends",this.attr.$backoffNode,this.attr.trendsPollingOptions),this.on("uiWantsTrendsDialog",this.getTrendsDialog),this.on("uiChangeTrendsLocation",this.changeTrendsLocation),this.on("uiRefreshTrends",this.refreshTrends),this.on("dataTempTrendsCacheKeyChanged",this.updateTrendsCacheKey)})}var n=i(10),o=i(459),a=i(226);t.exports=n(s,a)}).call(e,i(1))},766:function(t,e,i){function s(){this.getTrendsLocationDialog=function(t,e){var i=function(t){this.trigger("dataGotTrendsLocationDialog",t),t.trendLocations&&this.trigger("dataLoadedTrendLocations",{trendLocations:t.trendLocations})};this.get({url:"/trends/location_dialog",eventData:e,success:i.bind(this),error:"dataGotTrendsLocationDialogError"})},this.updateTrendsLocation=function(t,e){var i=e.location||{},s={woeid:i.woeid,personalized:e.personalized,pc:!0},n=function(t){this.trigger("dataChangedTrendLocation",{personalized:t.personalized,location:i}),t.trends_cache_key&&(this.trigger("dataTempTrendsCacheKeyChanged",{trendsCacheKey:t.trends_cache_key}),this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)};this.post({url:"/trends/dialog",eventData:e,data:s,success:n.bind(this),error:"dataGotTrendsLocationDialogError"})},this.after("initialize",function(){this.on("uiWantsTrendsLocationDialog",this.getTrendsLocationDialog),this.on("uiChangeLocation",this.updateTrendsLocation)})}var n=i(10),o=i(226);t.exports=n(s,o)},767:function(t,e,i){function s(){this.defaultAttrs({storageName:"recent_trend_locations",storageKey:"locations",maxRecentLocations:5}),this.initializeStorage=function(){var t=o({withArray:!0,withMaxElements:!0});this.storage=new t(this.attr.storageName),this.storage.setMaxElements(this.attr.storageKey,this.attr.maxRecentLocations)},this.getRecentTrendLocations=function(){this.trigger("dataGotRecentTrendLocations",{trendLocations:this.storage.getArray(this.attr.storageKey)})},this.saveRecentLocation=function(t,e){var i=e.location||{};i.woeid&&!this.hasRecentLocation(i.woeid)&&(this.storage.push(this.attr.storageKey,i),this.getRecentTrendLocations())},this.hasRecentLocation=function(t){var e=this.storage.getArray(this.attr.storageKey);return e.some(function(e){return e.woeid===t})},this.after("initialize",function(){this.initializeStorage(),this.on("uiWantsRecentTrendLocations",this.getRecentTrendLocations),this.on("dataChangedTrendLocation",this.saveRecentLocation)})}var n=i(10),o=i(227),a=i(226);t.exports=n(s,a)},768:function(t,e,i){function s(){this.scribeTrendClick=function(t,e){this.scribe("search",e)},this.prepareScribeData=function(t){var e=t.initial?"initial":"newer",i={referring_event:e},s=!1;return i.items=t.items.map(function(t,e){var i={name:t.name,item_type:a.trend,item_query:t.name,position:e,token:t.token,id:t.id};return t.promotedTrendId&&(i.promoted_id=t.promotedTrendId,s=!0),i}),s&&(i.promoted=s),"clock"===t.source&&(i.event_initiator=r.clientSideApp),i},this.scribeTrendsResults=function(t,e){var i=this.prepareScribeData(e),s={element:i.referring_event,action:e.items&&e.items.length?"results":"no_results"};this.scribe(s,e,i),e.initial&&this.scribeTrendsImpression(e)},this.scribeTrendsImpression=function(t){this.scribe("impression",t)},this.after("initialize",function(){this.scribeOnEvent("uiTrendsDialogOpened","open"),this.on("uiTrendSelected",this.scribeTrendClick),this.on("uiTrendsDisplayed",this.scribeTrendsResults)})}var n=i(10),o=i(40),a=i(42),r=i(595);t.exports=n(s,o)},769:function(t,e,i){(function(e){function s(){this.defaultAttrs({changeLinkSelector:".change-trends",trendsInnerSelector:".trends-inner",trendItemSelector:".js-trend-item",trendLinkItemSelector:".js-trend-item a",itemType:"trend",displaySource:"module"}),this.openChangeTrendsDialog=function(t){this.trigger("uiShowTrendsLocationDialog"),t.preventDefault()},this.updateModuleContent=function(t,e){if(e.module_html){var i=this.$node.hasClass("hidden"),s=e.source;this.select("trendsInnerSelector").html(e.module_html),this.currentWoeid=e.woeid,this.$node.removeClass("hidden");var n=this.getTrendData(this.select("trendItemSelector"));this.trigger("uiTrendsDisplayed",{items:n,initial:i,source:s,scribeData:{woeid:this.currentWoeid}})}},this.trendSelected=function(t,i){var s=e(i.el).closest(this.attr.trendItemSelector),n=this.getTrendData(s)[0],a=s.index(),r={name:n.name,item_type:o.trend,item_query:n.name,position:a,token:n.token,id:n.id},l={position:a,query:n.name,url:s.find("a").attr("href"),woeid:this.currentWoeid};n.promotedTrendId&&(r.promoted_id=n.promotedTrendId,l.promoted=!0),l.items=[r],this.trigger("uiTrendSelected",{isPromoted:!!n.promotedTrendId,promotedTrendId:n.promotedTrendId,scribeContext:{element:"trend"},scribeData:l})},this.getTrendData=function(t){return t.map(function(){var t=e(this);return{name:t.attr("data-trend-name"),promotedTrendId:t.data("promoted-trend-id"),trendingEvent:t.hasClass("event-trend"),token:t.attr("data-trend-token"),id:t.attr("data-trends-id")}}).toArray()},this.after("initialize",function(){this.on(document,"dataTrendsRefreshed",this.updateModuleContent),this.on("click",{changeLinkSelector:this.openChangeTrendsDialog,trendLinkItemSelector:this.trendSelected}),this.trigger("uiRefreshTrends")})}var n=i(10),o=i(42),a=i(392);t.exports=n(s,a)}).call(e,i(1))},770:function(t,e,i){(function(e){function s(){this.defaultAttrs({contentSelector:"#trends_dialog_content",quickSelectSelector:"#trend-locations-quick-select",dropdownSelector:"#trend-locations-dropdown-select",personalizedSelector:".trends-personalized",nonPersonalizedSelector:".trends-by-location",changeTrendsSelector:".customize-by-location",showDropdownSelector:".js-show-dropdown-select",showQuickSelectSelector:".js-show-quick-select",searchSelector:".trends-search-locations",nearbySelector:".trends-nearby-locations",recentSelector:".trends-recent-locations",currentLocationSelector:".trends-current-location",loadingSelector:"#trend-locations-loading",defaultSelector:".select-default",doneSelector:".done",errorSelector:".trends-dialog-error p",errorClass:"has-error"}),this.openDialog=function(t,e){this.trigger("uiTrendsDialogOpened"),this.initialized?this.setCurrentView():(this.trigger("uiWantsTrendsLocationDialog"),this.initialized=!0),this.$node.removeClass("has-error"),this.open()},this.setCurrentView=function(){this.attr.personalized?this.showPersonalizedView():this.showNonpersonalizedView(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showPersonalizedView=function(){this.select("nonPersonalizedSelector").hide(),this.select("personalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showNonpersonalizedView=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showQuickSelectContainer=function(t,e){this.showNonpersonalizedView(),this.select("dropdownSelector").hide(),this.select("quickSelectSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showDropdownContainer=function(t,e){this.showNonpersonalizedView(),this.select("quickSelectSelector").hide(),this.select("dropdownSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideViews=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").hide()},this.showError=function(t,e){this.hideViews(),this.hideLoading(),this.initialized=!1,this.$node.addClass(this.attr.errorClass),this.select("errorSelector").html(e.message),this.trigger(this.$dialog,"uiDialogContentChanged")},this.selectDefault=function(t,i){var s=e(t.target),n=!!s.data("personalized");n?this.setPersonalizedTrends():this.changeLocationInfo({name:s.data("name"),woeid:s.data("woeid")}),this.close()},this.reset=function(t,e){this.showQuickSelectContainer(),this.trigger("uiTrendsDialogReset")},this.initializeDialog=function(t,e){this.select("contentSelector").html(e.dialog_html),this.setLocationInfo(t,e),this.initializeComponents(),this.setCurrentView()},this.showLoading=function(){this.select("loadingSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideLoading=function(){this.select("loadingSelector").hide()},this.initializeComponents=function(t,e){l.attachTo(this.attr.currentLocationSelector,{location:this.attr.location,personalized:this.attr.personalized}),r.attachTo(this.attr.searchSelector,{typeaheadData:this.attr.typeaheadData}),a.attachTo(this.attr.dropdownSelector),h.attachTo(this.attr.nearbySelector,{location:this.attr.location,personalized:this.attr.personalized}),c.attachTo(this.attr.recentSelector,{location:this.attr.location,personalized:this.attr.personalized})},this.after("initialize",function(){this.hideViews(),this.on("uiChangeLocation",this.showLoading),this.on("uiTrendsLocationSearchNoResults",this.showDropdownContainer),this.on(document,"uiShowTrendsLocationDialog",this.openDialog),this.on("uiDialogClosed",this.reset),this.on(document,"dataGotTrendsLocationDialog",this.initializeDialog),this.on(document,"dataGotTrendsLocationDialogError",this.showError),this.on("uiLocationInfoUpdated",this.hideLoading),this.on("click",{doneSelector:this.close,defaultSelector:this.selectDefault,changeTrendsSelector:this.showNonpersonalizedView,showDropdownSelector:this.showDropdownContainer,showQuickSelectSelector:this.showQuickSelectContainer})})}var n=i(10),o=i(59),a=i(771),r=i(773),l=i(774),h=i(775),c=i(777),d=i(772);t.exports=n(s,o,d)}).call(e,i(1))},771:function(t,e,i){(function(e){function s(){this.defaultAttrs({regionsSelector:'select[name="regions"]',citiesSelector:'select[name="cities"]'}),this.initializeCities=function(){this.citiesByRegionWoeid={};var t=this.$cities.find("option");t.each(function(t,i){var s=e(i),n=s.data("woeid");this.citiesByRegionWoeid[n]||(this.citiesByRegionWoeid[n]=[]),this.citiesByRegionWoeid[n].push(s)}.bind(this))},this.updateDropdown=function(){var t=this.$regions.val(),e=this.citiesByRegionWoeid[t]||"";this.$cities.empty(),this.$cities.html(e)},this.updateRegion=function(){this.updateDropdown();var t=this.$cities.children().first();t.length&&(t.prop("selected",!0),t.change())},this.updateCity=function(){var t=this.$cities.find("option:selected"),e=parseInt(t.val(),10),i=t.data("name");this.currentSelection=e,this.changeLocationInfo({woeid:e,name:i})},this.possiblyClearSelection=function(){this.currentSelection!==this.attr.location.woeid&&this.reset()},this.reset=function(){this.currentSelection=null;var t=this.$regions.find('option[value=""]');t.prop("selected",!0),this.updateDropdown()},this.after("initialize",function(){this.$regions=this.select("regionsSelector"),this.$cities=this.select("citiesSelector"),this.initializeCities(),this.on(this.$regions,"change",this.updateRegion),this.on(this.$cities,"change",this.updateCity),this.on(document,"uiTrendsDialogReset",this.reset),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.updateDropdown()})}var n=i(10),o=i(772);t.exports=n(s,o)}).call(e,i(1))},772:function(t,e){function i(){this.defaultAttrs({location:{},personalized:!1}),this.setLocationInfo=function(t,e){this.attr.personalized=!!e.personalized,this.attr.location=e.location||{},this.trigger("uiLocationInfoUpdated")},this.changeLocationInfo=function(t){this.trigger("uiChangeLocation",{location:t})},this.setPersonalizedTrends=function(){this.trigger("uiChangeLocation",{personalized:!0})},this.after("initialize",function(){this.on(document,"dataChangedTrendLocation",this.setLocationInfo)})}t.exports=i},773:function(t,e,i){function s(){this.defaultAttrs({inputSelector:"input.trends-location-search-input"}),this.executeTypeaheadSelection=function(t,e){return e.item.woeid===-1?void this.trigger("uiTrendsLocationSearchNoResults"):(this.currentSelection=e.item,void this.changeLocationInfo({woeid:e.item.woeid,name:e.item.name}))},this.possiblyClearSelection=function(){this.currentSelection&&this.currentSelection.woeid!==this.attr.location.woeid&&this.reset()},this.reset=function(t,e){this.currentSelection=null,this.$input.val("")},this.after("initialize",function(){this.$input=this.select("inputSelector"),this.on("uiTypeaheadItemSelected uiTypeaheadItemComplete",this.executeTypeaheadSelection),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.on(document,"uiTrendsDialogReset",this.reset),r.attachTo(this.$node,{inputSelector:this.attr.inputSelector}),a.attachTo(this.$node,{inputSelector:this.attr.inputSelector,hideOnEmptyQuery:!0,blockLinkActions:!0,datasourceRenders:[["trendLocations",["trendLocations"]]],deciders:this.attr.typeaheadData,eventData:{scribeContext:{component:"trends_location_search"}}})})}var n=i(10),o=i(772),a=i(280),r=i(295);t.exports=n(s,o)},774:function(t,e,i){function s(){this.defaultAttrs({personalizedSelector:".js-location-personalized",nonpersonalizedSelector:".js-location-nonpersonalized",currentLocationSelector:".current-location"}),this.updateView=function(){this.attr.personalized||this.select("currentLocationSelector").text(this.attr.location.name),this.select("nonpersonalizedSelector").toggle(!this.attr.personalized),this.select("personalizedSelector").toggle(!!this.attr.personalized)},this.after("initialize",function(){this.updateView(),this.on("uiLocationInfoUpdated",this.updateView)})}var n=i(10),o=i(772);t.exports=n(s,o)},775:function(t,e,i){function s(){}var n=i(10),o=i(776);t.exports=n(s,o)},776:function(t,e,i){(function(e){function s(){n.mixin(this,[o]),this.defaultAttrs({locationSelector:".trend-location-picker-item",selectedAttr:"selected"}),this.selectLocation=function(t,i){t.preventDefault();var s=e(i.el),n={woeid:s.data("woeid"),name:s.data("name")};this.changeLocationInfo(n),this.showSelected(n.woeid,!1)},this.showSelected=function(t,e){var i=this.select("locationSelector");i.removeClass(this.attr.selectedAttr),!e&&t&&i.filter('[data-woeid="'+t+'"]').addClass(this.attr.selectedAttr)},this.locationInfoUpdated=function(){this.showSelected(this.attr.location.woeid,this.attr.personalized)},this.after("initialize",function(){this.on("uiLocationInfoUpdated",this.locationInfoUpdated),this.on("click",{locationSelector:this.selectLocation}),this.showSelected(this.attr.location.woeid,this.attr.personalized)})}var n=i(20),o=i(772);t.exports=s}).call(e,i(1))},777:function(t,e,i){function s(){this.defaultAttrs({listContainerSelector:".trend-location-picker"}),this.loadTrendLocations=function(t,e){var i=e.trendLocations;this.$list.empty(),i.forEach(function(t){var e=this.$template.clone(!1),i=e.find("button");i.text(t.name),i.attr("data-woeid",t.woeid),i.attr("data-name",t.name),this.$list.append(e)},this),this.$node.toggle(i.length>0)},this.after("initialize",function(){this.$list=this.select("listContainerSelector"),this.$template=this.$list.find("li:first").clone(!1),this.on(document,"dataGotRecentTrendLocations",this.loadTrendLocations),this.trigger("uiWantsRecentTrendLocations")})}var n=i(10),o=i(776);t.exports=n(s,o)},778:function(t,e,i){var s=i(779),n=i(782),o=i(783),a=i(784),r=i(25);t.exports=function(t,e,i){var l=r.merge(e,i,{eventData:{scribeContext:{component:"user_recommendations"}}});a.attachTo(t,l),s.attachTo(t,l),n.attachTo(document,l),o.attachTo(t,l)}},779:function(t,e,i){(function(e){function s(){this.defaultAttrs({dashboardSelector:".dashboard-user-recommendations",recUserSelector:".js-actionable-user",dismissRecSelector:".js-action-dismiss",viewAllSelector:".js-view-all-link",findFriendsSelector:".js-find-friends-link"}),this.dismissRecommendation=function(t,i){if(!this.currentlyRefreshing){this.currentlyDismissing=!0;var s=e(t.target).closest(this.attr.recSelector),n=s.attr("data-user-id");this.trigger("uiDismissUserRecommendation",{recommended_user_id:n,impressionId:s.attr("data-impression-id"),excluded:[n],visible:this.getVisibleIds(s),token:s.attr("data-feedback-token"),dismissable:this.attr.wtfOptions.dismissable,refreshUserId:n}),this.animateContentOut(s,"animationCallback")}},this.handleDismissResponse=function(t,i){if(i=i||{},this.currentlyDismissing=!1,i.user_recommendations_html){var s=this.currentlyRefreshingUser(i),n=e(i.user_recommendations_html),o=n.attr("data-user-id");if(this.select("recSelector").is("[data-user-id="+o+"]"))return void s.find(this.attr.dismissRecSelector).click();var a=this.getItemPosition(s);this.animateContentIn(s,"animationCallback",i.user_recommendations_html,{modOp:"replaceWith",scribeCallback:function(){var t={oldUser:this.interactionData(s,{position:a})};n.length&&(t.newUser=this.interactionData(n,{position:a})),this.trigger("uiDidDismissUserRecommendation",t)}.bind(this)})}else this.handleEmptyDismissResponse(i)},this.handleDismissError=function(t,e){this.handleEmptyDismissResponse(e)},this.handleEmptyDismissResponse=function(t){var e=this.currentlyRefreshingUser(t);e&&e.remove(),this.select("recSelector").length||(this.trigger("uiShowMessage",{message:"You have no more recommendations today!"}),this.$node.remove())},this.enable=function(){this.disabled=!1,this.refreshRecommendations({type:"empty-timeline"}),this.$node.show()},this.initRecommendations=function(t,e){this.disabled?this.$node.hide():this.verifyInitialRecommendations(t,e)},this.reset=function(){this.currentlyRefreshing||this.currentlyDismissing?this.select("dashboardSelector").html(""):(this.select("dashboardSelector").css("opacity",1),this.select("recUserSelector").css("opacity",1))},this.expandWhoToFollow=function(t,e){this.currentlyExpanding=!0;var i=n.merge(this.attr.wtfOptions,{limit:3,visible:this.getVisibleIds(t),refreshUserId:e.userId,get_replacement:!0});this.trigger("uiGetUserRecommendations",i)},this.triggerLinkClickScribes=function(t){var i=this,s={import_link:this.attr.findFriendsSelector,view_all_link:this.attr.viewAllSelector,refresh_link:this.attr.refreshRecsSelector},n=e(t.target);e.each(s,function(t,e){n.is(e)&&i.trigger(document,"uiClickedWtfLink",{element:t})})},this.getNewRecommendations=function(t,e,i){var s=this.attr.wtfOptions.display_location;"wtf-component"===s&&!this.currentlyExpanding&&this.getVisibleIds(null,!0).length<=3?this.expandWhoToFollow(e,i):t(e,i)},this.after("initialize",function(){this.disabled=!!this.attr.wtfOptions&&this.attr.wtfOptions.disabled,this.on(document,"dataDidDismissRecommendation",this.handleDismissResponse),this.on(document,"dataFailedToDismissUserRecommendation",this.handleDismissError),this.on(document,"uiDidHideEmptyTimelineModule",this.enable),this.on(document,"uiSwiftLoaded uiPageChanged",this.initRecommendations),this.on(document,"uiBeforePageChanged",this.reset),this.on("click",{dismissRecSelector:this.dismissRecommendation,viewAllSelector:this.triggerLinkClickScribes,findFriendsSelector:this.triggerLinkClickScribes,refreshRecsSelector:this.triggerLinkClickScribes}),this.around("cycleRecommendation",function(t,e,i){this.getNewRecommendations(t,e,i)})})}var n=(i(22),i(25)),o=i(10),a=i(395),r=i(392),l=i(780),h=i(781);t.exports=o(s,a,r,l,h)}).call(e,i(1))},780:function(t,e){function i(){this.defaultAttrs({connectOtherSelector:".js-connect-other",otherServicesSelector:".other-services"}),this.toggleOtherServices=function(){var t,e=this.select("otherServicesSelector");e.hasClass("hidden")?(e.removeClass("hidden"),t="open"):(e.addClass("hidden"),t="close"),this.trigger("uiWTFImportPromptToggle",{action:t})},this.after("initialize",function(){this.trigger("uiWTFImportPromptImpression"),this.on("click",{connectOtherSelector:this.toggleOtherServices})})}t.exports=i},781:function(t,e,i){(function(e){function s(){this.defaultAttrs({refreshAnimationDuration:200,cycleTimeout:1e3,experimentCycleTimeout:300,wtfOptions:{},selfPromotedAccountHtml:"",$accountPriorToPreview:null,successClass:"has-content",recListSelector:".js-recommended-followers",recSelector:".js-actionable-user",refreshRecsSelector:".js-refresh-suggestions",similarToContainerSelector:".js-expanded-similar-to",expandedContainerSelector:".js-expanded-container",itemType:"user"}),this.refreshRecommendations=function(t,e){if(!this.currentlyRefreshing){this.currentlyRefreshing=!0;var i=this.getVisibleIds(null,!0).length||this.attr.wtfOptions.limit;this.trigger("uiRefreshUserRecommendations",n.merge(this.attr.wtfOptions,{excluded:this.getVisibleIds(),limit:i,refreshType:t.type})),this.hideRecommendations()}},this.sendGetRecommendationEvent=function(t,e){this.trigger("uiGetUserRecommendations",n.merge(this.attr.wtfOptions,t||{}))},this.getUserRecommendations=function(t,e){this.sendGetRecommendationEvent(t,e),this.hideRecommendations()},this.hideRecommendations=function(){this.animateContentOut(this.select("recListSelector"),"animationCallback")},this.isNewUserDuplicate=function(t){return this.getVisibleIds().indexOf(t)!==-1},this.handleRecommendationsResponse=function(t,i){var s=this.getVisibleIds();if(!this.disabled){i=i||{},this.hasRecommendations()||(i=n.merge(i,{initialResults:!0}));var o=e.trim(i.user_recommendations_html);if(o){var a=this.currentlyRefreshingUser(i);if(this.$node.addClass(this.attr.successClass),this.shouldExpandWtf(i)){var r=e(o),l=r.filter(this.attr.recSelector).first(),h=r.filter(this.attr.expandedContainerSelector),c=h.find(".js-actionable-user").filter(function(){return s.indexOf(e(this).data("user-id")+"")===-1});h.empty(),c.each(function(){h.append(this)}),a&&!this.isNewUserDuplicate(l.data("user-id")+"")&&this.animateContentIn(a,"animationCallback",e("<div>").append(l).html(),{modOp:"replaceWith",scribeCallback:function(){this.currentlyExpanding?this.pendingScribe=!0:this.reportUsersDisplayed(i)}.bind(this)}),h.size()&&this.animateExpansion(h,i)}else{if(this.isNewUserDuplicate(e(o).data("user-id")+""))return;var d,u=this.select("recListSelector");a&&(u=a,d="replaceWith"),this.animateContentIn(u,"animationCallback",o,{modOp:d,scribeCallback:function(){this.reportUsersDisplayed(i)}.bind(this)})}}else this.handleEmptyRefreshResponse(t,i),this.trigger("uiGotEmptyRecommendationsResponse",i)}},this.handleRefreshError=function(t,e){this.handleEmptyRefreshResponse(t,e)},this.handleEmptyRefreshResponse=function(t,e){
if(this.select("recSelector").length){if(this.currentlyExpanding){var i=this.currentlyRefreshingUser(e);if(e&&e.sourceEventData&&e.sourceEventData.clusterfollow&&i)return this.currentlyExpanding=!1,void this.replenishWhoToFollowDashboard(i)}var s=this.select("recListSelector"),n=this.currentlyRefreshingUser(e);n&&(s=n),this.animateContentIn(s,"animationCallback",s.html())}},this.getVisibleIds=function(t,i){var s=this.select("recSelector").not(t);return i||(s=s.not(".promoted-account")),s.map(function(){return e(this).attr("data-user-id")}).toArray()},this.originalItemCount=function(){return e(this.attr.recListSelector).children(this.attr.recSelector).length},this.doAfterFollowAction=function(t,e){if(!this.disabled&&"following"===e.newState){var i=this.expandBucket?this.attr.experimentCycleTimeout:this.attr.cycleTimeout;setTimeout(function(){if(!this.currentlyRefreshing){var t=this.select("recSelector").filter("[data-user-id='"+e.userId+"']");t.length&&this.cycleRecommendation(t,e)}}.bind(this),i)}},this.isInSimilarToSection=function(t){return!!t.closest(this.attr.similarToContainerSelector).length},this.cycleRecommendation=function(t,e){this.animateContentOut(t,"animationCallback");var i=n.merge(this.attr.wtfOptions,{limit:1,visible:this.getVisibleIds(t),refreshUserId:e.userId});this.isInSimilarToSection(t)&&(i.similar_to_user_id=this.select("similarToContainerSelector").data("similar-to-user-id")),this.trigger("uiGetUserRecommendations",i)},this.animateExpansion=function(t,e){var i=this.select("recListSelector"),s=this.select("expandedContainerSelector"),n=function(){this.pendingScribe&&(this.reportUsersDisplayed(e),this.pendingScribe=!1),this.currentlyExpanding=!1};s.length?s.html(t.html()):i.append(t),t.is(":visible")?n.bind(this)():t.slideDown("slow",n.bind(this))},this.animateContentIn=function(t,e,i,s){if(t.length){s=s||{};var n=function(){t.is(this.attr.recListSelector)&&(this.currentlyRefreshing=!1),t[s.modOp||"html"](i).animate({opacity:1},this.attr.refreshAnimationDuration),s.scribeCallback&&s.scribeCallback()}.bind(this);t.is(":animated")?this[e]=n:n()}},this.animateContentOut=function(t,e){t.animate({opacity:0},{duration:this.attr.refreshAnimationDuration,complete:function(){this[e]&&this[e](),this[e]=null}.bind(this)})},this.getItemPosition=function(t){var e=this.originalItemCount();return this.isInSimilarToSection(t)?e+t.closest(this.attr.recSelector).index()-1:t.closest(this.attr.expandedContainerSelector).length?e+t.closest(this.attr.recSelector).index():t.closest(this.attr.recSelector).index()},this.currentlyRefreshingUser=function(t){return t&&t.sourceEventData&&t.sourceEventData.refreshUserId?this.select("recSelector").filter("[data-user-id="+t.sourceEventData.refreshUserId+"]"):null},this.shouldExpandWtf=function(t){return!!(t&&t.sourceEventData&&t.sourceEventData.get_replacement)},this.getUsersDisplayed=function(){var t=this.select("recSelector"),i=[];return t.each(function(t,s){var n=e(s);i.push({id:n.attr("data-user-id"),impressionId:n.attr("data-impression-id")})}),i},this.reportUsersDisplayed=function(t){var e=this.getUsersDisplayed();this.trigger("uiUsersDisplayed",{users:e}),this.trigger("uiDidGetRecommendations",t)},this.verifyInitialRecommendations=function(t,e){this.hasRecommendations()?this.reportUsersDisplayed({initialResults:!0}):this.sendGetRecommendationEvent({initialResults:!0})},this.hasRecommendations=function(){return this.select("recSelector").length>0},this.storeSelfPromotedAccount=function(t,e){e.html&&(this.selfPromotedAccountHtml=e.html)},this.replaceUser=function(t,e){t.tooltip("hide"),t.parent().hasClass("preview-wrapper")&&t.unwrap(),t.replaceWith(e)},this.replaceUserAnimation=function(t,i){t.tooltip("hide"),this.before("teardown",function(){this.replaceUser(t,i)});var s=e("<div/>",{"class":t.attr("class"),style:t.attr("style")}).addClass("preview-wrapper");t.wrap(s);var n=t.css("minHeight");t.css({minHeight:0}).slideUp(70,function(){i.attr("style",t.attr("style")),t.replaceWith(i),i.delay(350).slideDown(70,function(){i.css({minHeight:n}),i.unwrap(),setTimeout(function(){i.tooltip("show"),setTimeout(function(){i.tooltip("hide")},8e3)},500)})})},this.handlePreviewPromotedAccount=function(){if(!this.disabled&&this.selfPromotedAccountHtml){var t=e(this.selfPromotedAccountHtml),i=this.select("recSelector").first();this.attr.$accountPriorToPreview=i.clone(),this.replaceUserAnimation(i,t),t.find("a").on("click",function(t){t.preventDefault(),t.stopPropagation()})}},this.maybeRestoreAccountPriorToPreview=function(){var t=this.attr.$accountPriorToPreview;t&&(this.replaceUser(this.select("recSelector").first(),t),this.attr.$accountPriorToPreview=null)},this.after("initialize",function(){this.on(document,"dataDidGetUserRecommendations",this.handleRecommendationsResponse),this.on(document,"dataFailedToGetUserRecommendations",this.handleRefreshError),this.on(document,"dataFollowStateChange",this.doAfterFollowAction),this.on("click",{refreshRecsSelector:this.refreshRecommendations}),this.on(document,"dataDidGetSelfPromotedAccount",this.storeSelfPromotedAccount),this.on(document,"uiPromptbirdPreviewPromotedAccount",this.handlePreviewPromotedAccount),this.on(document,"uiPromptbirdDismissPrompt",this.maybeRestoreAccountPriorToPreview)})}var n=i(25);i(314),t.exports=s}).call(e,i(1))},782:function(t,e,i){function s(){this.attributes({maxExcludedRecsInLocalStorage:100,endpoints:{users:{url:"/i/users/recommendations",method:"GET",successEvent:"dataDidGetUserRecommendations",errorEvent:"dataFailedToGetUserRecommendations"},dismiss:{url:"/i/users/recommendations/hide",method:"POST",successEvent:"dataDidDismissRecommendation",errorEvent:"dataFailedToDismissUserRecommendation"},promoted_self:{url:"/i/users/promoted_self",method:"GET",successEvent:"dataDidGetSelfPromotedAccount",errorEvent:"dataFailedToGetSelfPromotedAccount"}},endpointUrlOverrides:{}}),this.refreshEndpoint=function(t){return this.hitEndpoint(t,{"Cache-Control":"max-age=0",Pragma:"no-cache"})},this.hitEndpoint=function(t,e){e=e||{};var i=this.attr.endpoints[t],s=this.attr.endpointUrlOverrides[t]||i.url;return function(t,n){n=n||{},n.excluded=n.excluded||[];var a=n.visible||[];delete n.visible,this.JSONRequest({type:i.method,url:s,headers:e,dataType:"json",data:o.merge(n,{excluded:this.storage.pushAll("excluded",n.excluded).concat(a).join(",")}),eventData:n,success:i.successEvent,error:i.errorEvent},i.method)}.bind(this)},this.excludeUsers=function(t,e){this.storage.pushAll("excluded",e.userIds),this.trigger("dataDidExcludeUserRecommendations",e)},this.excludeFollowed=function(t,e){e=e||{},"following"===e.newState&&e.userId&&this.storage.push("excluded",e.userId)},this.after("initialize",function(){var t=a({withArray:!0,withMaxElements:!0,withUniqueElements:!0});this.storage=new t("excluded_wtf_recs"),this.storage.setMaxElements("excluded",this.attr.maxExcludedRecsInLocalStorage),this.on(document,"uiRefreshUserRecommendations",this.refreshEndpoint("users")),this.on(document,"uiGetUserRecommendations",this.hitEndpoint("users")),this.on(document,"uiDismissUserRecommendation",this.hitEndpoint("dismiss")),this.on(document,"uiAddWtfBlacklistUsers",this.excludeUsers),this.on(document,"dataFollowStateChange",this.excludeFollowed),this.on(document,"uiPromptbirdWantsPromotedSelf",this.hitEndpoint("promoted_self"))})}var n=i(10),o=i(25),a=i(227),r=i(226),l=n(s,r);t.exports=l},783:function(t,e,i){(function(e){function s(){this.defaultAttrs({userSelector:".js-actionable-user",itemType:"user"}),this.scribeDismissRecommendation=function(t,e){this.scribeInteraction("dismiss",e.oldUser),e.newUser&&this.scribeInteraction({element:"replace",action:"results"},e.newUser,{referring_event:"replace"})},this.scribeRecommendationResults=function(t,i){var s=[];t.emptyResponse||this.$node.find(this.attr.userSelector).map(function(t,i){s.push(this.interactionData(e(i),{position:t}))}.bind(this));var n=t.emptyResponse?"no_results":"results";this.scribeInteractiveResults({element:i,action:n},s,t,{referring_event:i})},this.scribeRecommendations=function(t,e){var i=e.sourceEventData||{},s=e.initialResults||i.initialResults;s?(this.scribeRecommendationResults(e,"initial"),e.emptyResponse||this.scribeRecommendationImpression(e)):(this.scribe({action:"refresh"},e,{event_info:i.refreshType}),this.scribeRecommendationResults(e,"newer"))},this.scribeEmptyRecommendationsResponse=function(t,e){this.scribeRecommendations(t,r.merge(e,{emptyResponse:!0}))},this.scribeRecommendationImpression=function(t){this.scribe("impression",t)},this.scribeLinkClicks=function(t,e){this.scribe({component:"user_recommendations",element:e.element,action:"click"})},this.after("initialize",function(){this.on(document,"uiDidDismissUserRecommendation",this.scribeDismissRecommendation),this.on(document,"uiDidGetRecommendations",this.scribeRecommendations),this.on(document,"uiGotEmptyRecommendationsResponse",this.scribeEmptyRecommendationsResponse),this.on(document,"uiClickedWtfLink",this.scribeLinkClicks)})}var n=i(10),o=i(36),a=i(39),r=i(25);t.exports=n(s,o,a)}).call(e,i(1))},784:function(t,e,i){function s(){this.scribeImpression=function(t,e){this.scribe(o.merge({},e.scribeContext,{element:"wtf_import_prompt",action:"impression"}))},this.scribeToggle=function(t,e){this.scribe(o.merge({},e.scribeContext,{element:"wtf_import_prompt",action:e.action}),{section:"other_services"})},this.after("initialize",function(){this.on("uiWTFImportPromptImpression",this.scribeImpression),this.on("uiWTFImportPromptToggle",this.scribeToggle)})}var n=i(10),o=i(25),a=i(40);t.exports=n(s,a)},785:function(t,e,i){var s=i(786),n=i(787),o=i(788);t.exports=function(t){n.attachTo(document),s.attachTo(document,{profileId:t.profile_id}),o.attachTo(".RelatedUsers",{eventData:{scribeContext:{component:"related_users"}}})}},786:function(t,e,i){function s(){this.defaultAttrs({endpoint:"/i/related_users/",profileId:null,responseField:"related_users_html",maxExcludedIds:100,storageTTL:864e5}),this.processResponse=function(t){if(this.trigger("dataRelatedUsersRefreshed",t),t[this.attr.responseField])this.emptyResponse=!1;else{if(this.emptyResponse)return void(this.emptyResponse=!1);this.emptyResponse=!0,this.storage.removeItem(this.storageName),this.trigger("uiRefreshRelatedUsers")}},this.requestUsers=function(t,e){e=e||{};var i=this.getExcludedUsers(e.excludedIds||[]),s={};i.length>0&&(s.excluded=i),this.get({url:this.attr.endpoint+this.attr.profileId,eventData:e,data:s,success:this.processResponse.bind(this)})},this.getExcludedUsers=function(t){return t.length&&this.storage.pushAll(this.storageName,t),this.storage.getArray(this.storageName).join(",")},this.after("initialize",function(){if(this.attr.profileId){this.emptyResponse=!1,this.storageName="excluded_"+this.attr.profileId;var t=o({withArray:!0,withMaxElements:!0,withUniqueElements:!0,withExpiry:!0});this.storage=new t("excluded_related_users"),this.storage.setMaxElements(this.storageName,this.attr.maxExcludedIds),this.on(document,"uiRefreshRelatedUsers",this.requestUsers)}})}var n=i(10),o=i(227),a=i(226);t.exports=n(s,a)},787:function(t,e,i){function s(){this.scribeResults=function(t,e){e=e||[],e.isInitial&&this.scribe("impression",e);var i=(e.userIds||[]).map(function(t,e){return{id:t,item_type:"user",position:e}}),s={items:i},n=i.length?"results":"no_results";this.scribe(n,e,s)},this.scribeRefresh=function(t,e){this.scribe({element:"refresh_link",action:"click"},e)},this.after("initialize",function(){this.on("uiRelatedUsersDisplayed",this.scribeResults),this.on("uiRelatedUsersRefreshClick",this.scribeRefresh)})}var n=i(10),o=i(40);t.exports=n(s,o)},788:function(t,e,i){(function(e){function s(){this.defaultAttrs({usersSelector:".RelatedUsers-users",refreshSelector:".js-refresh-related-users",relatedUserSelector:".js-actionable-user",responseField:"related_users_html",hiddenClass:"u-hidden",itemType:"user"}),this.renderRelatedUsers=function(t,e){this.refreshing=!1;var i=this.$node.hasClass(this.attr.hiddenClass),s=e[this.attr.responseField];s&&(this.select("usersSelector").html(s),this.show()),this.trigger("uiRelatedUsersDisplayed",{userIds:this.collectVisibleUserIds(),isInitial:i})},this.collectVisibleUserIds=function(){var t=this.select("relatedUserSelector").map(function(){return e(this).attr("data-user-id")});return e.makeArray(t)},this.show=function(){this.$node.removeClass(this.attr.hiddenClass)},this.clickOnRefresh=function(t,e){this.refreshing||(this.trigger("uiRelatedUsersRefreshClick"),this.refreshing=!0,this.trigger("uiRefreshRelatedUsers",{excludedIds:this.collectVisibleUserIds()}))},this.after("initialize",function(){this.refreshing=!1,this.on(document,"dataRelatedUsersRefreshed",this.renderRelatedUsers),this.trigger("uiRefreshRelatedUsers"),this.on("click",{refreshSelector:this.clickOnRefresh})})}var n=i(10),o=i(395),a=i(392);t.exports=n(s,o,a)}).call(e,i(1))},789:function(t,e,i){function s(){this.after("initialize",function(){this.scribeOnEvent("uiNeedsDMDialog",{section:"business_profile",component:"message_cta",action:"click"})})}var n=i(10),o=i(40);t.exports=n(s,o)},790:function(t,e,i){(function(e){function s(){this.defaultAttrs({editButtonSelector:".edit-profile-btn",scribeContext:{}}),this.scribeAction=function(t){var i=o.merge(this.attr.scribeContext,{action:t});return function(t,s){i.element=e(t.target).attr("data-scribe-element"),this.scribe(i)}},this.after("initialize",function(){this.on("click",{editButtonSelector:this.scribeAction("click")})})}var n=i(10),o=i(25),a=i(40);t.exports=n(s,a)}).call(e,i(1))},791:function(t,e,i){function s(){this.after("initialize",function(){this.scribeOnEvent("uiAvatarClicked",{element:"avatar",action:"click"}),this.scribeOnEvent("uiFullNameClicked",{element:"fullname",action:"click"}),this.scribeOnEvent("uiUsernameClicked",{element:"username",action:"click"}),this.scribeOnEvent("uiUrlClicked",{element:"url",action:"click"}),this.scribeOnEvent("uiLocationClicked",{element:"place_tag",action:"click"}),this.scribeOnEvent("uiBirthdayClicked",{element:"birthday",action:"click"})})}var n=i(10),o=i(40);t.exports=n(s,o)},792:function(t,e,i){(function(e){function s(){this.defaultAttrs({scribeContext:{component:"profile_heading"},toggleElementSelector:".ProfileHeading-toggleItem"}),this.scribeTogglesImpression=function(){this.select("toggleElementSelector").each(function(t,i){var s=o.merge(this.attr.scribeContext,{element:e(i).data("element-term"),action:"impression"});this.scribe(s)}.bind(this))},this.after("initialize",function(){this.scribeTogglesImpression()})}var n=i(10),o=i(25),a=i(40);t.exports=n(s,a)}).call(e,i(1))},793:function(t,e,i){function s(){this.shouldPerformRequest=function(t){return t&&(t.profileHead||t.isReplacement)},this.getLimit=function(t){return t.isReplacement?1:3},this.getHTML=function(t,e){function i(t){t.html&&(t.isReplacement=e.isReplacement,this.trigger("dataSuggestedUsersSuccess",t))}this.shouldPerformRequest(e)&&this.get({url:"/i/users/suggested_users",data:{user_id:e.userId,pc:!0,limit:this.getLimit(e),display_location:"cluster-follow"},eventData:e,success:i.bind(this),error:"dataSuggestedUsersFailure"})},this.scribeSuggestedUserResults=function(t,e){var i=e.isReplacement?"newer":"initial";this.scribeInteractiveResults({element:i,action:"results"},e.items,e,{referring_event:i,profile_id:e.user_id})},this.after("initialize",function(t,e){this.on("uiSuggestedUsersRendered",this.scribeSuggestedUserResults),this.on("uiFollowAction uiGetClusterFollowReplacementSuggestion",this.getHTML)})}var n=i(10),o=i(226),a=i(39);t.exports=n(s,o,a)},794:function(t,e,i){(function(e){function s(){var t={NOT_LOADED:"not-loaded",LOADING:"loading",LOADED:"loaded"};this.hasMoreItems=!0,this.defaultAttrs({profileUser:!1,mediaGrid:!1,mediaGridOpen:!1,gridPushState:!1,pushStateUrl:"/",defaultGalleryTitle:"Media Gallery",viewAllSelector:".list-link",thumbnailSelector:".tweet-media-img-placeholder",thumbnailPlaceholderSelector:".thumbnail-placeholder.first",thumbnailNotLoadedSelector:'.tweet-media-img-placeholder[data-load-status="'+t.NOT_LOADED+'"]',thumbnailSize:90,thumbnailsVisible:6,showAllInlineMedia:!1,loadOnEventName:"uiLoadThumbnails",showSensitiveContent:!1,photoRailHeadingTextSelector:".PhotoRail-headingText",photoRailHeadingWithCountClass:"PhotoRail-headingText--withCount",photoRailHeadingWithoutCountClass:"PhotoRail-headingText--withoutCount",dataEvents:{requestItems:"uiWantsMoreMediaTimelineItems",gotItems:"dataGotMoreMediaTimelineItems"},defaultRequestData:{}}),this.thumbs=function(){return this.select("thumbnailSelector")},this.getMaxPosition=function(){var t=this.thumbs();if(t.length)return t.last().attr("data-status-id")},this.shouldGetMoreItems=function(t){var i=e(t.target);i.attr("data-paged")||this.getMoreItems()},this.getMoreItems=function(){if(this.hasMoreItems){var t=this.thumbs();t.attr("data-paged",!0),this.trigger(document,this.attr.dataEvents.requestItems,o.merge(this.attr.defaultRequestData,{max_position:this.maxPosition||this.getMaxPosition(),for_photo_rail:!0}))}},this.gotMoreItems=function(t,i){if(i.items_html&&e.trim(i.items_html).length){var s=e(e.isArray(i.items_html)?i.items_html.join(""):i.items_html);this.appendItems(s)}else this.hasMoreItems=!1;this.trigger(document,"dataGotMoreMediaItems",i),this.select("thumbnailSelector").length<this.attr.thumbnailsVisible&&this.hasMoreItems&&this.getMoreItems()},this.appendItems=function(t){this.attr.gridPushState&&(t.addClass("js-nav"),t.attr("href",this.attr.pushStateUrl)),this.select("thumbnailPlaceholderSelector").before(t),this.updateMaxPosition(),this.removeUnsupportedTypes(),this.renderVisible()},this.updateMaxPosition=function(){this.maxPosition=this.getMaxPosition()},this.removeUnsupportedTypes=function(){this.select("thumbnailSelector").each(function(t,i){var s=e(i);!this.attr.showSensitiveContent&&s.data("possiblySensitive")&&s.remove()}.bind(this))},this.renderVisible=function(){var t,i=this.select("thumbnailSelector").slice(0,this.attr.thumbnailsVisible),s=i.filter(this.attr.thumbnailNotLoadedSelector);if(s.length){var n=this.select("photoRailHeadingTextSelector");s.length>=this.attr.thumbnailsVisible?(n.addClass(this.attr.photoRailHeadingWithCountClass),n.removeClass(this.attr.photoRailHeadingWithoutCountClass)):(n.addClass(this.attr.photoRailHeadingWithoutCountClass),n.removeClass(this.attr.photoRailHeadingWithCountClass)),this.loadThumbs(s),t={thumbnails:[]},s.each(function(i,s){t.thumbnails.push(e(s).attr("data-image-url"))}),this.trigger("uiMediaThumbnailsVisible",t)}else i.length>0&&this.showThumbs();t={thumbnails:[]},s.each(function(i,s){t.thumbnails.push(e(s).attr("data-image-url"))}),this.trigger("uiMediaThumbnailsVisible",t)},this.loadThumbs=function(e){e.attr("data-load-status",t.LOADING),e.each(this.loadThumb.bind(this))},this.loadThumb=function(t,i){var s=e(i),n=function(t){this.loadThumbSuccess(s,t)}.bind(this),o=function(){this.loadThumbFail(s)}.bind(this);r.load(s.attr("data-image-url")+":thumb",n,o)},this.loadThumbSuccess=function(e,i){e.attr("data-load-status",t.LOADED),i.css(a.getThumbnailOffset(i.get(0).height,i.get(0).width,this.attr.thumbnailSize)),i.attr("alt",e.attr("data-img-alt")),e.append(i),this.showThumbs()},this.loadThumbFail=function(t){t.remove(),this.renderVisible()},this.showThumbs=function(){this.$node.show(),this.$node.attr("data-loaded",!0),this.gridAutoOpen()},this.thumbnailClick=function(t){t.stopPropagation(),t.preventDefault(),this.openGallery(t.target);var i=e(t.target);this.trigger("uiMediaThumbnailClick",{url:i.attr("data-image-url"),mediaType:"photo"})},this.gridAutoOpen=function(){this.attr.mediaGrid&&this.attr.mediaGridOpen&&this.thumbs().length&&this.viewGrid()},this.viewAllClick=function(t){this.attr.mediaGrid?this.trigger("uiMediaViewAllClick"):(this.openGallery(this.thumbs()[0]),t.preventDefault())},this.showThumbs=function(){this.$node.show(),this.$node.attr("data-loaded",!0),this.attr.mediaGridOpen&&(this.attr.mediaGridOpen=!1,this.viewGrid())},this.viewGrid=function(){this.openGrid(this.thumbs()[0])},this.openGrid=function(t){this.trigger(t,"uiOpenGrid",{gridTitle:this.attr.defaultGalleryTitle,profileUser:this.attr.profileUser})},this.openGallery=function(t){this.trigger(t,"uiOpenGallery",{gridTitle:this.attr.defaultGalleryTitle,showGrid:this.attr.mediaGrid,profileUser:this.attr.profileUser})},this.removeThumbs=function(){this.thumbs().remove()},this.before("teardown",this.removeThumbs),this.after("initialize",function(){this.$node.attr("data-loaded")||(this.$node.hide(),this.trigger("uiMediaThumbnailsVisible",{thumbnails:[]}),this.thumbs().length>0&&this.renderVisible()),this.on("click",{thumbnailSelector:this.thumbnailClick,viewAllSelector:this.viewAllClick}),this.gridAutoOpen(),this.on(document,this.attr.dataEvents.gotItems,this.gotMoreItems),this.on("uiGalleryMediaLoad",this.shouldGetMoreItems),this.attr.showAllInlineMedia?this.getMoreItems():this.on(document,"uiReloadThumbs",this.getMoreItems)})}var n=i(10),o=i(25),a=i(261),r=i(425),l=(i(22),n(s));t.exports=l}).call(e,i(1))},795:function(t,e,i){var s=i(10),n=i(397);t.exports=s(n)},796:function(t,e,i){function s(){this.namespace="follower_requests_reminder",this.storageKey="until",this.possiblyShowMessage=function(){this.isExpired(this.storageKey)&&(this.showMessage(),this.clear(),this.updateComponentTTL())},this.showMessage=function(){this.trigger("uiShowStickyMessage",{message:this.attr.followerRequestsReminderMessage})},this.updateComponentTTL=function(){var t=2e4,e=864e5;"selenium"===this.attr.environment?this.updateTTL(this.storageKey,t):this.updateTTL(this.storageKey,e)},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.possiblyShowMessage)})}var n=i(10),o=i(96);t.exports=n(s,o)},797:function(t,e,i){function s(){this.requestItems=function(t,e){var i={},s={min_position:e.min_position,max_position:e.max_position,for_photo_rail:e.for_photo_rail};this.get({url:this.attr.endpoint,headers:i,data:s,eventData:e,success:"dataGotMoreMediaTimelineItems",error:"dataGotMoreMediaTimelineItemsError"})},this.after("initialize",function(){this.on(document,"uiWantsMoreMediaTimelineItems",this.requestItems)})}var n=i(10),o=i(226);t.exports=n(s,o)},798:function(t,e,i){function s(){var t=/:[A-Z0-9_-]+$/i;this.scribeMediaThumbnailResults=function(e,i){var s=i.thumbnails.length,n=s?"results":"no_results",o={};s&&(o.items=i.thumbnails.map(function(e){return{name:e.replace(t,"")}})),this.scribe({action:n},i,o)},this.scribeMediaThumbnailClick=function(e,i){var s={url:i.url&&i.url.replace(t,"")},n={element:i.mediaType,action:"click"};this.scribe(n,i,s)},this.scribeMediaViewAllClick=function(t,e){this.scribe({action:"view_all"},e)},this.after("initialize",function(){this.on(document,"uiMediaGalleryResults",this.scribeMediaThumbnailResults),this.on(document,"uiMediaThumbnailsVisible",this.scribeMediaThumbnailResults),this.on(document,"uiMediaThumbnailClick",this.scribeMediaThumbnailClick),this.on(document,"uiMediaViewAllClick",this.scribeMediaViewAllClick)})}var n=i(10),o=i(40);t.exports=n(s,o)},799:function(t,e,i){(function(e){function s(){var t=e(window);this.defaultAttrs({disableScrollThreshold:!0,scrollDebounceInterval:0,resizeDebounceInterval:5,transitionDuration:300,finalHeaderHeight:20,originalHeaderImagePosition:50,finalHeaderImagePosition:0,parallaxRatio:.5,enabledCanopyViewportThreshold:720,lockedStateClass:"is-locked",defaultStateClass:"is-default",profileHeaderClass:"ProfileCanopy-header",topbarSelector:".topbar",profileHeaderSelector:".ProfileCanopy-header",profileHeaderBgImageSelector:".ProfileCanopy-headerBg img",profileHeaderAvatarSelector:".ProfileCanopy-avatar",profileCardMiniSelector:".ProfileCanopy-card",largeCanopyClass:"ProfileCanopy--large"}),this.scrollRatioForHeader=function(t){return this.canopyLockPosition>0?this.scrollPos/this.canopyLockPosition:1},this.absoluteTransitionThreshold=function(){return this.globalNavHeight+this.profileHeaderHeight},this.withinAbsoluteTransitionThreshold=function(){return this.scrollPos<this.absoluteTransitionThreshold()},this.pastCanopyLockThreshold=function(){return this.scrollPos>=this.canopyLockPosition},this.determineScrollToTop=function(t){this.$node.hasClass(this.attr.lockedStateClass)&&a(0,this.attr.transitionDuration)},this.profileCanopyIsLocked=function(){return this.$node.hasClass(this.attr.lockedStateClass)},this.lockProfileCanopy=function(){this.removeAccessibilityOfProfileHeaderAvatar(),this.$node.addClass(this.attr.lockedStateClass),this.lockHeaderParallax()},this.unlockProfileCanopy=function(){this.removeAccessibilityOfMiniProfileCard(),this.$node.removeClass(this.attr.lockedStateClass),this.parallaxTick()},this.removeAccessibilityOfProfileHeaderAvatar=function(){this.removeAccessibility(this.$profileHeaderAvatar),this.reinstateAccessibility(this.$profileCardMini)},this.removeAccessibilityOfMiniProfileCard=function(){this.removeAccessibility(this.$profileCardMini),this.reinstateAccessibility(this.$profileHeaderAvatar)},this.updateNavHeight=function(){this.globalNavHeight=e(this.attr.topbarSelector).height(),this.determineCanopyScrollBehavior()},this.lockHeaderParallax=function(){var t=this.calculateShiftAmount();this.$profileHeaderBgImage.css({transform:"translate3d(0px, "+t+"px, 0)"}),this.$profileHeader.css({"margin-top":this.globalNavHeight-this.canopyLockPosition})},this.parallaxTick=function(){this.parallaxTick.ticking||(this.parallaxTick.ticking=!0,requestAnimationFrame(function(){this.shiftHeaderParallax(),this.parallaxTick.ticking=!1}.bind(this)))},this.calculateShiftAmount=function(){return(this.backgroundImageHeight-this.profileHeaderHeight)*this.attr.parallaxRatio},this.shiftHeaderParallax=function(){this.$profileHeader.css({"margin-top":0});var t,e=this.scrollRatioForHeader(),i=this.calculateShiftAmount()*e;t=i>0?{transform:"translate3d(0px, "+i+"px, 0)"}:{transform:"none"},this.$profileHeaderBgImage.css(t)},this.determineTransition=function(t){this.scrollPos=t,this.enabled&&this.pastCanopyLockThreshold()?this.lockProfileCanopy():this.unlockProfileCanopy()},this.determineCanopyScrollBehavior=function(){this.isEditingProfile||t.height()<this.attr.enabledCanopyViewportThreshold?this.enabled=!1:this.enabled=!0,this.updateCanopyValuesForReflow()},this.profileEditingOn=function(){this.isEditingProfile=!0,this.determineCanopyScrollBehavior()},this.profileEditingOff=function(){this.isEditingProfile=!1,this.determineCanopyScrollBehavior()},this.setResponsiveVariableValues=function(){this.profileHeaderHeight=this.$profileHeader.height(),this.canopyLockPosition=this.profileHeaderHeight-this.attr.finalHeaderHeight},this.updateCanopyValuesForReflow=function(t,e){this.setResponsiveVariableValues(),this.reflowCanopy()},this.reflowCanopy=function(){this.trigger("reflowCanopy",{scrollPos:t.scrollTop()})},this.showLargeCanopy=function(){this.$node.addClass(this.attr.largeCanopyClass)},this.showSmallCanopy=function(){this.$node.removeClass(this.attr.largeCanopyClass)},this.removeAccessibility=function(t){t.attr("aria-hidden",!0).find("a").attr("tabindex","-1")},this.reinstateAccessibility=function(t){t.removeAttr("aria-hidden").find("a").removeAttr("tabindex")},this.after("initialize",function(){this.isEditingProfile=!1,this.scrollPos=0,this.$body=e("body"),this.$window=e(window),this.$profileHeader=this.select("profileHeaderSelector"),this.$profileHeaderBgImage=this.select("profileHeaderBgImageSelector"),this.$profileHeaderAvatar=this.select("profileHeaderAvatarSelector"),this.$profileCardMini=this.select("profileCardMiniSelector"),this.updateNavHeight(),this.backgroundImageHeight=this.$profileHeaderBgImage.height(),this.on(this.$profileHeaderBgImage,"load",function(){this.backgroundImageHeight=this.$profileHeaderBgImage.height()}.bind(this)),this.on(window,"scroll",o.throttle(function(){this.reflowCanopy()}.bind(this),this.attr.scrollDebounceInterval)),this.on(window,"resize",o.throttle(function(){this.determineCanopyScrollBehavior()}.bind(this),this.attr.resizeDebounceInterval)),this.on("reflowCanopy",function(t,e){this.determineTransition(e.scrollPos)}),this.on("click",{profileHeaderSelector:this.determineScrollToTop}),this.on(document,"uiProfileEditingOn",this.profileEditingOn),this.on(document,"uiProfileEditingOff",this.profileEditingOff),this.on(document,"uiShowLargeCanopy",this.showLargeCanopy),this.on(document,"uiShowSmallCanopy",this.showSmallCanopy),this.on(document,"uiBannerDismissed",this.updateNavHeight),this.on(document,"uiSwiftLoaded uiPageChanged viewport-update",this.determineCanopyScrollBehavior)})}var n=i(10),o=i(25),a=i(580);t.exports=n(s)}).call(e,i(1))},800:function(t,e,i){function s(){this.defaultAttrs({warningClass:"is-showingWarning",profileViewTweetsButtonSelector:".BlockedWarningTimeline-button"}),this.showTweets=function(){this.$node.removeClass(this.attr.warningClass)},this.showTweetsWithScribe=function(){this.$node.removeClass(this.attr.warningClass),this.trigger("uiViewBlockedUserTweets")},this.hideTweets=function(){this.$node.addClass(this.attr.warningClass)},this.scribeImpression=function(){this.$node.hasClass(this.attr.warningClass)&&this.trigger("uiBlockedUserWarningImpression")},this.after("initialize",function(){this.on("click",{profileViewTweetsButtonSelector:this.showTweetsWithScribe}),this.on(document,"uiShowProfileTweets",this.showTweets),this.on(document,"uiHideProfileTweets",this.hideTweets),this.scribeImpression()})}var n=i(10);t.exports=n(s)},801:function(t,e,i){function s(){this.defaultAttrs({scribeContext:{component:"blocker_interstitial"}}),this.scribeViewBlockedUserTweets=function(t,e){var i=o.merge(this.attr.scribeContext,{action:"click"});this.scribe(i,e)},this.scribeViewBlockerInterstitialWarning=function(t,e){var i=o.merge(this.attr.scribeContext,{action:"impression"});this.scribe(i,e)},this.after("initialize",function(){this.on(document,"uiViewBlockedUserTweets",this.scribeViewBlockedUserTweets),this.on(document,"uiBlockedUserWarningImpression",this.scribeViewBlockerInterstitialWarning)})}var n=i(10),o=i(25),a=i(40),r=n(s,a);t.exports=r},802:function(t,e,i){(function(e){function s(){this.defaultAttrs({profileHead:!0,isCanopy:!1,editProfileButtonInlineSelector:".inline-edit-profile-btn",nonEmptyAvatarSelector:".profile-picture .avatar:not(.empty-avatar)",emptyAvatarSelector:".profile-picture .empty-avatar",itemType:"user",fullNameSelector:".fullname",usernameSelector:".username",urlSelector:".url a",locationSelector:".location a",birthdaySelector:".birthday a"}),this.showAvatarModal=function(t){t.preventDefault(),this.isEditing()||(this.trigger("uiAvatarClicked"),this.trigger(t.target,"uiOpenGallery",{title:_("@{{screenName}}'s profile photo",{screenName:this.attr.profile_user.screen_name})}))},this.emptyAvatarClicked=function(t){if(!this.isEditing()){t.preventDefault(),t.stopImmediatePropagation();var i=e(t.target).attr("data-scribe-element");e(document).one("uiEditProfileStart",this.showAvatarOptions.bind(this)),this.trigger("uiEditProfileInitialize",{scribeElement:i})}},this.showAvatarOptions=function(){this.trigger("uiShowEditAvatarOptions")},this.editProfileInline=function(t){t.preventDefault();var i=e(t.target).attr("data-scribe-element");this.trigger(document,"uiEditProfileInitialize",{scribeElement:i})},this.isEditing=function(){return e("body").hasClass("profile-editing")},this.fullNameClicked=function(){this.trigger("uiFullNameClicked")},this.usernameClicked=function(){this.trigger("uiUsernameClicked")},this.urlClicked=function(){this.trigger("uiUrlClicked")},this.locationClicked=function(t,i){var s=e(t.target),n=s.data("place-id"),o={scribeData:{message:n}};this.trigger("uiLocationClicked",o)},this.birthdayClicked=function(t){t.preventDefault(),this.trigger("uiBirthdayClicked"),this.trigger("uiBalloonAnimationRequested")},this.notifyDropdownToHide=function(){this.trigger("uiCloseDropdowns")},this.after("initialize",function(){this.on("click",{nonEmptyAvatarSelector:this.showAvatarModal,emptyAvatarSelector:this.emptyAvatarClicked,editProfileButtonInlineSelector:this.editProfileInline,
fullNameSelector:this.fullNameClicked,usernameSelector:this.usernameClicked,urlSelector:this.urlClicked,locationSelector:this.locationClicked,birthdaySelector:this.birthdayClicked}),this.attr.isCanopy&&this.on("uiHideProfileCanopy",this.notifyDropdownToHide),this.attr.eventData=r.merge(this.attr.eventData||{},{scribeContext:this.attr.scribeContext,profileHead:this.attr.profileHead})})}var n=i(10),_=i(22),o=i(395),a=i(803),r=i(25);t.exports=n(s,o,a)}).call(e,i(1))},803:function(t,e,i){(function(e){function i(){this.defaultAttrs({}),this.updateProfileStats=function(t,i){i.stats&&i.stats.length&&e.each(i.stats,function(t,e){var i=this.statNode(e.user_id,e.stat);this.isCompact(i)||i.html(e.html)}.bind(this))},this.statSelector=function(t,e){return'.stats[data-user-id="'+t+'"] a[data-element-term="'+e+'_stats"]'},this.statNode=function(t,e){return this.$node.find(this.statSelector(t,e))},this.isCompact=function(t){return t.data("is-compact")===!0},this.after("initialize",function(){this.on(document,"dataGotProfileStats",this.updateProfileStats)})}t.exports=i}).call(e,i(1))},804:function(t,e,i){function s(){this.openDMDialog=function(){this.scribe({element:"dm_button",action:"click"},this.attr.eventData),this.trigger("uiNeedsDMDialog",this.dmDialogData())},this.dmDialogData=function(){return{id:a.getId(this.$node),screen_name:a.getScreenName(this.$node),name:a.getName(this.$node),oto_only:!0}},this.after("initialize",function(){this.on("click",this.openDMDialog)})}var n=i(10),o=i(40),a=i(398);t.exports=n(s,o)},805:function(t,e,i){function s(){this.defaultAttrs({socialProofAvatarSelector:".social-proof .avatar",followersYouFollowSelector:".followers-you-follow",itemType:"user"}),this.socialProofAvatarClick=function(t,e){this.trigger("uiSocialProofAvatarClick")},this.viewAllFollowersYouFollow=function(t,e){this.trigger("uiFollowersYouFollowLink")},this.after("initialize",function(){this.trigger("uiHasProfileSocialProof"),this.on("click",{socialProofAvatarSelector:this.socialProofAvatarClick,followersYouFollowSelector:this.viewAllFollowersYouFollow})})}var n=i(10),o=i(392),a=n(s,o);t.exports=a},806:function(t,e,i){function s(){this.defaultAttrs({scribeContext:{component:"profile_follow_card"}}),this.scribeProfileSocialProof=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"social_proof",action:"impression"});this.scribe(i,e)},this.scribeSocialProofAvatarClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"social_proof_avatar",action:"click"});this.scribe(i,e)},this.scribeFollowersYouFolowClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"followers_you_follow",action:"click"});this.scribe(i,e)},this.after("initialize",function(){this.on("uiHasProfileSocialProof",this.scribeProfileSocialProof),this.on("uiSocialProofAvatarClick",this.scribeSocialProofAvatarClick),this.on("uiFollowersYouFollowLink",this.scribeFollowersYouFolowClick)})}var n=i(10),o=i(25),a=i(40),r=n(s,a);t.exports=r},807:function(t,e,i){function s(){this.defaultAttrs({tweetStatTitleSelector:".ProfileNav-item--tweets .ProfileNav-stat--link",tweetStatSelector:".ProfileNav-item--tweets .ProfileNav-value",mediaStatTitleSelector:".ProfileNav-item--media .ProfileNav-stat--link",mediaStatSelector:".ProfileNav-item--media .ProfileNav-value",followingStatTitleSelector:".ProfileNav-item--following .ProfileNav-stat--link",followingStatSelector:".ProfileNav-item--following .ProfileNav-value",followerStatTitleSelector:".ProfileNav-item--followers .ProfileNav-stat--link",followerStatSelector:".ProfileNav-item--followers .ProfileNav-value",favoriteStatTitleSelector:".ProfileNav-item--favorites .ProfileNav-stat--link",favoriteStatSelector:".ProfileNav-item--favorites .ProfileNav-value"}),this.updateProfileStats=function(t,e){e.stats&&e.stats.forEach(function(t){if(this.$node.attr("data-user-id")===t.user_id.toString()){var e=this.select(t.stat+"StatSelector"),i=this.select(t.stat+"StatTitleSelector");e.data("is-compact")!==!0&&e.html(t.highline_stat_value),i.tooltip("setTitle",t.highline_stat_phrase)}}.bind(this))},this.after("initialize",function(){this.on(document,"dataGotProfileStats",this.updateProfileStats)})}var n=i(10);t.exports=n(s)},808:function(t,e,i){(function(e){function s(){this.defaultAttrs({itemSelector:".ProfileNav-item",moreMenuNavItemSelector:".ProfileNav-item--more",persistentMoreMenuItemSelector:".ProfileNav-dropdownItem.js-persistent",resizeDebounceInterval:10,persistentMoreMenu:!1,moreMenuItemMinimum:2}),this.createNavItems=function(){this.hiddenNavItems=[],this.navItems=[],this.movableItems=[];var t=this.select("persistentMoreMenuItemSelector").length;this.attr.moreMenuItemMinimum-=t,this.attr.moreMenuItemMinimum<0&&(this.attr.moreMenuItemMinimum=0),this.navItems=this.select("itemSelector").get().reverse().map(function(t){var i=e(t),s=new n(i,this);return i.is(this.attr.moreMenuNavItemSelector)&&(this.moreMenuNavItem=s),s.moreItem&&this.movableItems.push(s),s.moreItem&&!s.visible&&this.hiddenNavItems.push(s),s}.bind(this))},this.adaptNav=function(){var t=parseInt(this.$node.css("width"),10),e=this.getWidthOfVisibleNavItems();t<e?this.hideSomeNavItems(t,e):t>e&&this.showSomeNavItems(t,e)},this.getWidthOfVisibleNavItems=function(){return this.navItems.reduce(function(t,e){return e.visible?t+e.width:t},0)},this.hideSomeNavItems=function(t,e){var i=e+(this.moreMenuNavItem.visible?0:this.moreMenuNavItem.width);this.movableItems.forEach(function(e){e.visible&&(this.hiddenNavItems.length<this.attr.moreMenuItemMinimum||i>t)&&(e.hide(),i-=e.width)}.bind(this)),this.moreMenuNavItem.show()},this.showSomeNavItems=function(t,e){for(var i,s=e-this.moreMenuNavItem.width,n=[],o=this.hiddenNavItems.length-1;o>=0&&(i=this.hiddenNavItems[o],i.width+s<=t);o--)n.push(i),s+=i.width;if(this.attr.persistentMoreMenu||this.hiddenNavItems.length!==n.length){var a=e;for(o=0;o<n.length&&this.hiddenNavItems.length>this.attr.moreMenuItemMinimum&&(i=n[o],i.width+a<=t);o++)i.show(),a+=i.width}else n.forEach(function(t){t.show()}),this.moreMenuNavItem.hide()},this.after("initialize",function(){this.on(window,"resize",a.debounce(this.adaptNav.bind(this),this.attr.resizeDebounceInterval)),this.createNavItems(),this.adaptNav()})}function n(t,e){this.$item=t,this.nav=e,this.width=t.outerWidth(!0),this.visible=t.is(":visible"),this.moreItem=this.getMoreItem()}var o=i(10),a=i(25);t.exports=o(s),n.prototype.show=function(){this.moreItem&&!this.visible&&(this.moreItem.hide(),this.nav.hiddenNavItems.pop()),this.$item.removeClass("is-hidden"),this.visible=!0},n.prototype.hide=function(){this.moreItem&&this.visible&&(this.moreItem.show(),this.nav.hiddenNavItems.push(this)),this.$item.addClass("is-hidden"),this.visible=!1},n.prototype.getMoreItem=function(){if(this.nav){var t=this.nav.$node.find(this.$item.data("more-item"));return t.length?new n(t):void 0}}}).call(e,i(1))},809:function(t,e,i){(function(e){function s(){this.defaultAttrs({resizeDebounceInterval:10,minimumContentsWidth:1236,leftProfileSidebarSelector:".ProfileSidebar--withLeftAlignment",rightProfileSidebarSelector:".ProfileSidebar--withRightAlignment",moveableModuleSelector:".MoveableModule"}),this.withinMinimumContentWidth=function(t){return t<this.attr.minimumContentsWidth},this.determineSidebarArrangement=function(t){var e=this.select("leftProfileSidebarSelector"),i=this.select("rightProfileSidebarSelector"),s=this.select("moveableModuleSelector");if(i.length){var n=this.withinMinimumContentWidth(t)?e:i;n.append(s)}},this.after("initialize",function(){this.on(document,"uiDetermineSidebarArrangement",function(t,e){this.determineSidebarArrangement(e.windowWidth)}),this.on(window,"resize",o.debounce(function(){this.trigger("uiDetermineSidebarArrangement",{windowWidth:e(window).width()})}.bind(this),this.attr.resizeDebounceInterval)),this.trigger("uiDetermineSidebarArrangement",{windowWidth:e(window).width()})})}var n=i(10),o=i(25);t.exports=n(s)}).call(e,i(1))},810:function(t,e,i){function s(){this.defaultAttrs({hasDefaultText:!0,condensedTextAttr:"data-condensed-text",userScreenNameAttr:"data-screen-name",tweetBoxSelector:".tweet-box",tweetButtonSelector:".tweet-action"}),this.getUserScreenName=function(){return this.$node.attr(this.attr.userScreenNameAttr)||""},this.getDefaultText=function(){return this.attr.hasDefaultText?"@"+this.getUserScreenName()+" ":""},this.getCondensedText=function(){return this.$node.attr(this.attr.condensedTextAttr)},this.removeTextUserColor=function(){this.select("tweetBoxSelector").removeClass("u-textUserColor")},this.addTextUserColor=function(){this.select("tweetBoxSelector").addClass("u-textUserColor")},this.disableTweetAction=function(){this.select("tweetButtonSelector").removeClass("u-bgUserColor u-bgUserColorHover u-borderUserColor")},this.enableTweetAction=function(){this.select("tweetButtonSelector").addClass("u-bgUserColor u-bgUserColorHover u-borderUserColor")},this.after("initialize",function(){this.on(this.$node,"uiTweetBoxExpanded",this.removeTextUserColor),this.on(this.$node,"uiTweetBoxCondensed",this.addTextUserColor),this.on(this.$node,"uiDisableTweetAction",this.disableTweetAction),this.on(this.$node,"uiEnableTweetAction",this.enableTweetAction),this.initTweetbox({condensedText:this.getCondensedText(),defaultText:this.getDefaultText()})})}var n=i(10),o=i(394);t.exports=n(o,s)},811:function(t,e,i){(function(e){function s(){this.defaultAttrs({closeSelector:".js-close",itemType:"user",userSelector:".js-actionable-user",targetSelector:"#suggested-users",childSelector:"",followedButtonSelector:".stream-item .following",lastStreamItemSelector:".stream-end-item",streamItemSelector:".stream-item",streamItemsSelector:"#suggested-users .stream-item",refreshAnimationDuration:200,isClusterFollowReplenishEnabled:!1}),this.getTimelineNodeSelector=function(t){return this.attr.targetSelector+(t?'[data-item-id="'+t+'"]':"")+" "+this.attr.childSelector},this.getPosition=function(t){var i=e(this.attr.streamItemsSelector);return i.index(t.closest(this.attr.streamItemSelector))+1},this.replaceSuggestedUser=function(t,i){var s=e(this.attr.targetSelector).find(this.attr.followedButtonSelector).closest(this.attr.userSelector);if(0!==s.length){var n=this.getPosition(s),o=e(i.html).find(this.attr.userSelector),a=this.attr.refreshAnimationDuration;s.fadeOut(a,function(){s.replaceWith(o.hide()),o.fadeIn(a)});var r=[this.interactionData(o,{position:n})],l=[{id:o.attr("data-user-id"),impressionId:o.attr("data-impression-id")}];this.trigger("uiSuggestedUsersRendered",{isReplacement:!0,items:r,user_id:i.sourceEventData.userId}),this.trigger("uiUsersDisplayed",{users:l})}},this.slideInUsersList=function(t,i){if(!this.$node.hasClass("has-content")){this.$node.addClass("has-content"),this.$node.html(i.html);var s=this.$node.outerHeight(),n=e(window).scrollTop();n>this.$node.position().top+s?e(window).scrollTop(n+s):this.$node.hide().slideDown();var o=this.$node.find(this.attr.userSelector),a=o.map(function(t,i){return this.interactionData(e(i),{position:t})}.bind(this)).get(),r=o.map(function(t,i){var s=e(i);return{id:s.attr("data-user-id"),impressionId:s.attr("data-impression-id")}}).get();this.trigger("uiSuggestedUsersRendered",{items:a,user_id:i.sourceEventData.userId}),this.trigger("uiUsersDisplayed",{users:r})}},this.isClusterFollowAction=function(t){return t.closest(this.attr.targetSelector).length>0},this.handleClusterFollow=function(t,i){this.isClusterFollowAction(e(t.target))&&this.attr.isClusterFollowReplenishEnabled&&this.trigger("uiGetClusterFollowReplacementSuggestion",{isReplacement:!0})},this.handleSuggestedUsersResults=function(t,e){e.isReplacement?this.replaceSuggestedUser(t,e):this.slideInUsersList(t,e)},this.slideOutContent=function(t,e){this.$node.slideUp(function(){this.$node.empty().show(),this.$node.removeClass("has-content")}.bind(this))},this.after("initialize",function(){this.on(document,"dataSuggestedUsersSuccess",this.handleSuggestedUsersResults),this.on(document,"uiFollowAction",this.handleClusterFollow),this.on("click",{closeSelector:this.slideOutContent})})}var n=i(10),o=i(395),a=i(392),r=i(36);t.exports=n(s,o,a,r)}).call(e,i(1))},812:function(t,e,i){(function(e){function s(){var t="min-width",i="max-width",s="viewport-resize";this.defaultAttrs({breakpoints:[],debounceWait:100,debounceImmediate:!1}),this.onResize=function(_,t){var e=this.findBreakpointFor(t);this.hasChanged(e)&&(this.breakpoint=e,this.trigger("viewport-update",e))},this.hasChanged=function(e){return e[t]!==this.breakpoint[t]||e[i]!==this.breakpoint[i]},this.findBreakpointFor=function(e){var s=this.attr.breakpoints.filter(function(s){var n=!s[t]||e.width>=s[t],o=!s[i]||e.width<=s[i];return n&&o});return s[0]},this.viewport=function(){return{width:this.$window.width()}},this.after("initialize",function(){this.breakpoint={},this.$window=e(window),this.on(s,this.onResize),this.on(window,"resize",n.debounce(function(){this.trigger(s,this.viewport())}.bind(this),this.attr.debounceWait,this.attr.debounceImmediate)),this.trigger(s,this.viewport())})}var n=i(13),o=i(11);t.exports=o(s)}).call(e,i(1))},813:function(t,e,i){function s(){this.after("initialize",function(){var t=this.attr.profile_user_follows_alcohol_brand;t&&this.$node.trigger("uiShowStickyMessage",{message:t})})}var n=i(10),o=n(s);t.exports=o},814:function(t,e,i){(function(e){function s(){this.defaultAttrs({fullCommerceButtonSelector:".CommerceDiscovery-profileButton",fullCommerceImageSelector:".CommerceDiscovery-image",commerceCtaSelector:".js-commerce-cta",scribeContext:{}}),this.getCommerceCollectionItem=function(t){var e=t.data("collection-id");return{id:e,item_type:o.customTimeline,token:"commerce_collection"}},this.scribeCommerceClick=function(t,i){var s=e(t.target).closest(this.attr.commerceCtaSelector),n=s.data("scribe-element");if(n){var o={items:[this.getCommerceCollectionItem(s)]};this.scribe(a.merge(this.attr.scribeContext,{element:n,action:"click"}),o)}},this.after("initialize",function(){this.on("click",this.scribeCommerceClick)})}var n=i(10),o=i(42),a=i(25),r=i(40);t.exports=n(s,r)}).call(e,i(1))},815:function(t,e,i){(function(e){function s(){this.defaultAttrs({playBalloonsAnimation:!1,colors:["Balloon--red","Balloon--blue","Balloon--yellow","Balloon--purple","Balloon--green"],sizes:["Balloon--small","Balloon--medium","Balloon--large"],scale:[.65,.85,1],speed:[.21,.25,.3],numberOfBalloons:42,maxBalloonDriftOnXAxis:600,minInitialDelay:500,maxDelayAfterInital:4500,fpsDebuggerBoxClass:"Balloon-fpsDebugger",debuggerBoxParam:"debug"}),this.animationStates={inProgress:0,finished:1},this.balloonsData=[],this.animationStep,this.animationStartTime,this.balloonAnimationRequest,this.viewportSize,this.lastAnimationStepTime=0,this.windowWasBlurred=!1,this.frameCount=0,this.lowestFps=Number.MAX_VALUE,this.highestFps=0,this.averageFps=0,this.easeIn=function(t){return 1-Math.cos(t*(Math.PI/2))},this.pathFunctions=["linear","curve","sinusoidal"],this.linear=function(t,e,i,s){return{xAxis:e*i,yAxis:e*s}},this.curve=function(t,e,i,s){var n=2+1*t;return{xAxis:Math.pow(e,n)*i,yAxis:e*s}},this.sinusoidal=function(t,e,i,s){var n=(2+2*t)/4;return{xAxis:Math.sin(e*Math.PI*n)*i,yAxis:e*s}},this.balloonAnimationDuration=function(t,e){var i=this.attr.speed[e%this.attr.speed.length];return t/i},this.isAnimationInProgress=function(){return this.balloonsData.some(function(t){return t.state===this.animationStates.inProgress},this)},this.setBalloonPosition=function(t,e){var i=this.easeIn(e),s=this[t.chosenPath](t.randomFactor,i,t.xSize,t.ySize),n=t.startPosition.xAxis+s.xAxis,o=t.startPosition.yAxis+s.yAxis;t.$node.css({transform:"matrix("+t.scale+", 0, 0, "+t.scale+", "+n+", -"+o+")"})},this.getAnimationStep=function(){var t=Date.now();this.animationStartTime||0===this.animationStartTime?this.calculateFpsInfo(t):this.animationStartTime=t,this.windowWasBlurred&&(this.windowWasBlurred=!1,this.animationStartTime+=t-this.lastAnimationStepTime),this.lastAnimationStepTime=t,this.balloonsData.forEach(function(e){var i=this.animationStartTime+e.delay;if(t>i){var s=t-i,n=s/e.animationDuration;n<=1.2?this.setBalloonPosition(e,n):(e.state=this.animationStates.finished,e.$node.addClass("u-hidden"))}},this),this.isAnimationInProgress()?this.balloonAnimationRequest=window.requestAnimationFrame(this.animationStep):this.cleanUpBalloons()},this.startAnimation=function(){this.animationStep=this.getAnimationStep.bind(this),this.balloonAnimationRequest=window.requestAnimationFrame(this.animationStep)},this.requestAnimation=function(t,e,i){this.isAnimationInProgress()||(this.resetControlVariables(),this.calculateViewPortSize(),this.createBalloons(),this.resetFpsInfo(),this.trigger("uiBalloonAnimationPlayed",{autoplay:t||i&&i.autoplay}),this.startAnimation())},this.chooseBalloon=function(t){var e=this.attr.colors[t%this.attr.colors.length],i=this.attr.sizes[t%this.attr.sizes.length];return["Balloon",e,i].join(" ")},this.createBalloons=function(){for(var t=this.pathFunctions.length,i=0;i<this.attr.numberOfBalloons;i++){var s=e("<span>",{"class":this.chooseBalloon(i)});this.$node.append(s);var n=s.height(),a=s.width(),r=this.viewportSize.width-a,l=r*Math.max(i-5,0)/this.attr.numberOfBalloons,h=l+r*Math.min(i+5,this.attr.numberOfBalloons)/this.attr.numberOfBalloons,c={xAxis:o.getRandomInteger(l,h),yAxis:-1*n},d=o.getRandomInteger(c.xAxis,c.xAxis+this.attr.maxBalloonDriftOnXAxis)-this.attr.maxBalloonDriftOnXAxis/2,u=this.pathFunctions[i%t],f=Math.random(),m=o.getRandomInteger(this.attr.minInitialDelay,this.attr.minInitialDelay+this.attr.maxDelayAfterInital),p=Math.abs(d-c.xAxis),g=Math.abs(this.viewportSize.height-c.yAxis),v=this.balloonAnimationDuration(g,i);this.balloonsData.push({$node:s,state:this.animationStates.inProgress,delay:m,animationDuration:v,startPosition:c,scale:this.attr.scale[i%this.attr.scale.length],ySize:g,xSize:p,chosenPath:u,randomFactor:f})}},this.cleanUpBalloons=function(){this.balloonAnimationRequest&&window.cancelAnimationFrame(this.balloonAnimationRequest),this.balloonsData.forEach(function(t){t.$node.remove()}),this.balloonsData=[],this.logFpsInfo()},this.calculateViewPortSize=function(){var t=e(window);this.viewportSize={height:t.height(),width:t.width()}},this.setWindowBlurredFlag=function(){this.windowWasBlurred=!0},this.resetControlVariables=function(){this.balloonsData=[],this.animationStep=void 0,this.animationStartTime=void 0,this.balloonAnimationRequest=void 0,this.viewportSize=void 0,this.lastAnimationStepTime=0,this.windowWasBlurred=!1},this.calculateFpsInfo=function(t){if(t>this.animationStartTime+this.attr.minInitialDelay+this.attr.maxDelayAfterInital/2){var e=Math.round(1e3/(t-this.lastAnimationStepTime)*100)/100;this.frameCount+=1,this.averageFps+=e,this.lowestFps=Math.min(this.lowestFps,e),this.highestFps=Math.max(this.highestFps,e)}},this.resetFpsInfo=function(){this.frameCount=0,this.averageFps=0,this.lowestFps=Number.MAX_VALUE,this.highestFps=0},this.logFpsInfo=function(){var t=console;a.fromQuery(window.location)[this.attr.debuggerBoxParam]&&(t.log("Average FPS: "+this.averageFps/this.frameCount),t.log("Lowest FPS: "+this.lowestFps),t.log("Highest FPS: "+this.highestFps))},this.after("initialize",function(){this.attr.autoPlayBalloonsAnimation&&this.on(document,"uiSwiftLoaded uiPageChanged",this.requestAnimation.bind(this,!0)),this.on(document,"uiBeforePageChanged",this.cleanUpBalloons),this.on(window,"blur",this.setWindowBlurredFlag),this.on(document,"uiBalloonAnimationRequested",this.requestAnimation.bind(this,!1))}),this.before("teardown",function(){this.cleanUpBalloons()})}var n=i(10),o=i(294),a=i(233);t.exports=n(s)}).call(e,i(1))},816:function(t,e,i){function s(){this.defaultAttrs({scribe_element:"balloon_animation",scribeContext:{}}),this.scribeAnimationPlay=function(t,e){var i=e&&e.sourceEventData,s=o.merge(this.attr.scribeContext,{element:this.attr.scribe_element,action:"play"});if(this.scribe(s,i||e),e&&e.autoplay){var n=o.merge(this.attr.scribeContext,{element:this.attr.scribe_element,action:"autoplay"});this.scribe(n,i||e)}},this.after("initialize",function(){this.on(document,"uiBalloonAnimationPlayed",this.scribeAnimationPlay)})}var n=i(10),o=i(25),a=i(40);t.exports=n(s,a)},817:function(t,e,i){function s(){this.defaultAttrs({isLiveClass:"is-live"}),this.updateLiveStatus=function(t,e){this.$node.toggleClass(this.attr.isLiveClass,e.isLive)},this.after("initialize",function(){this.on("dataGetLiveStatus",this.updateLiveStatus)})}var n=i(10);t.exports=n(s)},818:function(t,e,i){function s(){this.attributes({periscopeUserId:null,periscopeLiveStatusPollInterval:null,periscopeLiveStatusMaxPollInterval:null,defaultExpireTimeout:45e3,defaultExpireInterval:12e4});var t=1e3,e="X-Date",i="X-Live-Expire-Timeout",s="X-Client-Expire-Interval";this.getPeriscopeLiveStatus=function(){if(this.isLinkVisible()){var t=Date.now();this.get({url:"https://embed.periscope.tv/id/"+this.attr.periscopeUserId+".json",dataType:"json"}).done(this.successLive.bind(this,t)).fail(this.errorLive.bind(this))}},this.isLinkVisible=function(){return!this.$node.hasClass("u-hidden")},this.successLive=function(t,e,i,s){this.checkifLive(t,e,i,s),this.intervalPeriscopeLive.cancelBackoff()},this.errorLive=function(){this.sendLive(!1),this.intervalPeriscopeLive.backoff(this.attr.periscopeLiveStatusMaxPollInterval,2)},this.isLive=function(t,e,i,s,n,o){return!!e&&i-e<s&&t-o<n},this.checkifLive=function(n,o,a,r){var l=Date.now(),h=o.live_at*t,c=new Date(r.getResponseHeader(e)),d=r.getResponseHeader(i)*t||this.attr.defaultExpireTimeout,u=r.getResponseHeader(s)*t||this.attr.defaultExpireInterval;this.sendLive(this.isLive(l,h,c,d,u,n))},this.sendLive=function(t){this.trigger("dataGetLiveStatus",{isLive:t})},this.clearInterval=function(){o.clearInterval(this.intervalPeriscopeLive),this.intervalPeriscopeLive=null},this.after("initialize",function(){this.on(document,"dataPollPeriscopeLive uiSwiftLoaded uiPageChanged",this.getPeriscopeLiveStatus),this.intervalPeriscopeLive=o.setIntervalEvent("dataPollPeriscopeLive",this.attr.periscopeLiveStatusPollInterval),this.on(document,"uiBeforePageChanged",this.clearInterval)})}var n=i(10),o=i(9),a=i(226);t.exports=n(s,a)},819:function(t,e,i){function s(){this.defaultAttrs({periscopeProfileLinkSelector:".ProfileHeaderCard-periscopeProfileText",scribeContext:{component:"periscope_profile"}}),this.scribePeriscopeLinkAction=function(t,e,i){var s=i&&i.sourceEventData,n=a.merge(this.attr.scribeContext,{action:t});this.scribe(n,s||i)},this.after("initialize",function(){this.on(document,"uiPageChanged uiSwiftLoaded",this.scribePeriscopeLinkAction.bind(this,"impression")),this.on("click",{periscopeProfileLinkSelector:this.scribePeriscopeLinkAction.bind(this,"click")})})}var n=i(10),o=i(40),a=i(25);t.exports=n(s,o)},820:function(t,e,i){function s(){this.defaultAttrs({analyticsLinkSelector:".TweetImpressionsModule-analyticsLink a"}),this.after("initialize",function(){this.on("click",{analyticsLinkSelector:this.analyticsLinkSelectorClicked})}),this.analyticsLinkSelectorClicked=function(){this.scribe({component:"tweet_impression_module",element:"analytics_link",action:"click"})}}var n=i(10),o=i(40);t.exports=n(s,o)},821:function(t,e,i){var s=i(719),n=i(822),o=i(25);t.exports=function(t){s(t),n(o.merge(t,{useDeduping:!0}),"swift_profile_tweets")}},822:function(t,e,i){function s(t,e){o.attachTo(document,{containerSelector:"#timeline"}),a.attachTo("#timeline",{keepUnrenderedMediaItems:!0,gridMargin:1,gridContainerSelector:".ProfileStreamImageGallery-images",mediaSelector:".ProfileStreamGridImage"}),n(t,t.timeline_url,e,"tweet")}var n=i(823),o=i(353),a=i(832);t.exports=s},823:function(t,e,i){function s(t,e,i,s,m){var p=u.merge(t,{endpoint:e,itemType:s,eventData:{scribeContext:{component:m||s}}});n(u.merge(p,{statsName:i})),o("#timeline",p);var g="home"===p.pageName||"me"===p.pageName||"profile"===p.pageName,v=g?[h]:[];d.mixin.apply(this,v).attachTo("#timeline",p);var b=[];g&&(b=b.concat(l),f.attachTo("#timeline",p)),r.attachTo(document),a.mixin.apply(this,b).attachTo("#timeline",p),c.attachTo("#timeline",p)}var n=i(559),o=i(562),a=i(611),r=i(614),l=i(713),h=i(711),c=i(449),d=i(824),u=i(25),f=i(831);t.exports=s},824:function(t,e,i){function s(){this.defaultAttrs({itemType:"tweet"})}var n=i(591),o=i(608),a=i(825),r=i(826),l=i(829),h=i(830);t.exports=n.mixin(s,o,r,l,h,a)},825:function(t,e,i){(function(e){t.exports=function(){this.removeSeparatedModule=function(t){var i=e(t.target);this.trigger(i,"uiRemoveClassBeforePromptbird"),i.remove()},this.after("initialize",function(){this.on(document,"uiRemoveSeparatedModule",this.removeSeparatedModule)})}}).call(e,i(1))},826:function(t,e,i){(function(e){var s=i(20),n=i(827);t.exports=function(){s.mixin(this,[n]),this.defaultAttrs({conversationModuleSelector:".conversation-module",hasConversationModuleSelector:".tweet.has-conversation-module",conversationHeaderSelector:".conversation-header",uncollapseSelector:"a.uncollapse",conversationRootSelector:"li.conversation-root",repliesCountSelector:".replies-count",otherRepliesSelector:".other-replies",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",repliesCountClass:"replies-count",visuallyHiddenClass:"visuallyhidden",conversationRootClass:"conversation-root",conversationTweetsSelector:".conversation-tweet-item,.original-tweet-item",conversationFirstVisibleTweetClass:"conversation-first-visible-tweet",originalTweetClass:"original-tweet",conversationItemsSelector:".conversation-header, .conversation-tweet-item, .original-tweet-item, .missing-tweets-bar",toBeRemovedClass:"to-be-removed",unselectableStreamItemClass:"js-unselectable-stream-item",firstNavigableStreamItemClass:"first-navigable-stream-item",lastNavigableStreamItemClass:"last-navigable-stream-item",collapsedRootClass:"collapsed-root",collapsedAncestorsClass:"collapsed-ancestors",restoreConversationDelay:100,collapseOverMinimum:20}),this.dedupAndCollapse=function(t,e){this.dedupConversations(),this.collapseConversationTweets(e&&e.tweets)},this.dedupAndCollapseNew=function(t,e){this.dedupConversations(),e&&e.tweets&&e.tweets.length<=this.attr.collapseOverMinimum?this.collapseFirstConversationTweets(this.attr.collapseOverMinimum):this.collapseConversationTweets(e&&e.tweets)},this.dedupConversations=function(){var t=this.select("conversationModuleSelector");t.each(function(t,i){if(i.parentNode){var s=e(i).attr("data-ancestors").split(","),n=this.$node.find(this.idsToSelector(s)).filter(function(t,i){return!e(i).parent().hasClass("recap-module")});n.find(this.attr.conversationModuleSelector).addClass(this.attr.toBeRemovedClass);var o=this;n.slideUp({queue:!1,duration:"fast",complete:function(){var t=e(this);t.hasClass(o.attr.selectedClass)&&o.trigger("uiSelectNext",{maintainPosition:!0}),requestAnimationFrame(function(){o.trigger(t,"uiWillRemoveStreamItem"),t.remove()})}})}}.bind(this))},this.idToSelector=function(t){return this.attr.topLevelStreamItemSelector+"#stream-item-tweet-"+t},this.idsToSelector=function(t){return t.map(this.idToSelector.bind(this)).join(",")},this.collapseFirstConversationTweets=function(t){var e=this.$node.find(this.attr.streamItemSelector).slice(0,t).find(this.attr.conversationModuleSelector);this.collapseConversations(e)},this.collapseConversationTweets=function(t){var e;if(t){var i=t.map(function(t){return t.tweetId}),s=this.$node.find(this.idsToSelector(i));e=s.find(this.attr.conversationModuleSelector)}else e=this.select("conversationModuleSelector");this.collapseConversations(e)},this.collapseConversations=function(t){var i={},s={};t.get().reverse().forEach(function(t){var n=e(t),o=n.attr("data-ancestors"),a=n.find(".conversation-root .tweet").attr("data-item-id");n.hasClass("dont-collapse")||(i[o]?this.collapseAncestors(n):s[a]&&this.collapseRoot(n)),n.hasClass(this.attr.toBeRemovedClass)||(i[o]=!0,s[a]=!0)}.bind(this))},this.uncollapseConversationHandler=function(t,e){t.preventDefault();var i=this.conversationModuleFromEvent(t);this.uncollapseConversation(i),i.addClass("dont-collapse")},this.uncollapseConversation=function(t){t.find(".conversation-tweet-item.conversation-ancestor:visible").length>0?this.expandRoot(t):this.expandAncestors(t)},this.setSelectionToRoot=function(t){this.trigger(t.find(".conversation-root.conversation-tweet-item"),"uiSelectItem",{setFocus:!0})},this.expandAncestors=function(t){var e=t.find(this.attr.conversationHeaderSelector),i=t.find(".conversation-tweet-item, .missing-tweets-bar"),s=t.find(".original-tweet-item");this.slideAndFadeContent(e,i,s,function(){t.removeClass(this.attr.collapsedAncestorsClass).removeClass(this.attr.collapsedRootClass),this.setSelectionToRoot(t)}.bind(this))},this.expandRoot=function(t){var e=t.find(this.attr.conversationHeaderSelector),i=t.find(".conversation-tweet-item.conversation-root, .missing-tweets-bar"),s=t.find(".conversation-tweet-item.conversation-ancestor:not(.conversation-root):first");0===s.length&&(s=t.find(".original-tweet-item")),this.slideAndFadeContent(e,i,s,function(){this.setSelectionToRoot(t),t.removeClass(this.attr.collapsedAncestorsClass).removeClass(this.attr.collapsedRootClass)}.bind(this))},this.collapseAncestors=function(t){var e=t.find(".conversation-tweet-item, .missing-tweets-bar"),i=t.find(this.attr.conversationHeaderSelector),s=t.find(".original-tweet-item");this.slideAndFadeContent(e,i,s),t.addClass(this.attr.collapsedAncestorsClass)},this.collapseRoot=function(t){var e=t.find(".conversation-tweet-item.conversation-root, .missing-tweets-bar"),i=t.find(this.attr.conversationHeaderSelector),s=t.find(".conversation-tweet-item.conversation-ancestor:not(.conversation-root):first");0===s.length&&(s=t.find(".original-tweet-item")),this.slideAndFadeContent(e,i,s),1===t.find(".conversation-tweet-item").length?t.addClass(this.attr.collapsedAncestorsClass):t.addClass(this.attr.collapsedRootClass)},this.updateConversationItemClasses=function(t){var i=e(t.target),s=i.find(this.attr.conversationItemsSelector);s.removeClass(this.attr.unselectableStreamItemClass),s.removeClass(this.attr.firstNavigableStreamItemClass),s.removeClass(this.attr.lastNavigableStreamItemClass),s.filter(":hidden").addClass(this.attr.unselectableStreamItemClass);var n=s.filter(":visible");n.first().addClass(this.attr.firstNavigableStreamItemClass),n.last().addClass(this.attr.lastNavigableStreamItemClass),i.find(this.attr.conversationTweetsSelector).removeClass(this.attr.conversationFirstVisibleTweetClass).filter(":visible").first().addClass(this.attr.conversationFirstVisibleTweetClass)},this.conversationModuleFromEvent=function(t){return e(t.target).closest(this.attr.conversationModuleSelector)},this.after("initialize",function(){this.on(document,"uiHasInjectedOldTimelineItems",this.dedupAndCollapse),this.on(document,"uiHasInjectedNewTimeline",this.dedupAndCollapseNew),this.on("click",{uncollapseSelector:this.uncollapseConversationHandler}),this.on("uiShortcutEnter",{conversationHeaderSelector:this.uncollapseConversationHandler}),this.on("uiUncollapseConversation",this.uncollapseConversationHandler),this.on("uiConversationModuleUpdated",this.updateConversationItemClasses),this.dedupAndCollapse()})}}).call(e,i(1))},827:function(t,e,i){(function(e){function s(){this.defaultAttrs({animationTime:200}),this.slideAndFadeContent=function(t,e,i,s){if(!t.is(":hidden")){var o=this.getCombinedHeight(t);t.hide(),e.show();var a=this.getCombinedHeight(e);this.setAbsolutePosition(e),e.hide(),t.show(),this.setAbsolutePosition(t),i.css("paddingTop",o),t.fadeOut(n(this.attr.animationTime)),e.fadeIn(n(this.attr.animationTime)),i.animate({paddingTop:a},n(this.attr.animationTime),function(){this.resetCss(t),this.resetCss(e),this.resetCss(i),this.trigger(i.closest(this.attr.conversationModuleSelector),"uiConversationModuleUpdated"),s&&s()}.bind(this))}},this.getCombinedHeight=function(t){var i=0;return t.each(function(){i+=e(this).outerHeight()}),i},this.setAbsolutePosition=function(t){t.get().reverse().forEach(function(t){var i=e(t),s=i.width(),n=i.height();i.css({position:"absolute",top:i.position().top
}),i.width(s),i.height(n)})},this.resetCss=function(t){var e={position:"",top:"",width:"",height:"",paddingTop:""};t.css(e)}}var n=i(828);t.exports=s}).call(e,i(1))},828:function(t,e,i){var s=i(233);t.exports=function(t){var e=s.fromQuery(location).multiplier,i=window.DEBUG.multiplier||e||1;return t*i}},829:function(t,e,i){(function(e){var s=i(20),n=i(827);t.exports=function(){s.mixin(this,[n]),this.defaultAttrs({unchosenActionClass:"unchosen-action",dismissedModuleClass:"dismissed",dismissibleSelector:".dismissible-content",dismissModuleSelector:".dismiss-module",feedbackActionClickSelector:".dropdown .action-prompt",feedbackActionSelector:".dismiss-module .feedback-action",undoActionSelector:".dismissed-module .undo-action"}),this.getStreamItemFromEvent=function(t){return e(t.target).closest(this.attr.topLevelStreamItemSelector)},this.getSuggestionInfoFromStreamItem=function(t){var e=t.attr("data-suggestion-json");return e&&JSON.parse(e)},this.suggestionFeedback=function(t,e,i){var s=this.getSuggestionInfoFromStreamItem(t),n=e.attr("data-feedback-type");this.trigger("uiSuggestionFeedback",{suggestionInfo:s,feedbackType:n,undo:i})},this.selectAction=function(t,i){var s=e(t.target).closest(this.attr.feedbackActionClickSelector),n=s.attr("data-feedback-type"),o=this.getStreamItemFromEvent(t);o.addClass(this.attr.dismissedModuleClass),this.slideAndFadeContent(o.find(this.attr.dismissibleSelector),o.find(this.attr.dismissModuleSelector),o);var a=o.find(this.attr.feedbackActionSelector);a.each(function(t,i){var s=e(i);s.toggleClass(this.attr.unchosenActionClass,s.attr("data-feedback-type")!==n)}.bind(this)),this.suggestionFeedback(o,s,!1)},this.undoSelectAction=function(t,i){var s=e(t.target).closest(this.attr.feedbackActionSelector),n=this.getStreamItemFromEvent(t);n.removeClass(this.attr.dismissedModuleClass),this.slideAndFadeContent(n.find(this.attr.dismissModuleSelector),n.find(this.attr.dismissibleSelector),n),n.find(this.attr.feedbackActionSelector).removeClass(this.attr.unchosenActionClass),this.suggestionFeedback(n,s,!0)},this.after("initialize",function(){this.on("click",{feedbackActionClickSelector:this.selectAction,undoActionSelector:this.undoSelectAction})})}}).call(e,i(1))},830:function(t,e,i){(function(e){var s=i(40),n=i(20);t.exports=function(){n.mixin(this,[s]),this.defaultAttrs({messageStreamItemSelector:".MessageStreamItem",dismissButtonSelector:".MessageStreamItem .Icon--close.js-dismiss",dismissSelector:".MessageStreamItem .js-dismiss",primaryActionSelector:".MessageStreamItem .js-primary-action",secondaryActionSelector:".MessageStreamItem .js-secondary-action"}),this.dismissMessage=function(t){this.scribe({component:this.getScribeComponent(t),action:"dismiss"});var e=this.getStreamItem(t);e.fadeOut(function(){e.remove()})},this.scribeDismissButton=function(t){this.scribeClick(t,"dismiss")},this.scribePrimaryAction=function(t){this.scribeClick(t,"primary_action")},this.scribeSecondaryAction=function(t){this.scribeClick(t,"secondary_action")},this.scribeClick=function(t,e){this.scribe({component:this.getScribeComponent(t),element:e,action:"click"})},this.getScribeComponent=function(t){var e=this.getStreamItem(t);return e.attr("data-component-context")},this.getStreamItem=function(t){return e(t.target).closest(this.attr.messageStreamItemSelector)},this.after("initialize",function(){this.on("click",{dismissButtonSelector:this.scribeDismissButton,dismissSelector:this.dismissMessage,primaryActionSelector:this.scribePrimaryAction,secondaryActionSelector:this.scribeSecondaryAction})})}}).call(e,i(1))},831:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({promotedTweetSelector:".promoted-tweet:not(.scribed)",promotedTweetForImpressionsSelector:".promoted-tweet:not(.presented)",scrollThrottle:100}),this.processTweets=function(){var t=a.getGlobalNavHeight(),i=this.$node.find(this.attr.promotedTweetSelector),s=this.$node.find(this.attr.promotedTweetForImpressionsSelector),n=i.filter(function(i,s){return a.isContainedInViewport(this.$window,e(s),t,0)}.bind(this)),o=s.filter(function(i,s){return a.isPartiallyContainedInViewport({$container:this.$window,$element:e(s),topThreshold:t,fractionInViewport:0})}.bind(this));if(o.length){o.addClass("presented");var r=o.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweets1pxInViewport",{items:r})}if(n.length){n.addClass("scribed");var l=n.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweetsInViewport",{items:l})}},this.after("initialize",function(t,i){this.$window=e(window),i&&i.inOverlay?this.on(t,"scroll resize",o.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)):this.on(document,"scroll resize",o.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)),this.on(document,"uiSwiftLoaded uiPageVisible uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems",this.processTweets)})}var n=i(10),o=i(25),a=i(74);t.exports=n(s)}).call(e,i(1))},832:function(t,e,i){function s(){this.defaultAttrs({viewAllSelector:".ProfilePage-moduleLink",imageSelector:".media-overlay"}),this.after("initialize",function(){this.on("click",{viewAllSelector:function(t){this.trigger(this.select("imageSelector")[0],"uiOpenGallery",{title:"Gallery",inOverlay:this.attr.inOverlay})}})})}var n=i(10),o=(i(22),i(833));t.exports=n(s,o)},833:function(t,e,i){(function(e){function s(){this.defaultAttrs({scribeMediaGridResults:!1,mediaGalleryScribeComponent:"media_gallery",keepUnrenderedMediaItems:!1,numMediaItemsToKeep:30,gridNumRowsLimit:2,gridRowHeight:180,gridMargin:1.5,gridRowRatio:2.5,gridPanoramaRatio:3,gridContainerSelector:"#stream-items-id",mediaSelector:".AdaptiveStreamGridImage",mediaOverlaySelector:".media-overlay",requiredAttrsForGallery:["data-resolved-url-large","data-source-url","data-tweet-id","data-status-id","data-height","data-width","class"]}),this.renderAll=function(){clearTimeout(this.renderDelay),this.renderDelay=setTimeout(this.render.bind(this),20)},this.render=function(){this.currentRow=this.getCurrentRow();var t=this.getUnprocessedMedia();if(!t.length)return void this.scribeResults();for(var e=0,i=0,s=[],n=0;n<t.length;n++){if(this.attr.gridNumRowsLimit&&this.currentRow>this.attr.gridNumRowsLimit){if(this.attr.keepUnrenderedMediaItems&&n<this.attr.numMediaItemsToKeep){this.processHiddenMedia(t.eq(n));continue}t.slice(n).remove();break}var o=t.eq(n);!e&&(e=parseInt(o.attr("data-height")));var a=this.scaleGridMedia(o,e);isNaN(a)?o.remove():(i+=a,s.push(o),i/e>=this.attr.gridRowRatio&&(this.renderGridRow(s,i,e),this.currentRow++,this.setCurrentRow(),i=0,e=0,s=[]))}this.renderLastRow(),this.scribeResults()},this.getCurrentRow=function(){var t=parseInt(this.$node.attr("data-processed-rows"));return t?this.currentRow=t:this.currentRow=1,this.currentRow},this.setCurrentRow=function(){this.$node.attr("data-processed-rows",this.currentRow)},this.processHiddenMedia=function(t){var i=this.attr.requiredAttrsForGallery,s=[];e.each(t[0].attributes,function(){this.specified&&i.indexOf(this.name)<0&&s.push(this.name)}),s.forEach(function(e){t.removeAttr(e)}),t.attr("data-grid-processed","true"),t.hide(),t.empty()},this.scaleGridMedia=function(t,e,i){var s=parseInt(t.attr("data-height")),n=parseInt(t.attr("data-width")),o=e/s*n,a=s/n;return n/s>this.attr.gridPanoramaRatio&&(t.attr("data-pano","true"),o=e*this.attr.gridPanoramaRatio,a=1/this.attr.gridPanoramaRatio),t.attr({"scaled-width":o,"height-width-ratio":a}),i&&(t.height(e),t.width(o)),o},this.renderGridRow=function(t,i,s){var n=this.currentGridWidth-t.length*this.attr.gridMargin,o=n/i,a=s*o;e.each(t,function(t,i){var s=e(i),n=parseInt(s.attr("scaled-width"))*o,r=n/this.currentGridWidth;s.height(a),s.width(n),s.attr("scaled-width-ratio",r),s.attr("data-grid-processed","true"),s.addClass("enabled"),0===t&&s.addClass("clear"),1===this.currentRow&&s.addClass("first-row"),s.removeAttr("scaled-width"),this.renderMediaImage(s)}.bind(this))},this.renderLastRow=function(){var t=this.getUnprocessedMedia();t.length&&t.each(function(t,i){var s=e(i);this.scaleGridMedia(s,this.attr.gridRowHeight,!0),this.renderMediaImage(s),s.addClass("enabled")}.bind(this))},this.renderMediaImage=function(t){if(!t.attr("data-loaded")){var e=function(e){this.loadMediaSuccess(t,e)}.bind(this),i=function(){this.loadMediaFail(t)}.bind(this);o.load(t.attr("data-resolved-url-small"),e,i)}},this.loadMediaSuccess=function(t,e){if(t.attr("data-pano")){var i=t.height()/parseInt(t.attr("data-height"))*parseInt(t.attr("data-width"));e.width(i),e.css("margin-left",(t.width()-i)/2)}t.hide().prepend(e).fadeIn(),t.attr("data-loaded",!0)},this.loadMediaFail=function(t){this.markFailedMedia(t),t.remove()},this.markFailedMedia=function(t){var e;if(t.hasClass("clear")){if(e=t.next(this.attr.mediaSelector),!e.length)return}else for(e=t.prev(this.attr.mediaSelector);e.length&&!e.hasClass("clear");)e=e.prev(this.attr.mediaSelector);e.attr("data-grid-processed","false"),e.nextAll(this.attr.mediaSelector).attr("data-grid-processed","false"),e.nextAll(this.attr.mediaSelector).removeClass("clear"),clearTimeout(this.resetTimer),this.resetTimer=setTimeout(this.render.bind(this),50)},this.possiblyResizeMediaDimensions=function(){var t=this.currentGridWidth,e=this.getGridWidth(),i=this.getProcessedMedia();if(e===t||!i.length)return void this.trigger("uiMediaGridDidNotResize");for(var s=0;s<i.length;s++){var n=i.eq(s),o=parseFloat(n.attr("scaled-width-ratio")),a=parseFloat(n.attr("height-width-ratio"));if(!isNaN(o)&&!isNaN(a)){var r=o*e,l=a*r;if(n.attr("data-pano")){var h=n.find("img"),c=h.width()/t*e;h.width(c),h.css("margin-left",(r-c)/2)}n.width(Math.floor(r)),n.height(Math.floor(l))}}this.trigger("uiMediaGridDidResize"),this.currentGridWidth=e},this.getGridWidth=function(){var t=this.select("gridContainerSelector").length&&this.select("gridContainerSelector")[0];return Math.floor(t.getBoundingClientRect().width)},this.getMedia=function(){return this.select("mediaSelector")},this.getProcessedMedia=function(){return this.getMedia().filter('[data-grid-processed="true"]')},this.getUnprocessedMedia=function(){return this.getMedia().filter(':not([data-grid-processed="true"])')},this.getUnscribedMedia=function(){return this.getMedia().filter(':not([data-scribed="true"])[data-grid-processed="true"]')},this.openGallery=function(t){t.preventDefault(),t.stopPropagation();var i=e(t.target).closest(this.attr.mediaSelector),s=i.hasClass("video");this.trigger(t.target,"uiOpenGallery",{title:s?"Video":"Photo"});var n=i.attr("data-url"),o=s?"video":"photo",a={url:n,mediaType:o,scribeContext:{component:this.attr.mediaGalleryScribeComponent}};this.trigger("uiMediaThumbnailClick",a)},this.scribeResults=function(){if(this.attr.scribeMediaGridResults){var t=this.getUnscribedMedia(),i={thumbnails:[],scribeContext:{component:this.attr.mediaGalleryScribeComponent}};e.each(t,function(t,s){i.thumbnails.push(e(s).attr("data-url")),e(s).attr("data-scribed",!0)}),this.trigger("uiMediaGalleryResults",i)}},this.after("initialize",function(){this.select("gridContainerSelector").length&&(this.possiblyResizeMediaDimensions(),this.currentGridWidth=this.getGridWidth(),this.render(),this.on("uiHasInjectedOldTimelineItems",this.renderAll),this.on("click",{mediaOverlaySelector:this.openGallery}),this.on(window,"resize",n.throttle(this.possiblyResizeMediaDimensions.bind(this),100)))})}var n=(i(22),i(25)),o=i(425);t.exports=s}).call(e,i(1))},834:function(t,e,i){(function(e){var s=i(719),n=i(835),o=i(836),a=i(837),r=i(838),l=i(839),h=i(840),c=i(841),d=i(842),u=i(843),f=i(844),m=i(845),p=i(846),g=i(847),v=i(848),b=i(849),S=i(850),w=i(25);t.exports=function(t){s(t),n(w.merge(t,{useDeduping:!0}),"swift_profile_tweets"),t.profile_user&&e(document).trigger("profileVisit",t.profile_user),h.attachTo("#timeline"),c.attachTo(document),d.attachTo("#timeline",{loggedIn:t.loggedIn,eventData:{scribeContext:{component:"user_scroll_bump"}}}),u.attachTo(document),f.attachTo(".ScrollBumpDialog",t,{itemType:"user",eventData:{scribeContext:{component:"scroll_bump_dialog"}}}),m.attachTo(document),t.isCurrentUser&&o.attachTo(".js-empty-timeline"),a.attachTo(".js-profileEmptyTimelineTweetbox",{draftTweetId:"empty_profile_"+t.profile_id+"_"+(t.isCurrentUser?"owner":"viewer"),defaultText:t.isCurrentUser?"":"@"+t.profile_user.screen_name+" ",environment:t.environment,eventData:{scribeContext:{component:"empty_timeline"}}});var i=".ProfileUserList--featuredList";p.attachTo(document,t,{listItemSelector:i,subscribeSelector:".ProfileUserList-subscribeAction",featureListSelector:".js-actionFeatureList",removeFeaturedListFromPageOnUnfeature:!0}),g.attachTo(document,t),v.attachTo(document,t,{scribeContext:{component:"profile_sidebar"}}),S.attachTo(i),b.attachTo(i),r.attachTo(".ProfilePrefilledTweet",{eventData:{scribeContext:{component:"empty_timeline"}}}),l.attachTo(document)}}).call(e,i(1))},835:function(t,e,i){var s=i(823),n=i(353),o=i(690),a=i(691);t.exports=function(t,e){var i="#timeline";n.attachTo(document,{containerSelector:i,viewportThreshold:t.hasVineFilter?0:200}),o.attachTo(i,{eventData:t.eventData}),a.attachTo(i,{page:"profiles"}),s(t,t.timeline_url,e,"tweet")}},836:function(t,e,i){function s(){this.removeNode=function(){this.$node.remove(),o(0)},this.after("initialize",function(){this.on(document,"uiTweetSent",this.removeNode)})}var n=i(10),o=i(580);t.exports=n(s)},837:function(t,e,i){function s(){this.defaultAttrs({preexpandTweetbox:!0,defaultText:""}),this.after("initialize",function(){this.initTweetbox({defaultText:this.attr.defaultText})})}var n=i(10),o=i(394);t.exports=n(o,s)},838:function(t,e,i){function s(){this.defaultAttrs({tweetButtonSelector:".js-tweet-btn",tweetTextSelector:".js-tweet-text"}),this.sendTweet=function(t,e){this.$node.addClass("is-sending"),this.$tweetButton.addClass("disabled"),this.trigger("uiSendPrefilledTweet"),this.trigger("uiSendTweet",{tweetboxId:this.tweetboxId,tweetData:{status:this.tweetText}})},this.handleTweetResponse=function(t){return function(e,i){i.tweetboxId===this.tweetboxId&&t.call(this,e,i)}.bind(this)},this.tweetSent=function(t,e){this.trigger(e.unusual?"uiShowStickyMessage":"uiShowMessage",{message:e.message}),this.trigger("uiTweetSent",e),this.$node.remove()},this.tweetError=function(t,e){this.trigger("uiShowError",{message:e.error||e.message}),this.$node.removeClass("is-sending"),this.$tweetButton.removeClass("disabled")},this.after("initialize",function(){this.$tweetButton=this.select("tweetButtonSelector"),this.tweetText=this.select("tweetTextSelector").text(),this.tweetboxId="prefilled_tweet_"+this.identity,this.on("click",{tweetButtonSelector:this.sendTweet}),this.on(document,"dataTweetSuccess",this.handleTweetResponse(this.tweetSent)),this.on(document,"dataTweetError",this.handleTweetResponse(this.tweetError))})}var n=i(10);t.exports=n(s)},839:function(t,e,i){function s(){this.scribeSendPrefilledTweet=function(t,e){this.scribe({element:"prefilled_tweet",action:"send_tweet"},e)},this.after("initialize",function(){this.on("uiSendPrefilledTweet",this.scribeSendPrefilledTweet)})}var n=i(10),o=i(40);t.exports=n(o,s)},840:function(t,e,i){function s(){this.defaultAttrs({profileCardSelector:".ProfileCard",profileCardHeaderSelector:".ProfileCard-bg",profileCardAvatarSelector:".ProfileCard-avatarLink",profileCardNameSelector:".ProfileNameTruncated",profileCardScreenNameSelector:".ProfileCard-screenname",profileCardBioMentionSelector:".ProfileCard-bio .twitter-atreply",profileCardPromotedBadgeSelector:".ProfileCard-promoted",itemType:"user"}),this.getItemPosition=function(t){return this.select("profileCardSelector").index(t.closest(this.attr.profileCardSelector))},this.handleClick=function(t,e,i){var s=a.merge(this.interactionData(e),{scribeContext:{element:t}});this.trigger(e.target,"uiProfileCardClicked",s),this.trigger(e.target,"uiShowProfileNewWindow",s)},this.after("initialize",function(){this.on("click",{profileCardHeaderSelector:this.handleClick.bind(this,"header_image"),profileCardAvatarSelector:this.handleClick.bind(this,"avatar"),profileCardNameSelector:this.handleClick.bind(this,"name"),profileCardScreenNameSelector:this.handleClick.bind(this,"screen_name"),profileCardBioMentionSelector:this.handleClick.bind(this,"description"),profileCardPromotedBadgeSelector:this.handleClick.bind(this,"promoted_badge")})})}var n=i(10),o=i(36),a=i(25);t.exports=n(s,o)},841:function(t,e,i){(function(e){function s(){this.getComponentTermFromDOM=function(t){return t.closest("[data-component-context]").data("component-context")||"user"},this.scribeProfileCardInteraction=function(t,i){i.scribeContext.action=i.isMentionClick?"mention_click":"profile_click",i.scribeContext.component=this.getComponentTermFromDOM(e(t.target)),this.scribeInteraction(i.scribeContext,i)},this.after("initialize",function(){this.on("uiProfileCardClicked",this.scribeProfileCardInteraction)})}var n=i(10),o=i(39);t.exports=n(s,o)}).call(e,i(1))},842:function(t,e,i){(function(e){function s(){this.defaultAttrs({moreUsersLinkSelector:".js-more-users-link",itemType:"user"}),this.openScrollBumpDialog=function(t,i){var s=e(i.el);this.trigger("uiOpenScrollBumpDialog",{userIds:s.data("more-user-ids").split(",")}),this.trigger("uiScrollBumpViewMoreLinkClicked"),t.preventDefault()},this.after("initialize",function(){this.on("click",{moreUsersLinkSelector:this.openScrollBumpDialog})})}var n=i(10);t.exports=n(s)}).call(e,i(1))},843:function(t,e,i){function s(){this.after("initialize",function(){this.scribeOnEvent("uiScrollBumpViewMoreLinkClicked",{element:"view_more_link",action:"click"})})}var n=i(10),o=i(40);t.exports=n(o,s)},844:function(t,e,i){(function(e){function s(){this.defaultAttrs({itemType:"user",contentSelector:".js-users-list",slideDuration:300,top:47,closeOnOtherDialogOpened:!0}),this.openDialog=function(t,e){this.setContent(""),this.$body.stop(),this.open(),this.trigger("uiGetUsers",{ids:e.userIds})},this.insertUsers=function(t,e){var i=this.$body[0].scrollHeight;this.setContent(e.html);var s=Math.min(this.$body[0].scrollHeight,this.maxContentHeight());this.$body.height(i),this.slideInContent(s)},this.slideInContent=function(t){this.$body.animate({height:t},{duration:this.attr.slideDuration,complete:function(){this.trigger(this.$dialog,"uiDialogContentChanged")}.bind(this)})},this.setContent=function(t){this.$body.css("height",""),this.$node.toggleClass("has-content",!!t),this.$content.html(t)},this.showError=function(t,i){this.setContent(e("<p>").addClass("error").html(i.message))},this.maxContentHeight=function(t,e){return this.$window.height()-2*this.attr.top-this.$header.outerHeight()},this.after("initialize",function(){this.$window=e(window),this.$header=this.select("modalHeaderSelector"),this.$body=this.select("modalBodySelector"),this.$content=this.select("contentSelector"),this.on(document,"uiOpenScrollBumpDialog",this.openDialog),this.on(document,"dataUsersSuccess",this.insertUsers),this.on(document,"dataUsersError",this.showError)})}var n=i(10),o=i(59),a=i(395),r=i(392);t.exports=n(s,o,a,r)}).call(e,i(1))},845:function(t,e,i){(function(e){function s(){this.getUsers=function(t,e){var i={ids:e.ids};this.get({url:"/i/users/html",data:i,eventData:e,success:"dataUsersSuccess",error:"dataUsersError"})},this.getMoreBlockedUserIds=function(t,i){var s;s=i&&i.cursor?i.cursor:-1,this.prevCursor=s;var n={max_position:s,block_type:i.blockType},o=function(t){this.trigger("dataGetMoreBlockedUserIdsSuccess",e.extend({},t,{prevCursor:this.prevCursor}))};this.get({url:"/i/users/blocked_ids",data:n,eventData:i,success:o.bind(this),error:"dataGetMoreBlockedUserIdsError"})},this.getUserNameList=function(t,e){var i={ids:e.ids,filter_blocked_users:e.filterBlockedUsers};this.post({url:"/i/users/html/name_list",data:i,eventData:e,success:"dataUserNameListSuccess",error:"dataUserNameListError"})},this.after("initialize",function(){this.on("uiGetUsers",this.getUsers),this.on("uiGetMoreBlockedUserIds",this.getMoreBlockedUserIds),this.on("uiGetUserNameList",this.getUserNameList)})}var n=i(10),o=i(226);t.exports=n(s,o)}).call(e,i(1))},846:function(t,e,i){(function(e){function s(){this.defaultAttrs({win:window,listItemSelector:".list-follow-card",listDataAttr:"data-list-id",editSelector:".js-edit-list-action",subscribeSelector:".js-subscribe-list-action",subscribeClass:"is-subscribed",subscribeClassesForToggle:"is-subscribed js-unfollow-list-action",unsubscribeClassesForToggle:"is-unsubscribed js-follow-list-action",featureListSelector:".js-feature-list-action",featuredListClass:"is-featured",unfeaturedListClass:"is-unfeatured",featureClassesForToggle:"is-featured js-unpin-list-action",unfeatureClassesForToggle:"is-unfeatured js-pin-list-action",deleteSelector:".js-delete-list-action",rerenderListItem:!1,redirectToListPermalinkOnEdit:!1,removeFeaturedListFromPageOnUnfeature:!1}),this.handleAction=function(t,i,s){return function(n,a){var r,l=this.findListByProximity(e(n.target)),h={list_id:this.getListId(l)};t===this.attr.subscribeClass?(r=l.hasClass(this.attr.subscribeClass)?"unsubscribe":"subscribe",h=o.merge(h,{action:r})):t===this.attr.featuredListClass&&(r=l.hasClass(this.attr.featuredListClass)?"unfeature":"feature",h=o.merge(h,{action:r}));var c=l.hasClass(t)?i:s;this.trigger(l,c,h),t===this.attr.subscribeClass&&this.setSubscribeState(n,{sourceEventData:h})}.bind(this)},this.handleTransition=function(t,e){return function(i,s){var n=this.findListFromEventData(s);n[t](e)}.bind(this)},this.findListFromEventData=function(t){var e=t.list_id||t.sourceEventData.list_id;return this.findListById(this.$node,e)},this.findListById=function(t,e){var i=this.attr.listItemSelector+"["+this.attr.listDataAttr+"="+e+"]";return t.find(i)},this.findListByProximity=function(t){return t.closest(this.attr.listItemSelector)},this.getListId=function(t){return t.attr(this.attr.listDataAttr)},this.updateFollowCard=function(t,e){e.follow_card_html&&this.select("listItemSelector").html(e.follow_card_html)},this.triggerEditListDialog=function(){this.trigger("uiOpenUpdateListDialog",{})},this.setSubscribeStateOnSuccess=function(t,e){this.setSubscribeState(t,e),this.attr.rerenderListItem&&this.trigger("uiRefreshFollowCard",e)},this.setSubscribeState=function(t,e){"unsubscribe"===e.sourceEventData.action?this.setListStateToUnsubscribed(t,e):this.setListStateToSubscribed(t,e)},this.revertSubscribeState=function(t,e){"unsubscribe"===e.sourceEventData.action?this.setListStateToSubscribed(t,e):this.setListStateToUnsubscribed(t,e)},this.setListStateToSubscribed=function(t,e){var i=this.select("subscribeSelector"),s=this.findListFromEventData(e);s.addClass(this.attr.subscribeClass),i.removeClass(this.attr.unsubscribeClassesForToggle).addClass(this.attr.subscribeClassesForToggle)},this.setListStateToUnsubscribed=function(t,e){var i=this.select("subscribeSelector"),s=this.findListFromEventData(e);s.removeClass(this.attr.subscribeClass),i.removeClass(this.attr.subscribeClassesForToggle).addClass(this.attr.unsubscribeClassesForToggle)},this.refreshList=function(t,e){e&&(this.attr.redirectToListPermalinkOnEdit&&e.slug?this.attr.win.location="/"+this.attr.screenName+"/lists/"+e.slug:this.reloadPage())},this.reloadPage=function(t,e){this.attr.win.location.reload(!0)},this.triggerDelete=function(t,e){this.trigger("uiDeleteList",{list_id:this.attr.list_id})},this.redirectToLists=function(){this.attr.win.location="/"+this.attr.screenName+"/lists"},this.confirmUserFeatureListToggle=function(t){return function(e){e.stopImmediatePropagation(),this.trigger(e.target,"uiOpenConfirmDialog",{titleText:t?"Pin this list on your profile page":"Unpin this list from your profile",bodyText:t?"This will replace any previously pinned list. Are you sure?":"This will remove any previously pinned list. Are you sure?",cancelText:"Cancel",submitText:t?"Pin":"Unpin",action:"UserFeatureListToggle"})}},this.triggerDeleteListDialog=function(){this.trigger("uiOpenConfirmDialog",{titleText:"Are you sure you want to delete this list?",cancelText:"No",submitText:"Yes",action:"DeleteList"})},this.toggledFeaturedList=function(t,e){var i=this.findListFromEventData(e),s=i.find(this.attr.featureListSelector);"unfeature"===e.sourceEventData.action?this.attr.removeFeaturedListFromPageOnUnfeature?i.slideUp("300",function(){i.remove()}):(i.removeClass(this.attr.featuredListClass),s.removeClass(this.attr.featureClassesForToggle).addClass(this.attr.unfeatureClassesForToggle)):(this.unfeatureOtherLists(t,e),i.addClass(this.attr.featuredListClass),s.removeClass(this.attr.unfeatureClassesForToggle).addClass(this.attr.featureClassesForToggle)),this.showUserFeaturedListToggledMessage(t,e)},this.unfeatureOtherLists=function(t,e){this.select("listItemSelector").find(this.attr.featureListSelector).removeClass(this.attr.featuredListClass).addClass(this.attr.unfeaturedListClass)},this.showUserFeaturedListToggledMessage=function(t,e){this.trigger("uiShowStickyMessage",e)},this.after("initialize",function(){this.on("click",{editSelector:this.triggerEditListDialog,deleteSelector:this.triggerDeleteListDialog,subscribeSelector:this.handleAction(this.attr.subscribeClass,"uiUnsubscribeFromList","uiSubscribeToList"),featureListSelector:this.handleAction(this.attr.featuredListClass,"uiNeedUserUnfeatureListDialog","uiNeedUserFeatureListDialog")}),this.on(document,"uiUserFeatureListToggleConfirm",this.handleAction(this.attr.featuredListClass,"uiDidUserUnfeatureList","uiDidUserFeatureList")),this.on(document,"uiDidUserFeatureList dataFailedToUserUnfeatureList",this.handleTransition("addClass",this.attr.featuredListClass)),this.on(document,"uiDidUserUnfeatureList dataFailedToUserFeatureList",this.handleTransition("removeClass",this.attr.featuredListClass)),this.on(document,"uiNeedUserFeatureListDialog",this.confirmUserFeatureListToggle(!0)),this.on(document,"uiNeedUserUnfeatureListDialog",this.confirmUserFeatureListToggle(!1)),this.on(document,"dataDidUserFeatureList dataDidUserUnfeatureList",this.toggledFeaturedList),this.on(document,"uiDeleteListConfirm",this.triggerDelete),this.on(document,"dataDidUpdateList",this.refreshList),this.on(document,"dataGotFollowCard",this.updateFollowCard),this.on(document,"dataDidSubscribeToList",this.setSubscribeStateOnSuccess),this.on(document,"dataFailedToSubscribeToList",this.revertSubscribeState),this.on(document,"dataDidDeleteList",this.redirectToLists)})}var n=i(10),o=i(25),a=(i(22),n(s));t.exports=a}).call(e,i(1))},847:function(t,e,i){function s(){this.defaultAttrs({successFromEndpoints:{update:"dataDidUpdateList","subscribe.json":"dataDidSubscribeToList","unsubscribe.json":"dataDidSubscribeToList","destroy.json":"dataDidDeleteList",feature:"dataDidUserFeatureList",unfeature:"dataDidUserUnfeatureList"},errorsFromEndpoints:{update:"dataFailedToUpdateList","subscribe.json":"dataFailedToSubscribeToList","unsubscribe.json":"dataFailedToSubscribeToList","destroy.json":"dataFailedToDeleteList",feature:"dataFailedToUserFeatureList",unfeature:"dataFailedToUserUnfeatureList"}}),this.takeAction=function(t,e,i){var s=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(this.attr.successFromEndpoints[t],e)},n=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(this.attr.errorsFromEndpoints[t],e)},o={url:"/i/lists/"+t,data:i,eventData:i,success:s.bind(this),error:n.bind(this),retryIfUnavailable:!0};this.post(o)},this.hitEndpoint=function(t){return this.takeAction.bind(this,t)},this.refreshFollowCard=function(t,e){var i=this.followCardEndpoint;this.get({url:i,data:{},eventData:e,success:"dataGotFollowCard",error:"dataFailedToGetFollowCard"})},this.after("initialize",function(){this.followCardEndpoint=this.attr.follow_card_url,this.on(document,"uiRefreshFollowCard",this.refreshFollowCard),this.on("uiUpdateList",this.hitEndpoint("update")),this.on("uiSubscribeToList",this.hitEndpoint("subscribe.json")),this.on("uiUnsubscribeFromList",this.hitEndpoint("unsubscribe.json")),this.on("uiDeleteList",this.hitEndpoint("destroy.json")),this.on("uiDidUserFeatureList",this.hitEndpoint("feature")),this.on("uiDidUserUnfeatureList",this.hitEndpoint("unfeature"))})}var n=i(10),o=i(226),a=n(s,o);t.exports=a},848:function(t,e,i){function s(){this.scribeSubscribeOrUnsubscribe=function(t,e){if(e.sourceEventData&&e.sourceEventData.action){var i=o.merge(this.attr.scribeContext,{element:"subscribe_button",action:e.sourceEventData.action});this.scribe(i,e)}},this.scribeUserFeatureList=function(t,e){if(e.sourceEventData&&e.sourceEventData.action){var i=o.merge(this.attr.scribeContext,{element:"feature_button",action:e.sourceEventData.action});this.scribe(i,e)}},this.after("initialize",function(){this.on(document,"dataDidSubscribeToList",this.scribeSubscribeOrUnsubscribe),this.on(document,"dataDidUserFeatureList",this.scribeUserFeatureList),this.on(document,"dataDidUserUnfeatureList",this.scribeUserFeatureList)})}var n=i(10),o=i(25),a=i(40);t.exports=n(s,a)},849:function(t,e,i){function s(){this.defaultAttrs({userAvatarSelector:".ProfileUserList-facepileItem .Avatar",userListPermalinkSelector:".ProfileUserList-permalink",userListUserCountSelector:".ProfileUserList-userCountLink",userListEditSelector:".ProfileUserList-editAction",userListUnfeatureSelector:".ProfileUserList-removeAction",userListSubscribeSelector:".ProfileUserList-subscribeAction.is-unsubscribed",userListUnsubsribeSelector:".ProfileUserList-subscribeAction.is-subscribed",itemType:"user"}),this.profileFeaturedListAvatarClick=function(t,e){this.trigger("uiProfileFeaturedListAvatarClick")},this.profileFeaturedListPermalinkClick=function(t,e){this.trigger("uiProfileFeaturedListPermalinkClick")},this.profileFeaturedListUserCountClick=function(t,e){this.trigger("uiProfileFeaturedListUserCountClick")},this.profileFeaturedListEditClick=function(t,e){this.trigger("uiProfileFeaturedListEditClick")},this.profileFeaturedListUnfeatureClick=function(t,e){this.trigger("uiProfileFeaturedListUnfeatureClick")},this.profileFeaturedListSubscribeClick=function(t,e){this.trigger("uiProfileFeaturedListSubscribeClick")},this.profileFeaturedListUnsubscribeClick=function(t,e){this.trigger("uiProfileFeaturedListUnsubscribeClick")},this.after("initialize",function(){this.trigger("uiHasProfileFeaturedList"),this.on("click",{userAvatarSelector:this.profileFeaturedListAvatarClick,userListPermalinkSelector:this.profileFeaturedListPermalinkClick,userListUserCountSelector:this.profileFeaturedListUserCountClick,userListEditSelector:this.profileFeaturedListEditClick,userListUnfeatureSelector:this.profileFeaturedListUnfeatureClick,userListSubscribeSelector:this.profileFeaturedListSubscribeClick,userListUnsubsribeSelector:this.profileFeaturedListUnsubscribeClick})})}var n=i(10),o=i(392),a=n(s,o);t.exports=a},850:function(t,e,i){function s(){this.defaultAttrs({scribeContext:{component:"profile_sidebar"}}),this.scribeProfileFeaturedList=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"featured_list",action:"impression"});this.scribe(i,e)},this.scribeProfileFeaturedListAvatarClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"featured_list_avatar",action:"click"});this.scribe(i,e)},this.scribeProfileFeaturedListPermalinkClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"featured_list_permalink",action:"click"});this.scribe(i,e)},this.scribeProfileFeaturedListUserCountClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"featured_list_user_count",action:"click"});this.scribe(i,e)},this.scribeProfileFeaturedListEditClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"featured_list_edit",action:"click"});this.scribe(i,e)},this.scribeProfileFeaturedListUnfeatureClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"featured_list_unfeature",action:"click"});this.scribe(i,e)},this.scribeProfileFeaturedListSubscribeClick=function(t,e){
var i=o.merge(this.attr.scribeContext,{element:"featured_list_subscribe",action:"click"});this.scribe(i,e)},this.scribeProfileFeaturedListUnsubscribeClick=function(t,e){var i=o.merge(this.attr.scribeContext,{element:"featured_list_unsubscribe",action:"click"});this.scribe(i,e)},this.after("initialize",function(){this.on("uiHasProfileFeaturedList",this.scribeProfileFeaturedList),this.on("uiProfileFeaturedListAvatarClick",this.scribeProfileFeaturedListAvatarClick),this.on("uiProfileFeaturedListPermalinkClick",this.scribeProfileFeaturedListPermalinkClick),this.on("uiProfileFeaturedListUserCountClick",this.scribeProfileFeaturedListUserCountClick),this.on("uiProfileFeaturedListEditClick",this.scribeProfileFeaturedListEditClick),this.on("uiProfileFeaturedListUnfeatureClick",this.scribeProfileFeaturedListUnfeatureClick),this.on("uiProfileFeaturedListSubscribeClick",this.scribeProfileFeaturedListSubscribeClick),this.on("uiProfileFeaturedListUnsubscribeClick",this.scribeProfileFeaturedListUnsubscribeClick)})}var n=i(10),o=i(25),a=i(40),r=n(s,a);t.exports=r},851:function(t,e,i){var s=i(719),n=i(835),o=i(25);t.exports=function(t){s(t),n(o.merge(t,{useDeduping:!0}))}},852:function(t,e,i){var s=i(719),n=i(835);t.exports=function(t){s(t),n(t,"swift_favorites_timeline")}},853:function(t,e,i){var s=i(719),n=i(854),o=i(856),a=i(857),r=i(858),l=i(840),h=i(841),c=i(859);t.exports=function(t){s(t),n(t),o.attachTo(".GridTimeline",t,{userItemSelector:"div.js-actionable-user",streamUserItemSelector:".js-stream-item",followerActionsSelector:".js-acceptDeclineActions",profileActionsSelector:".js-userActions",acceptFollowerSelector:".js-actionAccept",declineFollowerSelector:".js-actionDeny"}),a.attachTo(document,t),r.attachTo(document),l.attachTo(".GridTimeline"),h.attachTo(document),c.attachTo(document)}},854:function(t,e,i){function s(t){n({endpoint:t.timeline_url});var e=a.mixin(r,f,l,h,c,d,u);o.attachTo(document,t),e.attachTo(".GridTimeline",t,{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items",streamUserSelector:".GridTimeline-items .js-actionable-user",disableProfilePopup:null==t.disableProfilePopup||t.disableProfilePopup,selectedClass:"is-selected",selectedSelector:".js-stream-item.is-selected",firstItemSelector:".js-stream-item:first-child",profileCardSelector:".ProfileCard",itemType:"user",eventData:{scribeContext:{component:"user"}}})}var n=i(559),o=i(581),a=i(592),r=i(599),l=i(392),h=i(395),c=i(648),d=i(649),u=i(855),f=i(608);t.exports=s},855:function(t,e){function i(){this.defaultAttrs({navigationContainerSelector:".GridTimeline-items > .Grid, .GridTimeline-items > .ScrollBump",navigationContainerCellSelector:".Grid-cell"}),this.around("next",function(t,e){var i=e.closest(this.attr.navigationContainerCellSelector).next().find(this.attr.genericItemSelector).first();return 0===i.length&&(i=e.closest(this.attr.navigationContainerSelector).next().find(this.attr.genericItemSelector).first()),i}),this.around("prev",function(t,e){var i=e.closest(this.attr.navigationContainerCellSelector).prev().find(this.attr.genericItemSelector).first();return 0===i.length&&(i=e.closest(this.attr.navigationContainerSelector).prev().find(this.attr.genericItemSelector).last()),i})}t.exports=i},856:function(t,e,i){function s(){this.defaultAttrs({userItemSelector:"div.js-follower-request",streamUserItemSelector:"li.js-stream-item",followerActionsSelector:".friend-actions",profileActionsSelector:".js-profile-actions",acceptFollowerSelector:".js-action-accept",declineFollowerSelector:".js-action-deny",itemType:"user"}),this.findUser=function(t){return this.$node.find(this.attr.userItemSelector+"[data-user-id="+t+"]")},this.findFollowerActions=function(t){return this.findUser(t).find(this.attr.followerActionsSelector)},this.findProfileActions=function(t){return this.findUser(t).find(this.attr.profileActionsSelector)},this.handleAcceptSuccess=function(t,e){var i=this.findFollowerActions(e.userId),s=this.findProfileActions(e.userId);i.fadeOut(300,function(){s.fadeIn(300)})},this.handleDeclineSuccess=function(t,e){var i=this.findUser(e.userId);i.closest(this.attr.streamUserItemSelector).remove()},this.handleDecisionFailure=function(t,e){var i=this.findFollowerActions(e.userId);i.find(".btn").attr("disabled",!1).removeClass("pending")},this.handleFollowerDecision=function(t){return function(e,i){e.preventDefault(),e.stopPropagation();var s=this.interactionData(e),n=this.findFollowerActions(s.userId);n.find(".btn").attr("disabled",!0);var o=n.find("Accept"===t?this.attr.acceptFollowerSelector:this.attr.declineFollowerSelector);o.addClass("pending"),this.trigger("uiDidFollower"+t,s)}},this.after("initialize",function(){this.on("click",{acceptFollowerSelector:this.handleFollowerDecision("Accept"),declineFollowerSelector:this.handleFollowerDecision("Decline")}),this.on(document,"dataFollowerAcceptSuccess",this.handleAcceptSuccess),this.on(document,"dataFollowerDeclineSuccess",this.handleDeclineSuccess),this.on(document,"dataFollowerAcceptFailure dataFollowerDeclineFailure",this.handleDecisionFailure)})}var n=i(10),o=i(36);t.exports=n(s,o)},857:function(t,e,i){function s(){this.followerRequestAction=function(t,e){return function(i,s){var n=function(t){this.trigger("dataFollower"+e+"Success",{userId:s.userId,pendingRequestsHtml:t.pendingRequestsHtml})}.bind(this),o=function(){this.trigger("dataFollower"+e+"Failure",{userId:s.userId})}.bind(this);this.post({url:t,data:{user_id:s.userId},eventData:s,success:n,error:o})}},this.after("initialize",function(){this.on(document,"uiDidFollowerAccept",this.followerRequestAction("/i/user/accept","Accept")),this.on(document,"uiDidFollowerDecline",this.followerRequestAction("/i/user/deny","Decline"))})}var n=i(10),o=i(226);t.exports=n(s,o)},858:function(t,e,i){function s(){this.after("initialize",function(){this.scribeOnEvent("dataFollowerAcceptSuccess",{component:"user",action:"accept"}),this.scribeOnEvent("dataFollowerDeclineSuccess",{component:"user",action:"decline"})})}var n=i(10),o=i(40);t.exports=n(o,s)},859:function(t,e,i){function s(){this.defaultAttrs({pendingFollowersTitleSelector:".ProfileHeading-pendingFollowersText"}),this.handlePendingFollowerChange=function(t,e){e.pendingRequestsHtml&&this.select("pendingFollowersTitleSelector").html(e.pendingRequestsHtml)},this.after("initialize",function(){this.on(document,"dataFollowerAcceptSuccess",this.handlePendingFollowerChange),this.on(document,"dataFollowerDeclineSuccess",this.handlePendingFollowerChange)})}var n=i(10);t.exports=n(s)},860:function(t,e,i){var s=i(719),n=i(854),o=i(861),a=i(840),r=i(841);t.exports=function(t){s(t),n(t),a.attachTo(".GridTimeline"),r.attachTo(document),o.attachTo(document,{expected_followers_rendered:t.expected_followers_rendered,initial_followers_rendered:t.initial_followers_rendered,has_more_followers:t.has_more_followers})}},861:function(t,e,i){(function(e){function s(){this.defaultAttrs({expected_followers_rendered:0,initial_followers_rendered:0,has_more_followers:!1});var t=0,i=!1;this.getMessageState=function(){return i},this.initFilteredFollows=function(){this.expectedFollowersCount=this.attr.expected_followers_rendered,this.loadedFollowersCount=this.attr.initial_followers_rendered,this.gotMoreFollowers("initial_load",{has_more_items:this.attr.has_more_followers,new_latent_count:this.loadedFollowersCount})},this.gotMoreFollowers=function(s,n){var o=e(".GridTimeline-filteredFollowers");t+=n.new_latent_count,i=o&&!n.has_more_items&&t<this.attr.expected_followers_rendered,i&&o.show()},this.after("initialize",function(){this.initFilteredFollows(),this.on("dataGotMoreTimelineItems",this.gotMoreFollowers)})}var n=i(10);t.exports=n(s)}).call(e,i(1))},862:function(t,e,i){var s=i(719),n=i(854),o=i(840),a=i(841);t.exports=function(t){s(t),n(t),o.attachTo(".GridTimeline"),a.attachTo(document)}},863:function(t,e,i){var s=i(719),n=i(835),o=i(25);t.exports=function(t){s(t),n(o.merge(t,{autoLoadPublisherIds:[]}))}},864:function(t,e,i){var s=i(719),n=i(559),o=i(865),a=i(866),r=i(846),l=i(847),h=i(848),c=i(581),d=i(25);t.exports=function(t){s(t),a.attachTo(".ListCreationModule",{createListSelector:".ListCreationModule-action .btn"}),r.attachTo(document,t,{listItemSelector:".ProfileListItem",featureListSelector:".js-actionFeatureList"}),l.attachTo(document,t),h.attachTo(document,t,{scribeContext:{component:"list_stream_item"}});var e=d.merge(t,{endpoint:t.timeline_url,itemType:"list",eventData:{scribeContext:{component:"stream"}}});n(e),o.attachTo(".GridTimeline",{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items"}),c.attachTo(document,t)}},865:function(t,e,i){"use strict";function s(){this.defaultAttrs({itemType:"list"})}var n=i(592),o=i(599),a=i(608),r=i(392),l=i(395);t.exports=n.mixin(s,o,a,r,l)},866:function(t,e,i){"use strict";function s(){this.defaultAttrs({createListSelector:".js-create-list-button"}),this.openListCreateDialog=function(){this.trigger("uiOpenCreateListDialog")},this.after("initialize",function(){this.on("click",{createListSelector:this.openListCreateDialog})})}var n=i(10);t.exports=n(s)},867:function(t,e,i){var s=i(10),n=i(719),o=i(559),a=i(868),r=i(222),l=i(567),h=i(25);t.exports=function(t){n(t),s(r).attachTo(".ListCreationModule",{createCustomTimelineSelector:".ListCreationModule-action .btn"});var e=h.merge(t,{endpoint:t.timeline_url,itemType:"custom-timeline",eventData:{scribeContext:{component:"stream"}}});o(e),a.attachTo(".GridTimeline",{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items"}),l.attachTo(document,t)}},868:function(t,e,i){function s(){this.defaultAttrs({itemType:"custom-timeline"})}var n=i(592),o=i(392),a=i(395);t.exports=n.mixin(s,o,a)},869:function(t,e,i){var s=i(719),n=i(559),o=i(870),a=i(447),r=i(871),l=i(872),h=i(665),c=i(873),d=i(570),u=i(874),f=i(569),m=i(662),p=i(25);t.exports=function(t){s(t);var e=".ProfileUserMomentsTimeline",i=p.merge(t,{endpoint:t.timeline_url,itemType:"",eventData:{scribeContext:{component:"moments"}}});n(i),o.attachTo(".GridTimeline",{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items"}),a.attachTo(e),r.attachTo(document),l.attachTo(e),h.attachTo(document),c.attachTo("#delete-moment-dialog",{deleteInline:!0}),d.attachTo(document),u.attachTo(document),f.attachTo(document),t.momentsNuxTooltipsEnabled&&m.attachTo(".ProfileUserMomentsTimeline-createButton",{tooltipName:"user_moment_profile_create_moment_tooltip"})}},870:function(t,e,i){"use strict";function s(){this.defaultAttrs({itemType:"moment"}),this.after("initialize",function(){this.on("uiHasInjectedOldTimelineItems","uiMomentsHasInjectedNewItems")})}var n=i(592),o=i(599),a=i(608),r=i(392),l=i(395);t.exports=n.mixin(s,o,a,r,l)},871:function(t,e,i){function s(){this.after("initialize",function(){this.scribeOnEvent("uiMomentClicked",{action:"click"}),this.scribeOnEvent("uiMomentCtaClicked",{action:"click"}),this.scribeOnEvent("uiFollowMoment",{action:"follow"}),this.scribeOnEvent("uiUnfollowMoment",{action:"unfollow"}),this.scribeOnEvent("uiLikeMoment",{action:"like"}),this.scribeOnEvent("uiUnlikeMoment",{action:"unlike"})})}var n=i(10),o=i(40);t.exports=n(s,o)},872:function(t,e,i){(function(e){function s(){this.defaultAttrs({itemSelector:".MomentCapsuleSummary",ctaSelector:".MomentCallToAction",defaultLinkSelector:".js-default-link"}),this.onCapsuleClick=function(t,i){if(this.isValidClickTarget(t)){var s=e(i.el).closest(this.attr.itemSelector),n=s.find(this.attr.defaultLinkSelector);this.trigger("uiMomentClicked",this.getMomentScribeInfo(n)),this.trigger("uiNavigate",{href:n.attr("href")})}},this.onDefaultLinkClick=function(t,i){var s=e(t.target);this.trigger("uiMomentClicked",this.getMomentScribeInfo(s))},this.onCtaClick=function(t){var i=e(t.target);this.trigger("uiMomentCtaClicked",this.getMomentScribeInfo(i))},this.isValidClickTarget=function(t){return 0===e(t.target).closest("a, button").length},this.after("initialize",function(){this.on("click",{itemSelector:this.onCapsuleClick,defaultLinkSelector:this.onDefaultLinkClick,ctaSelector:this.onCtaClick})})}var n=i(10),o=i(660);t.exports=n(s,o)}).call(e,i(1))},873:function(t,e,i){(function(e){function s(){this.defaultAttrs({top:"20%",triggerSelector:".js-deleteMoment",confirmDeleteSelector:".js-confirmDeleteMoment",momentCapsuleSelector:".MomentCapsuleSummary",momentId:void 0,deleteInline:!1}),this.onConfirmDeleteMoment=function(t,e){this.trigger("uiMomentMakerDeleteMoment",{moment_id:this.momentId})},this.onDeleteSuccess=function(t,i){if(this.attr.deleteInline){var s=this.attr.momentCapsuleSelector+'[data-moment-id="'+this.momentId+'"]';e(s).remove(),this.close(),this.momentId=void 0}else this.redirect(i.href)},this.onDeleteFailure=function(){this.momentId=void 0,this.close(),this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be deleted. Give it a minute, then try again."})},this.redirect=function(t){location.href=t},this.before("openWhenTriggerClicked",function(t){this.momentId=this.attr.momentId||e(t.target).closest("[data-moment-id]").attr("data-moment-id")}),this.after("initialize",function(){this.on("click",{confirmDeleteSelector:this.onConfirmDeleteMoment}),this.on(document,"dataMomentMakerDeleteMomentSuccess",this.onDeleteSuccess),this.on(document,"dataMomentMakerDeleteMomentFailure",this.onDeleteFailure)})}var n=(i(22),i(10)),o=i(59);t.exports=n(o,s)}).call(e,i(1))},874:function(t,e,i){function s(){this.defaultAttrs({momentFinishLaterSelector:".MomentMakerTopBar-finishLaterButton",momentDoneSelector:".MomentMakerTopBar-doneButton"}),this.scribeTopBarClick=function(t){this.scribe({component:"top_bar",element:t,action:"click"})},this.scribeVisibilityUpdate=function(t,e){this.scribe({component:"visibility_dialog",element:e.visibility_mode,action:"click"})},this.scribeDeleteClick=function(){this.scribe({component:"delete_dialog",element:"delete",action:"click"})},this.after("initialize",function(){this.on("click",{momentFinishLaterSelector:this.scribeTopBarClick.bind(this,"finish_later"),momentDoneSelector:this.scribeTopBarClick.bind(this,"done")}),this.on("uiMomentMakerDeleteMoment",this.scribeDeleteClick),this.on("uiMomentMakerUpdateVisibility",this.scribeVisibilityUpdate)})}var n=i(10),o=i(40);t.exports=n(s,o)},1172:function(t,e,i){function s(){var t="/welcome/alerts/download";this.defaultAttrs({itemType:"user",redirectUrl:t})}var n=i(10),o=i(395),a=i(1173);t.exports=n(s,o,a)},1173:function(t,e){function i(){this.redirect=function(t,e){this.attr.redirectUrl&&"following"===e.newState&&this.trigger("uiNavigate",{href:this.attr.redirectUrl})},this.after("initialize",function(){this.on(document,"dataFollowStateChange",this.redirect)})}t.exports=i},1174:function(t,e,i){function s(){this.profileAlertsScribes={signinfrm:{page:"profile",section:"alerts",component:"login_callout",element:"form",action:"login_click"},signup:{page:"profile",section:"alerts",component:"signup_callout",element:"form",action:"signup_click"}},this.scribeForm=function(t,e){var i=t.target.className.match(/signinfrm|signup/);i&&i.length&&this.scribe(this.profileAlertsScribes[i[0]])},this.after("initialize",function(){this.on("submit",this.scribeForm)})}var n=i(10),o=i(40);t.exports=n(s,o)}});
//# sourceMappingURL=17.pages_profile.en.ddbe68da10dd15e714fa.js.map