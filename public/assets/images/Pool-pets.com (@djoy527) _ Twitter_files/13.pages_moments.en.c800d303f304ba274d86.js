webpackJsonp([13],{563:function(t,e,i){function n(t){o.attachTo(document,t),a.attachTo(document,t),s.attachTo(r,t,{initialFocusSelector:".modal-close"})}var o=i(564),s=i(565),a=i(566),r="#activity-popup-dialog";t.exports=n},564:function(t,e,i){function n(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}var o=i(10),s=i(226);t.exports=o(n,s)},565:function(t,e,i){(function(e){function n(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,n=e.contentId,o=e.component;if(this.attr.eventData=s.merge(this.attr.eventData,{scribeContext:{component:o}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[o]){this.clearContent();var a=i||"Loading...";this.setTitle(a),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];this.$node.toggleClass(e,t===o)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:o,contentId:n})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(t,i){this.clearContent();var n=e("<p>").addClass("error").html(i.message);this.setUsers(n,!0),this.setTitle("Sorry! There was an error.")},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(t){t&&(this.select("activityUserCheckboxSelector").each(function(i,n){var o=e(n),s=o.closest(this.attr.accountSelector),a=s.attr("data-user-id");o.prop("checked",t.indexOf(a)<0)}.bind(this)),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector").filter(":checked").length>0;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",t)},this.saveExcludedReplyUsers=function(){var t=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(t){return e(t).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:t})},this.toggleAllReplyUsers=function(t){this.select("activityUserCheckboxSelector").prop("checked",e(t.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}var o=(i(22),i(10)),s=i(25),a=i(59),r=i(392),l=i(395);t.exports=o(n,a,l,r)}).call(e,i(1))},566:function(t,e,i){function n(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:s.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}var o=i(10),s=i(42),a=i(40);t.exports=o(n,a)},567:function(t,e,i){function n(){this.curateTweets=function(t,e){function i(t){e.added.forEach(function(){this.scribe({component:"tweet",action:"add_to_timeline"},t)}.bind(this));var i="Tweet successfully added/removed.";this.trigger("uiShowMessage",{message:i}),this.trigger("dataTweetsCurated",t)}function n(t){var e="Failed to add/remove Tweet.";this.trigger("uiShowError",{message:e})}var o={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:o,eventData:e,success:i.bind(this),error:n.bind(this)})},this.addTweet=function(t,e){function i(t){var e=_("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function n(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var o={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:o,eventData:e,success:i.bind(this),error:n.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:"Tweet successfully removed."}),this.trigger("dataTweetRemovedFromTimeline",t)}function n(t){this.trigger("uiShowError",{message:"Error removing tweet."}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var o={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:o,eventData:e,success:i.bind(this),error:n.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function n(t){this.trigger("uiShowError",{message:"Error creating collection."})}var o={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:o,eventData:e,success:i.bind(this),error:n.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=_("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function n(t){this.trigger("uiShowError",{message:"Error updating collection."})}var o={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:o,eventData:e,success:i.bind(this),error:n.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function n(t){this.trigger("uiShowError",{message:"Error deleting collection."})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:n.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){a.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}var o=i(10),s=i(226),a=i(34),r=i(40),_=i(22),l=o(n,s,r);t.exports=l},568:function(t,e,i){function n(){this.updateMomentMapAndTriggerEvent=function(t){return function(e){this.momentMap=r.merge(this.momentMap,e.moment_map||{}),this.trigger(document,t,e)}.bind(this)},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i,n=e.moment_id&&this.momentMap[e.moment_id];n&&(i=n.is_empty_title?_('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:n.title}),this.trigger("uiShowMessage",{message:i}))},this.removeTweetSuccess=function(t,e){var i,n=e.moment_id&&this.momentMap[e.moment_id];n&&(i=n.is_empty_title?_('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:n.title}),this.trigger("uiShowMessage",{message:i}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}var o=i(10),s=i(226),a=i(40),r=i(25),_=i(22);t.exports=o(n,s,a)},569:function(t,e,i){function n(){this.createActionHandler=function(t,e){return function(i,n){this.post({url:"/i/moments/edit/"+n.moment_id+"/"+t,data:n,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}.bind(this)},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure"})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var n=e.fileId,o=s.get(n);o&&(this.trigger(document,"uiMediaSruInit",{fileId:n,uploadId:o.uploadId,mediaCategory:o.mediaCategory}),this.mediaSruFinalize(o).then(function(t){this.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}.bind(this)).fail(i.bind(this)))},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function n(){this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be created. Give it a minute, then try again."})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:n.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:"You do not currently have permission to perform this action."}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",h.merge(t,e))}function n(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:n.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment sensitivity updated successfully."})}function n(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:n.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment location setting updated successfully."})}function n(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:n.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}var o=i(10),s=i(210),a=i(226),r=i(235),l=i(370),h=i(25);i(22);t.exports=o(n,a,r,l)},570:function(t,e,i){function n(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}var o=i(10),s=i(40);t.exports=o(n,s)},607:function(t,e){function i(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,n=e.newState;"following"===n?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===n?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===n&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}t.exports=i},614:function(t,e,i){(function(e){function n(){this.defaultAttrs({tweetSelector:".tweet",tweetActionSelector:".ProfileTweet-action",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"});var t=e("html").attr("lang");this.updateTweetStats=function(t,e){e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.statElementSelectorFor(t.name));this.updateAria(i,t.count,t.title),this.updatePresentation(i,t.count,t.compact_count)}.bind(this))},this.initializeTweetStats=function(t,i){var n=this.findUninitializedTweetOrRetweet();n.each(function(t,i){this.renderTweetStats(e(i))}.bind(this))},this.renderTweetStats=function(e){e.attr("ui-tweet-stat-initialized","true"),[["favorite",a.getFavoriteStatTitle],["retweet",a.getRetweetStatTitle],["reply",a.getReplyStatTitle]].forEach(function(i){var n=i[0],o=i[1],a=e.find(this.statElementSelectorFor(n)),r=a&&a.attr("data-tweet-stat-count");if(void 0!==r){var l=s.compactOrCommaize(r,t),h=s.getCommaizedFormat(r);this.updateAria(a,r,o(r,h)),this.updatePresentation(a,r,l)}}.bind(this))},this.updatePresentation=function(t,e,i){var n=t.find(this.attr.actionCountForPresentationSelector);t.attr("data-tweet-stat-count",Math.max(e,0)),e<=0?(t.addClass(this.attr.zeroCountClass),n.empty()):(t.removeClass(this.attr.zeroCountClass),n.text(i))},this.updateAria=function(t,e,i){var n=t.find(this.attr.actionCountForAriaSelector);n.text(i),e<=0?(t.attr("aria-hidden","true"),n.removeAttr("data-aria-label-part")):(t.removeAttr("aria-hidden"),n.attr("data-aria-label-part","0"))},this.findTweetOrRetweet=function(t){var e=this.select("tweetSelector").filter("[data-tweet-id="+t+"]");return e.length||(e=this.select("tweetSelector").filter("[data-retweet-id="+t+"]")),e},this.findUninitializedTweetOrRetweet=function(){return this.select("tweetSelector").filter(":not([ui-tweet-stat-initialized=true])")},this.statElementSelectorFor=function(t){var e={favorite:this.attr.favoriteCountSelector,retweet:this.attr.retweetCountSelector,reply:this.attr.replyCountSelector};return e[t]},this.after("initialize",function(){r.getDeciderValue("use_api_for_tweet_like")&&(this.on("uiSwiftLoaded uiPageChanged",this.initializeTweetStats),this.on("uiNeedUpdateInjectedTweetStats",this.initializeTweetStats)),this.on("dataGotTweetStats",this.updateTweetStats)})}var o=i(10),s=i(582),a=i(583),r=i(34),l=i(615);t.exports=o(n,l)}).call(e,i(1))},615:function(t,e){function i(){this.defaultAttrs({retweetStatSelector:".js-stat-retweets a",favoriteStatSelector:".js-stat-favorites a",tweetStatCountSelector:"data-tweet-stat-count",displayCountSelector:"strong"}),this.updateSocialProofStats=function(t,e){t.target===document&&e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.socialProofStatElementSelectorFor(t.name));this.updateSocialProofStat(i,t)}.bind(this))},this.socialProofStatElementSelectorFor=function(t){var e={retweet:this.attr.retweetStatSelector,favorite:this.attr.favoriteStatSelector};return e[t]},this.updateSocialProofStat=function(t,e){t.attr(this.attr.tweetStatCountSelector,e.count),t.find(this.attr.displayCountSelector).text(e.commaized_count)},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateSocialProofStats)})}t.exports=i},655:function(t,e,i){var n=(i(22),i(25)),o=i(656),s=i(667),a=i(735),r=i(1194),l=i(1195),h=i(1196),c=i(1201),d=i(1202),u=i(569),m=i(1203),p=i(1204),f=i(1205),g=i(1206),v=i(1207),w=i(1208),M=i(1209),b=i(1210),C=i(1211),S=i(662),y=i(280),k=i(295),T=i(1212),x=i(874),I=i(1213),$=i(873),P=i(1215),E=i(1216),A=i(1217),z=i(1218),D=i(1219),R=i(1220),N=i(1221);t.exports=function(t){var e={momentId:t.moments.momentId};o(t),s(t),a.attachTo(".MomentMakerCoverDialog-cell--upload",{fileNameString:"moment[cover_image_name]",fileDataString:"moment[cover_image]",fileInputString:"moment[cover_image]",photoButtonSelector:".file-input",uploadType:"moment_cover",gifSupport:!0,videoSupport:!0,maxSizeInBytes:1024e4,alertEvent:"uiShowError",fileTooBigMessage:"Please select an image that is less than 10MB.",eventData:{},formAuthenticityToken:t.formAuthenticityToken}),u.attachTo(document),T.attachTo(document),x.attachTo(".MomentMakerPage"),d.attachTo(".MomentCapsuleEditableMeta-title",{momentId:t.moments.momentId,textSelector:".rich-editor",maxLength:70,isRequired:!0,setFocusOnLoad:!0}),d.attachTo(".MomentCapsuleEditableMeta-description",{momentId:t.moments.momentId,textSelector:".rich-editor",maxLength:250}),r.attachTo(".MomentMakerPage-recommendedTweets",e),l.attachTo(".MomentMakerAddItemForm",{textSelector:".MomentMakerAddItemForm-input",momentId:t.moments.momentId}),c.attachTo(".MomentMakerCapsuleCover-media"),M.attachTo(".MomentMakerPage-existingTweets",e),b.attachTo(".MomentMakerPage-existingTweets",e),p.attachTo(".MomentMakerPage-existingTweets",e),m.attachTo(".MomentMakerPage-existingTweets",e),h.attachTo(document,e),f.attachTo(document),g.attachTo(".MomentMakerRecommendedCategories",e),v.attachTo(".MomentMakerRecommendations",{momentId:t.moments.momentId,userId:t.userId}),w.attachTo(document,e),k.attachTo(".MomentMakerRecommendedTweetsSearch--users",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead",allowAccountsWithoutAtSign:!0,allowIdenticalAccountToTriggerComplete:!0}),y.attachTo(".MomentMakerRecommendedTweetsSearch--users",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead",accountsShortcutShow:!0,parseHashflags:!0,typeaheadSrc:"MOMENTS",blockLinkActions:!0,datasourceRenders:[["accounts",["accounts"]]],deciders:n.merge(t.typeaheadData,{showSocialContext:!0}),eventData:{scribeContext:{component:"moment_maker_typeahead",element:"typeahead"}}}),k.attachTo(".MomentMakerRecommendedTweetsSearch--tweets",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead"}),y.attachTo(".MomentMakerRecommendedTweetsSearch--tweets",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead",parseHashflags:!0,typeaheadSrc:"MOMENTS",blockLinkActions:!0,datasourceRenders:[["topics",["topics"]]],deciders:t.typeaheadData,eventData:{scribeContext:{component:"moment_maker_typeahead",element:"typeahead"}}}),C.attachTo(".MomentMakerSortMenu",{momentId:t.moments.momentId}),t.moments.nuxTooltipsEnabled&&S.attachTo(".MomentMakerTopBarDropdownMenu-button",{tooltipName:"moment_maker_more_menu_tooltip"}),I.attachTo("#moment-maker-cover-dialog",e),$.attachTo("#delete-moment-dialog",e),P.attachTo("#moment-maker-delete-tweet-dialog",e),E.attachTo("#moment-flag-nsfw-dialog",{momentId:t.moments.momentId,nsfwSetting:t.moments.nsfwSetting}),A.attachTo("#public-moment-warning"),A.attachTo("#moment-maker-disallow-publish-dialog"),z.attachTo("#moment-maker-publish-location-dialog",{momentId:t.moments.momentId,publishLocationSetting:t.moments.publishLocationSetting}),D.attachTo("#moment-publish-validation-dialog",e),R.attachTo("#moment-maker-theme-color-dialog",e),N.attachTo("#moment-maker-visibility-dialog",e)}},656:function(t,e,i){var n=i(10),o=i(25),s=i(57),a=i(88),r=i(1185),l=i(1186),h=i(1187),c=i(1188),d=i(871),u=i(872),m=i(1189),p=i(1190),f=i(1191),g=i(1192),v=i(1193),w=i(447),M=i(569),b=i(568),C=i(392),S=n(C);t.exports=function(t){var e=".MomentsPage";s(t),t.loggedIn||a(t),r.attachTo(document),l.attachTo(e,{loggedIn:t.loggedIn}),h.attachTo(document),c.attachTo(e,{loggedIn:t.loggedIn}),d.attachTo(document),u.attachTo(e),m.attachTo(document),p.attachTo(e),f.attachTo(e),g.attachTo(e),v.attachTo(document),w.attachTo(e),M.attachTo(document),b.attachTo(document),S.attachTo(e,o.merge(t,{itemType:"tweet"}))}},657:function(t,e,i){var n=i(656),o=i(658),s=i(659),a=i(662),r=i(663),l=i(664),h=i(665),c=i(570);t.exports=function(t){n(t),t.moments.nuxTooltipsEnabled&&a.attachTo(".MomentGuideNavigation-createButton",{tooltipName:"moment_guide_create_moment_tooltip"}),o.attachTo(".AppContent"),s.attachTo(".MomentGuideNavigation"),r.attachTo(document),l.attachTo(".MomentsGuidePage-capsules"),h.attachTo(document),c.attachTo(document)}},658:function(t,e,i){function n(){this.after("initialize",function(){this.scribeOnEvent("uiMomentsGuideCategoryClicked",{action:"click"})})}var o=i(10),s=i(40);t.exports=o(n,s)},659:function(t,e,i){(function(e){function n(){this.defaultAttrs({navContainerSelector:".MomentGuideNavigation-container",categorySelector:".MomentGuideNavigation-item--category",categoryLinkSelector:".MomentGuideNavigation-target--category",overflowMenuSelector:".MomentGuideNavigation-item--more",overflowMenuButtonSelector:".MomentGuideNavigation-target--more",overflowListSelector:".MomentGuideNavigation-overflowList",createButtonSelector:".MomentGuideNavigation-createButton",hiddenClass:"is-hidden",padding:5}),this.onCategoryClick=function(t){this.trigger("uiMomentsGuideCategoryClicked",this.getMomentScribeInfo(e(t.target)))},this.updateNavigation=function(){var t=this.$navContainer.width()-this.$overflowMenu.width()-this.getCreateButtonWidth()-this.attr.padding;this.$overflowList.empty();var e=this.findOverflowStartIndex(t);this.processCategories(e),this.updateOverflowMenu(e)},this.findOverflowStartIndex=function(t){for(var e,i=0,n=0;n<this.$categories.length;n++){if(e=this.$categories.eq(n),!(i+e.width()<=t))return n;i+=e.width()}return this.$categories.length},this.processCategories=function(t){this.$categories.each(function(i,n){var o=e(n);this.toggleElement(o,i<t),i>=t&&this.addToOverflowList(o)}.bind(this))},this.addToOverflowList=function(t){var i=e("<li>").append(t.find(this.attr.categoryLinkSelector).clone().removeClass("u-textUserColorHover"));this.$overflowList.append(i)},this.updateOverflowMenu=function(t){var e=t<this.$categories.length,i=this.$overflowList.find(".is-active").length>0;this.$overflowMenuButton.toggleClass("u-textUserColor is-active",i),this.toggleElement(this.$overflowMenu,e)},this.getCreateButtonWidth=function(){return this.$createButton.length?this.$createButton.get(0).getBoundingClientRect().width:0},this.toggleElement=function(t,e){t.toggleClass(this.attr.hiddenClass,!e)},this.after("initialize",function(){this.$navContainer=this.select("navContainerSelector"),this.$categories=this.select("categorySelector"),this.$overflowMenu=this.select("overflowMenuSelector"),this.$overflowMenuButton=this.select("overflowMenuButtonSelector"),this.$overflowList=this.select("overflowListSelector"),this.$createButton=this.select("createButtonSelector"),this.updateNavigation(),this.on(window,"resize",s.throttle(this.updateNavigation.bind(this),10)),this.on("click",{categoryLinkSelector:this.onCategoryClick})})}var o=i(10),s=i(25),a=i(397),r=i(660);t.exports=o(n,a,r)}).call(e,i(1))},660:function(t,e,i){function n(){this.getMomentScribeData=function(t){var e={impression_id:s.getClosestAttr(t,"data-guide-impression-id")},i={guide_category_id:s.getClosestAttr(t,"data-guide-category-id")},n={moment_id:s.getClosestAttr(t,"data-moment-id")},a={navigation_uri:s.getClosestAttr(t,"href")},r={visibility:s.getClosestAttr(t,"data-moment-visibility")};return s.scribeData(o.merge(e,i,n,a,r))},this.getMomentScribeInfo=function(t){return{scribeData:this.getMomentScribeData(t),scribeContext:{component:s.getClosestAttr(t,"data-component-context"),element:s.getClosestAttr(t,"data-element-context")}}}}var o=i(25),s=i(661);t.exports=n},661:function(t,e,i){(function(e){var i={scribeData:function(t){return{items:[{moments_details:t}]}},getClosestAttr:function(t,e){return t.closest("["+e+"]").attr(e)},getMomentMakerTopBarVisibility:function(){return e(".MomentMakerTopBar").attr("data-visibility-mode")}};t.exports=i}).call(e,i(1))},662:function(t,e,i){function n(){this.defaultAttrs({tooltipName:void 0}),this.showTooltip=function(){this.$node.tooltip("show"),this.setCookie()},this.hideTooltip=function(){this.$node.tooltip("hide")},this.hasCookie=function(){return!!s(this.cookieKey)},this.setCookie=function(){s(this.cookieKey,!0,{expires:1/0})},this.after("initialize",function(){this.cookieKey="moments_"+this.attr.tooltipName,this.attr.tooltipName&&!this.hasCookie()&&(this.showTooltip(),this.on(document,"click",this.hideTooltip))})}var o=i(10),s=i(52);t.exports=o(n)},663:function(t,e,i){function n(){this.attributes({interval:1e4}),this.handleUpdateSportsScores=function(){this.get({url:"/i/moments/sports_scores/"+this.sportIds,success:"uiUpdateSportsScores"})},this.setUpSportsScoresClock=function(t,e){this.sportIds=e.sportIds,s.setIntervalEvent("dataMomentGetUpdatedSportsScores",this.attr.interval)},this.after("initialize",function(){this.on(document,"dataMomentSetupSportsScores",this.setUpSportsScoresClock),this.on(document,"dataMomentGetUpdatedSportsScores",this.handleUpdateSportsScores)})}var o=i(10),s=i(9),a=i(226);t.exports=o(n,a)},664:function(t,e,i){(function(e){function n(){this.attributes({sportsScoresSelector:".MomentSportsScores[data-sport-id]:not([data-event-completed])",sportsScoresContentSelector:".MomentSportsScores-contentWrapper"}),this.handleUpdateSportsScoresUI=function(t,i){this.select("sportsScoresSelector").map(function(t,n){var o=e(n),s=o.attr("data-sport-id");o.find(this.attr.sportsScoresContentSelector).fadeOut(1e3,function(){e(this).html(i[s]).fadeIn(1e3)})}.bind(this))},this.getSportIds=function(){this.sportIds=this.select("sportsScoresSelector").map(function(){return e(this).attr("data-sport-id")}).get()},this.after("initialize",function(){this.getSportIds(),0!==this.sportIds.length&&this.trigger(document,"dataMomentSetupSportsScores",{sportIds:this.sportIds}),this.on(document,"uiUpdateSportsScores",this.handleUpdateSportsScoresUI)})}var o=i(10);t.exports=o(n)}).call(e,i(1))},665:function(t,e,i){function n(){this.defaultAttrs({createButtonSelector:".js-createMoment"}),this.createMoment=function(){this.trigger("uiMomentMakerCreateMoment")},this.after("initialize",function(){this.on("click",{createButtonSelector:this.createMoment})})}var o=i(10);t.exports=o(n)},666:function(t,e,i){(function(e){var n=i(656),o=i(667),s=i(685),a=i(686),r=i(687),l=i(688),h=i(663),c=i(664),d=i(689),u=i(690),m=i(691);t.exports=function(t){
var i=".MomentsPermalinkPage-tweets";n(t),o(t),s.attachTo(".MomentsPermalinkPage-content"),a.attachTo(".MomentFloatingMenu"),r.attachTo(".MomentCapsuleLikesFacepile",{loggedIn:t.loggedIn}),l.attachTo("#moment-sensitive-content-dialog"),t.moments.showSensitiveContentWarning&&e(document).trigger("uiMomentShowSensitiveContentDialog"),h.attachTo(document),c.attachTo(".MomentCapsuleCover-media"),d.attachTo(document,{tolerancePixels:300}),u.attachTo(i,{tweetSelector:".MomentCapsuleItem",eventData:t.eventData}),m.attachTo(i,{page:"moments"})}}).call(e,i(1))},667:function(t,e,i){var n=i(25),o=i(563),s=i(668),a=i(676),r=i(677),l=i(678),h=i(679),c=i(680),d=i(681),u=i(682),m=i(683),p=i(684),f=i(567),g=i(614),v=i(449),w=i(581),M=i(534),b=i(607);t.exports=function(t){var e=".MomentsPage",i=".MomentCapsuleItemTweet",C=".tweet, .MomentCapsuleItemTweet";o(t),s(t),a.attachTo(document),r.attachTo(document),l.attachTo(document),h.attachTo(document,{firstItemSelector:".MomentCapsuleItem:first"}),c.attachTo(".MomentDropdownMenu"),d.attachTo(".MomentDropdownMenu"),u.attachTo(document),m.attachTo(document),p.attachTo("#moment-share-dialog"),f.attachTo(document,t),g.attachTo(document,{tweetSelector:C}),v.attachTo(e,n.merge(t,{tweetItemSelector:i,genericInteractionItemSelector:i,itemType:"tweet"})),w.attachTo(document,t),M.mixin(b).attachTo(e,n.merge(t,{tweetItemSelector:i,genericInteractionItemSelector:i,animationTweetSelector:i,itemType:"tweet",loggedIn:t.loggedIn}))}},676:function(t,e,i){(function(e){function n(){this.defaultAttrs({containerSelector:".MomentsPermalinkPage-tweets, .MomentMakerPage-content",tweetSelector:".MomentCapsuleItemTweet",iframeContainerSelector:".js-macaw-cards-iframe-container"}),this.loadCardsInMoment=function(){this.applyActionOnCardTweets(this.$pageContainer,this.createCard.bind(this))},this.destroyCardsInMomentContainer=function(t,i){this.applyActionOnCardTweets(e(i.containerSelector),this.destroyCard.bind(this))},this.applyActionOnCardTweets=function(t,i){var n=t.find(this.attr.iframeContainerSelector);n.each(function(t,n){var o=e(n).closest(this.attr.tweetSelector);i(o)}.bind(this))},this.after("initialize",function(){this.$pageContainer=this.select("containerSelector"),this.on("uiSwiftLoaded uiPageChanged uiMomentsHasInjectedNewItems",this.loadCardsInMoment),this.on("uiMomentsDestroyCardsInContainer",this.destroyCardsInMomentContainer)})}var o=i(10),s=i(354);t.exports=o(s,n)}).call(e,i(1))},677:function(t,e,i){(function(e){function n(){this.attributes({tweetSelector:".MomentCapsuleItemTweet",imageContainerSelector:'.MomentMediaItem[data-source-type="image"]',imageEntitySelector:".MomentMediaItem-entity--image",linkCtaSelector:".MomentFormatLink",croppingSelector:".MomentMakerMediaContainer.is-cropping"}),this.openPermalinkOverlay=function(t,i){var n=e(t.target);if(!(n.closest("a, button").length>0)){var o=n.closest(this.attr.tweetSelector);this.trigger("uiOverlayNavigate",{href:o.data("permalink-path"),conversation_id:o.data("conversation-id")})}},this.openMediaViewer=function(t,i){var n=e(t.target);if(!n.closest(this.attr.croppingSelector).length){var o=n.closest(this.attr.imageContainerSelector).find(this.attr.imageEntitySelector);this.trigger(o,"uiOpenGallery")}},this.after("initialize",function(){this.on("click",{tweetSelector:this.openPermalinkOverlay,imageContainerSelector:this.openMediaViewer,linkCtaSelector:"uiMomentFormatLinkClick"})})}var o=i(10);t.exports=o(n)}).call(e,i(1))},678:function(t,e,i){function n(){this.after("initialize",function(){this.scribeOnEvent("uiPageBottomReached",{component:"moment_capsule",action:"scroll_to_bottom"}),this.scribeOnEvent("uiMomentFormatLinkClick",{component:"moment_capsule",element:"link_cta",action:"open_link"}),this.scribeOnEvent("uiMomentShareViaTweet",{component:"share_moment",action:"open"}),this.scribeOnEvent("uiMomentShareViaDM",{component:"moment_capsule_menu",action:"share_via_dm"}),this.scribeOnEvent("uiMomentCopyLink",{component:"copy_link_to_moment",action:"open"}),this.scribeOnEvent("uiMomentEmbed",{component:"embed_moment",action:"open"}),this.scribeOnEvent("uiMomentDropdownMenuOpen",{component:"moment_capsule_menu",action:"open"})})}var o=i(10),s=i(40);t.exports=o(n,s)},679:function(t,e,i){function n(){this.defaultAttrs({genericItemSelector:".MomentCapsuleItem"})}var o=i(10),s=i(593);t.exports=o(n,s)},680:function(t,e,i){function n(){this.after("initialize",function(){this.on("uiDropdownOpenRequested","uiMomentDropdownMenuOpen")})}var o=i(10),s=i(397);t.exports=o(n,s)},681:function(t,e,i){(function(e){function n(){this.defaultAttrs({blockOrUnblockSelector:".js-blockMomentAuthor, .js-unblockMomentAuthor",blockSelector:".js-blockMomentAuthor",unblockSelector:".js-unblockMomentAuthor",reportSelector:".js-reportMoment",hiddenClass:"u-hidden"}),this.onBlockOrUnblock=function(t,i){var n=e(i.target).closest(this.attr.blockOrUnblockSelector),o={target:"user",userId:n.attr("data-user-id"),screenName:n.attr("data-screen-name")};switch(t){case s.BLOCK:this.trigger("uiNeedsBlockDialog",o),this.blockUserId=o.userId;break;case s.UNBLOCK:this.trigger("uiUnblockAction",o),this.toggleBlockButtons(s.UNBLOCK),this.trigger("uiCloseDropdowns")}},this.onAuthorBlocked=function(t,e){this.blockUserId===e.userId&&(this.toggleBlockButtons(s.BLOCK),this.blockUserId=null)},this.toggleBlockButtons=function(t){this.select("blockSelector").toggleClass(this.attr.hiddenClass,t===s.BLOCK),this.select("unblockSelector").toggleClass(this.attr.hiddenClass,t===s.UNBLOCK)},this.onReport=function(t,i){var n=e(t.target).attr("data-moment-id"),o=e(t.target).attr("data-cover-tweet-id"),s=e(t.target).attr("data-reported-user-id");this.trigger("uiNeedsReportDialog",{target:"moment",momentId:n,tweetId:o,userId:s})},this.after("initialize",function(){this.on("click",{blockSelector:this.onBlockOrUnblock.bind(this,s.BLOCK),unblockSelector:this.onBlockOrUnblock.bind(this,s.UNBLOCK),reportSelector:this.onReport}),this.on(document,"uiDidTriggerBlockingAction",this.onAuthorBlocked)})}var o=i(10);t.exports=o(n);var s={BLOCK:"block",UNBLOCK:"unblock"}}).call(e,i(1))},682:function(t,e,i){function n(){this.defaultAttrs({momentOembedEndpoint:"//publish.twitter.com/oembed?url=https%3A%2F%2Ftwitter.com/i/moments/"}),this.getMomentOembed=function(t,e){this.get({dataType:"jsonp",url:this.attr.momentOembedEndpoint+e.momentId,data:{id:e.momentId},success:"dataMomentEmbedUrl"})},this.after("initialize",function(){this.on("uiMomentEmbedNeedsOembed",this.getMomentOembed)})}var o=i(10),s=i(226);t.exports=o(n,s)},683:function(t,e,i){(function(e){function n(){this.defaultAttrs({shareTweetSelector:".js-momentShareTweet",shareDMSelector:".js-momentShareDM",copyMomentSelector:".js-copyMomentLink",embedMomentSelector:".js-embedMoment"}),this.onShareViaTweetClick=function(t,i){var n=e(i.el);this.triggerShareViaTweet(t,{url:n.attr("data-moment-url"),title:n.attr("data-moment-title"),author:n.attr("data-moment-author")})},this.triggerShareViaTweet=function(t,e){var i,n={title:e.title,author:e.author,url:e.url,newline:"\n"};i=e.author?_(" ⚡️ “{{title}}” by @{{author}}{{newline}}{{newline}}{{url}}",n):_(" ⚡️ “{{title}}”{{newline}}{{newline}}{{url}}",n);var o={canTweetDefaultText:!0,cursorPosition:0,defaultText:i,title:"Share this Moment"};this.trigger("uiMomentShareViaTweet"),this.trigger("uiOpenTweetDialog",o)},this.onShareViaDMClick=function(t,i){var n=e(i.el),o=n.attr("data-moment-url"),s=n.attr("data-moment-title");this.trigger("uiComposeNewDMWithOptions",{defaultComposerText:" ⚡️ "+s+" "+o}),this.trigger("uiMomentShareViaDM")},this.onCopyMomentClick=function(t,i){var n=e(i.el).attr("data-moment-url");this.trigger("uiMomentCopyLink",{momentUrl:n})},this.onEmbedMomentClick=function(t,i){var n=e(i.el).attr("data-moment-id");this.trigger("uiMomentEmbed",{momentId:n})},this.after("initialize",function(){this.on("click",{shareTweetSelector:this.onShareViaTweetClick,shareDMSelector:this.onShareViaDMClick,copyMomentSelector:this.onCopyMomentClick,embedMomentSelector:this.onEmbedMomentClick}),this.on(document,"uiMomentsOpenShareViaTweetDialog",this.triggerShareViaTweet)})}var _=i(22),o=i(10);t.exports=o(n)}).call(e,i(1))},684:function(t,e,i){function n(){this.defaultAttrs({shareUrlSelector:".MomentShareDialog-url",linkTemplate:"moments/moment_share_link_content",embedTemplate:"moments/moment_share_embed_content",embedHelpUrl:"https://dev.twitter.com/web/embedded-moments"}),this.showCopyLinkView=function(t,e){var i={url:e.momentUrl};this.updateDialog(this.attr.linkTemplate,i)},this.showEmbedLoadingView=function(t,e){var i={is_loading:!0};this.updateDialog(this.attr.embedTemplate,i),this.trigger("uiMomentEmbedNeedsOembed",{momentId:e.momentId})},this.showEmbedView=function(t,e){e=e||{};var i={url:e.html,help_url:this.attr.embedHelpUrl,is_loading:!1};this.updateDialog(this.attr.embedTemplate,i)},this.selectContent=function(){this.$dialog.find("textarea").select()},this.updateDialog=function(t,e){var i=a[t].render(e,a);this.$dialog.find(this.attr.modalContentSelector).html(i),this.selectContent(),this.$dialog.trigger("uiDialogContentChanged"),this.open()},this.after("initialize",function(){this.on("click",{shareUrlSelector:this.selectContent}),this.on(document,"uiMomentCopyLink",this.showCopyLinkView),this.on(document,"uiMomentEmbed",this.showEmbedLoadingView),this.on(document,"dataMomentEmbedUrl",this.showEmbedView)})}var o=i(10),s=i(59),a=i(108);t.exports=o(n,s)},685:function(t,e,i){function n(){this.attributes({capsuleSelector:".MomentsPermalinkPage-capsule",blockInterstitialSelector:".MomentInterstitialMessage",buttonSelector:".MomentInterstitialMessage-viewMomentButton",hiddenClass:"is-hidden"}),this.showCapsule=function(){this.select("blockInterstitialSelector").addClass(this.attr.hiddenClass),this.select("capsuleSelector").removeClass(this.attr.hiddenClass)},this.after("initialize",function(){this.on("click",{buttonSelector:this.showCapsule})})}var o=i(10);t.exports=o(n)},686:function(t,e,i){(function(e){function n(){this.attributes({coverMediaSelector:".MomentCapsuleCover-media",tweetsContainerSelector:".MomentsPermalinkPage-tweets",isFixedClass:"is-fixed",topThreshold:46,bottomThreshold:180}),this.possiblyShowMenu=function(){var t=this.$window.scrollTop(),e=this.$coverMedia.offset().top-this.attr.topThreshold,i=this.$tweetsContainer.offset().top+this.$tweetsContainer.height()-this.attr.bottomThreshold,n=e<t&&t<i;this.$node.toggleClass(this.attr.isFixedClass,n)},this.after("initialize",function(){this.$window=e(window),this.$coverMedia=e(this.attr.coverMediaSelector),this.$tweetsContainer=e(this.attr.tweetsContainerSelector),this.on(document,"scroll",s.throttle(this.possiblyShowMenu.bind(this),10)),this.possiblyShowMenu()})}var o=i(10),s=i(25);t.exports=o(n)}).call(e,i(1))},687:function(t,e,i){(function(e){function n(){this.attributes({rawCountAttr:"data-raw-count",countNumSelector:".MomentCapsuleLikesFacepile-countNum",countButtonSelector:".MomentCapsuleLikesFacepile-count",momentIdAttr:"data-moment-id",loggedIn:!1}),this._getCount=function(){var t=this.select("countNumSelector").attr(this.attr.rawCountAttr);if(t)return parseInt(t,10)},this._setCount=function(t){var e=t<0?0:t,i=a.format(e),n=this.select("countNumSelector");n&&(n.attr(this.attr.rawCountAttr,e),n.html(i))},this.incrementLikeCount=function(){this._setCount(this._getCount()+1)},this.decrementLikeCount=function(){this._setCount(this._getCount()-1)},this.requestUserLikesPopup=function(t,i){var n=e(t.target),o=n.closest("["+this.attr.momentIdAttr+"]").attr(this.attr.momentIdAttr),s="like_moment_popup";this.trigger("uiRequestActivityPopup",{contentId:o,component:s})},this.uiOpenSignupDialog=function(t,e,i){this.trigger("uiOpenSignupDialog"),this.trigger("uiLoggedOutActionAttempt",{action:"moment_liked_activity_attempt"})},this.after("initialize",function(){this.on(document,"dataMomentLikeSuccess",this.incrementLikeCount),this.on(document,"dataMomentUnlikeSuccess",this.decrementLikeCount),this.on("click",{countButtonSelector:this.attr.loggedIn?this.requestUserLikesPopup:this.uiOpenSignupDialog})})}var o=i(10),s=i(344),a=new s.DecimalFormatter;t.exports=o(n)}).call(e,i(1))},688:function(t,e,i){(function(e){function n(){this.defaultAttrs({maskElementSelector:"body",contentMaskClass:"has-sensitive-content-mask"}),this.removeMask=function(){e(this.attr.maskElementSelector).removeClass(this.attr.contentMaskClass)},this.after("initialize",function(){this.on(document,"uiMomentShowSensitiveContentDialog",this.open),this.on("uiDialogCloseRequested",this.removeMask)})}var o=i(10),s=i(59);t.exports=o(n,s)}).call(e,i(1))},689:function(t,e,i){(function(e){function n(){this.attributes({tolerancePixels:0}),this.checkScrollPosition=function(){!this.hasReachedPageBottom&&this.isPageBottomReached()&&(this.trigger("uiPageBottomReached"),this.hasReachedPageBottom=!0)},this.resetScrollWatcher=function(){this.hasReachedPageBottom=!1},this.isPageBottomReached=function(){var t=this.$window.scrollTop()+this.$window.height(),e=this.$document.height()-this.attr.tolerancePixels;return t>=e},this.after("initialize",function(){this.$window=e(window),this.$document=e(document),this.hasReachedPageBottom=!1,this.on("scroll",s.throttle(this.checkScrollPosition.bind(this),10)),this.on("uiSwiftLoaded uiPageChanged",this.resetScrollWatcher)})}var o=i(10),s=i(25),a=o(n);t.exports=a}).call(e,i(1))},690:function(t,e,i){(function(e){function n(){this.viewportHelpers=r,this.defaultAttrs({tweetSelector:".tweet",itemType:"tweet",checkVisibilityInterval:500}),this.checkTweetVisibility=function(){var t=this.allVisibleTweets(),e=t.map(function(t){return this.interactionData(t)},this);this.trigger("uiTweetsVisible",{tweetData:e})},this.allVisibleTweets=function(){var t=this.select("tweetSelector"),e=this.findVisibleTweet(t);if(e===-1)return[];for(var i=[],n=e;t[n]&&r.isWithinBounds(this.$window,t.eq(n));)i.push(t[n]),n--;for(i.reverse(),n=e+1;t[n]&&r.isWithinBounds(this.$window,t.eq(n));)i.push(t[n]),n++;return i},this.findVisibleTweet=function(t){var e=r.getContainerRect(this.$window);return this.findVisibleTweetRecursive(t.length,0,t,0,e)},this.findVisibleTweetRecursive=function(t,e,i,n,o){var s=Math.floor((t-e)/2+e);return s===e||n>100?-1:r.isAboveViewport(this.$window,i.eq(s),0,o)?this.findVisibleTweetRecursive(t,s,i,n+1,o):r.isBelowViewport(this.$window,i.eq(s),0,o)?this.findVisibleTweetRecursive(s,e,i,n+1,o):s},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.$window=e(window),this.pollingInterval=a.setIntervalEvent("uiCheckTweetVisibility",this.attr.checkVisibilityInterval),this.on(document,"uiCheckTweetVisibility",this.checkTweetVisibility)})}var o=i(10),s=i(36),a=i(9),r=i(74);t.exports=o(n,s)}).call(e,i(1))},691:function(t,e,i){function n(){this.defaultAttrs({scribeInterval:6e4,page:void 0}),this.getTime=function(){return Date.now()},this.handleTweetsVisible=function(t,e){this.recordVisibleTweets(e.tweetData)},this.recordVisibleTweets=function(t){var e={},i=this.getTime();t.forEach(function(t){this.visibleTweets[t.tweetId]?e[t.tweetId]=s.merge(this.visibleTweets[t.tweetId],{visibility_end:i}):e[t.tweetId]=s.merge(t,{visibility_start:i,visibility_end:i})},this),this.visibleTweetKeys().forEach(function(t){var i=this.visibleTweets[t],n=!e[t],o=i.visibility_start!==i.visibility_end;n&&o&&this.previouslyVisibleTweets.push(this.visibleTweets[t])},this),this.visibleTweets=e},this.flushVisibleTweets=function(t,e){var i=this.getTime();this.visibleTweetKeys().forEach(function(t){this.visibleTweets[t].visibility_end=i},this),this.recordVisibleTweets([]),this.scribeVisibilityResults()},this.onScribeVisibilityResults=function(t,e){e.page===this.attr.page&&this.scribeVisibilityResults()},this.scribeVisibilityResults=function(){if(this.previouslyVisibleTweets.length){var t={component:"stream",element:"linger",action:"results"},e={items:this.previouslyVisibleTweets.map(function(t){return this.interactionItem(t)},this)};this.previouslyVisibleTweets=[],this.scribe(t,e)}},this.visibleTweetKeys=function(){return Object.keys(this.visibleTweets).filter(function(t){return this.visibleTweets.propertyIsEnumerable(t)},this)},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.visibleTweets={},this.previouslyVisibleTweets=[],this.pollingInterval=l.setIntervalEvent("uiScribeVisibilityResults",this.attr.scribeInterval,{page:this.attr.page}),this.on(document,"uiScribeVisibilityResults",this.onScribeVisibilityResults),this.on(document,"uiBeforePageChanged uiTeardown",this.flushVisibleTweets),this.on("uiTweetsVisible",this.handleTweetsVisible)})}var o=i(10),s=i(25),a=i(40),r=i(39),l=i(9);t.exports=o(n,a,r)},731:function(t,e){function i(){this.verifyUploadType=function(t){return function(e,i){if(i&&(i.uploadType||i.sourceEventData&&i.sourceEventData.uploadType)===this.attr.uploadType)return t.apply(this,arguments)}}}t.exports=i},735:function(t,e,i){function n(){this.defaults={uploadType:"",fileNameTextSelector:".photo-file-name",alertEvent:"uiAlertBanner"},this.updateFileNameText=function(t,e){var i=this.truncate(e.fileName,18);this.select("fileNameSelector").val(e.fileName),this.select("fileNameTextSelector").text(i),this.trigger("uiFileNameReady",{fileName:i})},this.addFileError=function(t){var e=t===a.FILE_TOO_LARGE?this.attr.fileTooBigMessage:s(t);e&&this.trigger(this.attr.alertEvent,{message:e}),this.scribe({component:"profile_image",element:"upload",action:"failure"}),"function"==typeof this.attr.onError&&this.attr.onError(),this.reset()},this.truncate=function(t,e){if(t.length<=e)return t;var i=Math.ceil(e/2),n=Math.floor(e/2),o=t.substr(0,i),s=t.substr(t.length-n,n);return o+"…"+s},this.initializeButton=function(){this.select("buttonSelector").attr("disabled",!1),this.updateAcceptedFormats()},this.resetUploader=function(){this.select("fileNameSelector").val(""),this.select("fileNameTextSelector").text("No file selected")},this.after("initialize",function(){this.maxSizeInBytes=this.attr.maxSizeInBytes,this.initializeButton(),this.on(this.$node,"uiPreviewThumbnailShow",this.updateFileNameText),this.on("uiResetUploader",this.resetUploader)})}var o=i(10),s=i(272),a=i(264),r=i(273),l=i(40),h=(i(22),o(n,r,l));t.exports=h},759:function(t,e,i){i(66)(i(760))},760:function(t,e){t.exports='(function (factory) {\n  if (typeof define === "function" && define.amd) {\n    define(["jquery"], factory);\n  } else if (typeof module === "object" && exports) {\n    factory(require("jquery"));\n  } else {\n    factory(jQuery);\n  }\n})(function ($) {\n  $.ui = $.ui || {};$.extend($.ui, { version: "1.11.4", keyCode: { BACKSPACE: 8, COMMA: 188, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, LEFT: 37, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SPACE: 32, TAB: 9, UP: 38 } });$.fn.extend({ scrollParent: function (includeHidden) {\n      var position = this.css("position"),\n          excludeStaticParent = position === "absolute",\n          overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\n          scrollParent = this.parents().filter(function () {\n        var parent = $(this);if (excludeStaticParent && parent.css("position") === "static") {\n          return false;\n        }return overflowRegex.test(parent.css("overflow") + parent.css("overflow-y") + parent.css("overflow-x"));\n      }).eq(0);return position === "fixed" || !scrollParent.length ? $(this[0].ownerDocument || document) : scrollParent;\n    }, uniqueId: function () {\n      var uuid = 0;return function () {\n        return this.each(function () {\n          if (!this.id) {\n            this.id = "ui-id-" + ++uuid;\n          }\n        });\n      };\n    }(), removeUniqueId: function () {\n      return this.each(function () {\n        if (/^ui-id-\\d+$/.test(this.id)) {\n          $(this).removeAttr("id");\n        }\n      });\n    } });function focusable(element, isTabIndexNotNaN) {\n    var map,\n        mapName,\n        img,\n        nodeName = element.nodeName.toLowerCase();if ("area" === nodeName) {\n      map = element.parentNode;mapName = map.name;if (!element.href || !mapName || map.nodeName.toLowerCase() !== "map") {\n        return false;\n      }img = $("img[usemap=\'#" + mapName + "\']")[0];return !!img && visible(img);\n    }return (/^(input|select|textarea|button|object)$/.test(nodeName) ? !element.disabled : "a" === nodeName ? element.href || isTabIndexNotNaN : isTabIndexNotNaN) && visible(element);\n  }function visible(element) {\n    return $.expr.filters.visible(element) && !$(element).parents().addBack().filter(function () {\n      return $.css(this, "visibility") === "hidden";\n    }).length;\n  }$.extend($.expr[":"], { data: $.expr.createPseudo ? $.expr.createPseudo(function (dataName) {\n      return function (elem) {\n        return !!$.data(elem, dataName);\n      };\n    }) : function (elem, i, match) {\n      return !!$.data(elem, match[3]);\n    }, focusable: function (element) {\n      return focusable(element, !isNaN($.attr(element, "tabindex")));\n    }, tabbable: function (element) {\n      var tabIndex = $.attr(element, "tabindex"),\n          isTabIndexNaN = isNaN(tabIndex);return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n    } });if (!$("<a>").outerWidth(1).jquery) {\n    $.each(["Width", "Height"], function (i, name) {\n      var side = name === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],\n          type = name.toLowerCase(),\n          orig = { innerWidth: $.fn.innerWidth, innerHeight: $.fn.innerHeight, outerWidth: $.fn.outerWidth, outerHeight: $.fn.outerHeight };function reduce(elem, size, border, margin) {\n        $.each(side, function () {\n          size -= parseFloat($.css(elem, "padding" + this)) || 0;if (border) {\n            size -= parseFloat($.css(elem, "border" + this + "Width")) || 0;\n          }if (margin) {\n            size -= parseFloat($.css(elem, "margin" + this)) || 0;\n          }\n        });return size;\n      }$.fn["inner" + name] = function (size) {\n        if (size === undefined) {\n          return orig["inner" + name].call(this);\n        }return this.each(function () {\n          $(this).css(type, reduce(this, size) + "px");\n        });\n      };$.fn["outer" + name] = function (size, margin) {\n        if (typeof size !== "number") {\n          return orig["outer" + name].call(this, size);\n        }return this.each(function () {\n          $(this).css(type, reduce(this, size, true, margin) + "px");\n        });\n      };\n    });\n  }if (!$.fn.addBack) {\n    $.fn.addBack = function (selector) {\n      return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));\n    };\n  }if ($("<a>").data("a-b", "a").removeData("a-b").data("a-b")) {\n    $.fn.removeData = function (removeData) {\n      return function (key) {\n        if (arguments.length) {\n          return removeData.call(this, $.camelCase(key));\n        } else {\n          return removeData.call(this);\n        }\n      };\n    }($.fn.removeData);\n  }$.ui.ie = !!/msie [\\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({ focus: function (orig) {\n      return function (delay, fn) {\n        return typeof delay === "number" ? this.each(function () {\n          var elem = this;setTimeout(function () {\n            $(elem).focus();if (fn) {\n              fn.call(elem);\n            }\n          }, delay);\n        }) : orig.apply(this, arguments);\n      };\n    }($.fn.focus), disableSelection: function () {\n      var eventType = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";return function () {\n        return this.bind(eventType + ".ui-disableSelection", function (event) {\n          event.preventDefault();\n        });\n      };\n    }(), enableSelection: function () {\n      return this.unbind(".ui-disableSelection");\n    }, zIndex: function (zIndex) {\n      if (zIndex !== undefined) {\n        return this.css("zIndex", zIndex);\n      }if (this.length) {\n        var elem = $(this[0]),\n            position,\n            value;while (elem.length && elem[0] !== document) {\n          position = elem.css("position");if (position === "absolute" || position === "relative" || position === "fixed") {\n            value = parseInt(elem.css("zIndex"), 10);if (!isNaN(value) && value !== 0) {\n              return value;\n            }\n          }elem = elem.parent();\n        }\n      }return 0;\n    } });$.ui.plugin = { add: function (module, option, set) {\n      var i,\n          proto = $.ui[module].prototype;for (i in set) {\n        proto.plugins[i] = proto.plugins[i] || [];proto.plugins[i].push([option, set[i]]);\n      }\n    }, call: function (instance, name, args, allowDisconnected) {\n      var i,\n          set = instance.plugins[name];if (!set) {\n        return;\n      }if (!allowDisconnected && (!instance.element[0].parentNode || instance.element[0].parentNode.nodeType === 11)) {\n        return;\n      }for (i = 0; i < set.length; i++) {\n        if (instance.options[set[i][0]]) {\n          set[i][1].apply(instance.element, args);\n        }\n      }\n    } };var widget_uuid = 0,\n      widget_slice = Array.prototype.slice;$.cleanData = function (orig) {\n    return function (elems) {\n      var events, elem, i;for (i = 0; (elem = elems[i]) != null; i++) {\n        try {\n          events = $._data(elem, "events");if (events && events.remove) {\n            $(elem).triggerHandler("remove");\n          }\n        } catch (e) {}\n      }orig(elems);\n    };\n  }($.cleanData);$.widget = function (name, base, prototype) {\n    var fullName,\n        existingConstructor,\n        constructor,\n        basePrototype,\n        proxiedPrototype = {},\n        namespace = name.split(".")[0];name = name.split(".")[1];fullName = namespace + "-" + name;if (!prototype) {\n      prototype = base;base = $.Widget;\n    }$.expr[":"][fullName.toLowerCase()] = function (elem) {\n      return !!$.data(elem, fullName);\n    };$[namespace] = $[namespace] || {};existingConstructor = $[namespace][name];constructor = $[namespace][name] = function (options, element) {\n      if (!this._createWidget) {\n        return new constructor(options, element);\n      }if (arguments.length) {\n        this._createWidget(options, element);\n      }\n    };$.extend(constructor, existingConstructor, { version: prototype.version, _proto: $.extend({}, prototype), _childConstructors: [] });basePrototype = new base();basePrototype.options = $.widget.extend({}, basePrototype.options);$.each(prototype, function (prop, value) {\n      if (!$.isFunction(value)) {\n        proxiedPrototype[prop] = value;return;\n      }proxiedPrototype[prop] = function () {\n        var _super = function () {\n          return base.prototype[prop].apply(this, arguments);\n        },\n            _superApply = function (args) {\n          return base.prototype[prop].apply(this, args);\n        };return function () {\n          var __super = this._super,\n              __superApply = this._superApply,\n              returnValue;this._super = _super;this._superApply = _superApply;returnValue = value.apply(this, arguments);this._super = __super;this._superApply = __superApply;return returnValue;\n        };\n      }();\n    });constructor.prototype = $.widget.extend(basePrototype, { widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix || name : name }, proxiedPrototype, { constructor: constructor, namespace: namespace, widgetName: name, widgetFullName: fullName });if (existingConstructor) {\n      $.each(existingConstructor._childConstructors, function (i, child) {\n        var childPrototype = child.prototype;$.widget(childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto);\n      });delete existingConstructor._childConstructors;\n    } else {\n      base._childConstructors.push(constructor);\n    }$.widget.bridge(name, constructor);return constructor;\n  };$.widget.extend = function (target) {\n    var input = widget_slice.call(arguments, 1),\n        inputIndex = 0,\n        inputLength = input.length,\n        key,\n        value;for (; inputIndex < inputLength; inputIndex++) {\n      for (key in input[inputIndex]) {\n        value = input[inputIndex][key];if (input[inputIndex].hasOwnProperty(key) && value !== undefined) {\n          if ($.isPlainObject(value)) {\n            target[key] = $.isPlainObject(target[key]) ? $.widget.extend({}, target[key], value) : $.widget.extend({}, value);\n          } else {\n            target[key] = value;\n          }\n        }\n      }\n    }return target;\n  };$.widget.bridge = function (name, object) {\n    var fullName = object.prototype.widgetFullName || name;$.fn[name] = function (options) {\n      var isMethodCall = typeof options === "string",\n          args = widget_slice.call(arguments, 1),\n          returnValue = this;if (isMethodCall) {\n        this.each(function () {\n          var methodValue,\n              instance = $.data(this, fullName);if (options === "instance") {\n            returnValue = instance;return false;\n          }if (!instance) {\n            return $.error("cannot call methods on " + name + " prior to initialization; " + "attempted to call method \'" + options + "\'");\n          }if (!$.isFunction(instance[options]) || options.charAt(0) === "_") {\n            return $.error("no such method \'" + options + "\' for " + name + " widget instance");\n          }methodValue = instance[options].apply(instance, args);if (methodValue !== instance && methodValue !== undefined) {\n            returnValue = methodValue && methodValue.jquery ? returnValue.pushStack(methodValue.get()) : methodValue;return false;\n          }\n        });\n      } else {\n        if (args.length) {\n          options = $.widget.extend.apply(null, [options].concat(args));\n        }this.each(function () {\n          var instance = $.data(this, fullName);if (instance) {\n            instance.option(options || {});if (instance._init) {\n              instance._init();\n            }\n          } else {\n            $.data(this, fullName, new object(options, this));\n          }\n        });\n      }return returnValue;\n    };\n  };$.Widget = function () {};$.Widget._childConstructors = [];$.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: { disabled: false, create: null }, _createWidget: function (options, element) {\n      element = $(element || this.defaultElement || this)[0];this.element = $(element);this.uuid = widget_uuid++;this.eventNamespace = "." + this.widgetName + this.uuid;this.bindings = $();this.hoverable = $();this.focusable = $();if (element !== this) {\n        $.data(element, this.widgetFullName, this);this._on(true, this.element, { remove: function (event) {\n            if (event.target === element) {\n              this.destroy();\n            }\n          } });this.document = $(element.style ? element.ownerDocument : element.document || element);this.window = $(this.document[0].defaultView || this.document[0].parentWindow);\n      }this.options = $.widget.extend({}, this.options, this._getCreateOptions(), options);this._create();this._trigger("create", null, this._getCreateEventData());this._init();\n    }, _getCreateOptions: $.noop, _getCreateEventData: $.noop, _create: $.noop, _init: $.noop, destroy: function () {\n      this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");\n    }, _destroy: $.noop, widget: function () {\n      return this.element;\n    }, option: function (key, value) {\n      var options = key,\n          parts,\n          curOption,\n          i;if (arguments.length === 0) {\n        return $.widget.extend({}, this.options);\n      }if (typeof key === "string") {\n        options = {};parts = key.split(".");key = parts.shift();if (parts.length) {\n          curOption = options[key] = $.widget.extend({}, this.options[key]);for (i = 0; i < parts.length - 1; i++) {\n            curOption[parts[i]] = curOption[parts[i]] || {};curOption = curOption[parts[i]];\n          }key = parts.pop();if (arguments.length === 1) {\n            return curOption[key] === undefined ? null : curOption[key];\n          }curOption[key] = value;\n        } else {\n          if (arguments.length === 1) {\n            return this.options[key] === undefined ? null : this.options[key];\n          }options[key] = value;\n        }\n      }this._setOptions(options);return this;\n    }, _setOptions: function (options) {\n      var key;for (key in options) {\n        this._setOption(key, options[key]);\n      }return this;\n    }, _setOption: function (key, value) {\n      this.options[key] = value;if (key === "disabled") {\n        this.widget().toggleClass(this.widgetFullName + "-disabled", !!value);if (value) {\n          this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");\n        }\n      }return this;\n    }, enable: function () {\n      return this._setOptions({ disabled: false });\n    }, disable: function () {\n      return this._setOptions({ disabled: true });\n    }, _on: function (suppressDisabledCheck, element, handlers) {\n      var delegateElement,\n          instance = this;if (typeof suppressDisabledCheck !== "boolean") {\n        handlers = element;element = suppressDisabledCheck;suppressDisabledCheck = false;\n      }if (!handlers) {\n        handlers = element;element = this.element;delegateElement = this.widget();\n      } else {\n        element = delegateElement = $(element);this.bindings = this.bindings.add(element);\n      }$.each(handlers, function (event, handler) {\n        function handlerProxy() {\n          if (!suppressDisabledCheck && (instance.options.disabled === true || $(this).hasClass("ui-state-disabled"))) {\n            return;\n          }return (typeof handler === "string" ? instance[handler] : handler).apply(instance, arguments);\n        }if (typeof handler !== "string") {\n          handlerProxy.guid = handler.guid = handler.guid || handlerProxy.guid || $.guid++;\n        }var match = event.match(/^([\\w:-]*)\\s*(.*)$/),\n            eventName = match[1] + instance.eventNamespace,\n            selector = match[2];if (selector) {\n          delegateElement.delegate(selector, eventName, handlerProxy);\n        } else {\n          element.bind(eventName, handlerProxy);\n        }\n      });\n    }, _off: function (element, eventName) {\n      eventName = (eventName || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings = $(this.bindings.not(element).get());this.focusable = $(this.focusable.not(element).get());this.hoverable = $(this.hoverable.not(element).get());\n    }, _delay: function (handler, delay) {\n      function handlerProxy() {\n        return (typeof handler === "string" ? instance[handler] : handler).apply(instance, arguments);\n      }var instance = this;return setTimeout(handlerProxy, delay || 0);\n    }, _hoverable: function (element) {\n      this.hoverable = this.hoverable.add(element);this._on(element, { mouseenter: function (event) {\n          $(event.currentTarget).addClass("ui-state-hover");\n        }, mouseleave: function (event) {\n          $(event.currentTarget).removeClass("ui-state-hover");\n        } });\n    }, _focusable: function (element) {\n      this.focusable = this.focusable.add(element);this._on(element, { focusin: function (event) {\n          $(event.currentTarget).addClass("ui-state-focus");\n        }, focusout: function (event) {\n          $(event.currentTarget).removeClass("ui-state-focus");\n        } });\n    }, _trigger: function (type, event, data) {\n      var prop,\n          orig,\n          callback = this.options[type];data = data || {};event = $.Event(event);event.type = (type === this.widgetEventPrefix ? type : this.widgetEventPrefix + type).toLowerCase();event.target = this.element[0];orig = event.originalEvent;if (orig) {\n        for (prop in orig) {\n          if (!(prop in event)) {\n            event[prop] = orig[prop];\n          }\n        }\n      }this.element.trigger(event, data);return !($.isFunction(callback) && callback.apply(this.element[0], [event].concat(data)) === false || event.isDefaultPrevented());\n    } };$.each({ show: "fadeIn", hide: "fadeOut" }, function (method, defaultEffect) {\n    $.Widget.prototype["_" + method] = function (element, options, callback) {\n      if (typeof options === "string") {\n        options = { effect: options };\n      }var hasOptions,\n          effectName = !options ? method : options === true || typeof options === "number" ? defaultEffect : options.effect || defaultEffect;options = options || {};if (typeof options === "number") {\n        options = { duration: options };\n      }hasOptions = !$.isEmptyObject(options);options.complete = callback;if (options.delay) {\n        element.delay(options.delay);\n      }if (hasOptions && $.effects && $.effects.effect[effectName]) {\n        element[method](options);\n      } else if (effectName !== method && element[effectName]) {\n        element[effectName](options.duration, options.easing, callback);\n      } else {\n        element.queue(function (next) {\n          $(this)[method]();if (callback) {\n            callback.call(element[0]);\n          }next();\n        });\n      }\n    };\n  });var widget = $.widget;var mouseHandled = false;$(document).mouseup(function () {\n    mouseHandled = false;\n  });var mouse = $.widget("ui.mouse", { version: "1.11.4", options: { cancel: "input,textarea,button,select,option", distance: 1, delay: 0 }, _mouseInit: function () {\n      var that = this;this.element.bind("mousedown." + this.widgetName, function (event) {\n        return that._mouseDown(event);\n      }).bind("click." + this.widgetName, function (event) {\n        if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {\n          $.removeData(event.target, that.widgetName + ".preventClickEvent");event.stopImmediatePropagation();return false;\n        }\n      });this.started = false;\n    }, _mouseDestroy: function () {\n      this.element.unbind("." + this.widgetName);if (this._mouseMoveDelegate) {\n        this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);\n      }\n    }, _mouseDown: function (event) {\n      if (mouseHandled) {\n        return;\n      }this._mouseMoved = false;this._mouseStarted && this._mouseUp(event);this._mouseDownEvent = event;var that = this,\n          btnIsLeft = event.which === 1,\n          elIsCancel = typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false;if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {\n        return true;\n      }this.mouseDelayMet = !this.options.delay;if (!this.mouseDelayMet) {\n        this._mouseDelayTimer = setTimeout(function () {\n          that.mouseDelayMet = true;\n        }, this.options.delay);\n      }if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n        this._mouseStarted = this._mouseStart(event) !== false;if (!this._mouseStarted) {\n          event.preventDefault();return true;\n        }\n      }if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {\n        $.removeData(event.target, this.widgetName + ".preventClickEvent");\n      }this._mouseMoveDelegate = function (event) {\n        return that._mouseMove(event);\n      };this._mouseUpDelegate = function (event) {\n        return that._mouseUp(event);\n      };this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate);event.preventDefault();mouseHandled = true;return true;\n    }, _mouseMove: function (event) {\n      if (this._mouseMoved) {\n        if ($.ui.ie && (!document.documentMode || document.documentMode < 9) && !event.button) {\n          return this._mouseUp(event);\n        } else if (!event.which) {\n          return this._mouseUp(event);\n        }\n      }if (event.which || event.button) {\n        this._mouseMoved = true;\n      }if (this._mouseStarted) {\n        this._mouseDrag(event);return event.preventDefault();\n      }if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n        this._mouseStarted = this._mouseStart(this._mouseDownEvent, event) !== false;this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event);\n      }return !this._mouseStarted;\n    }, _mouseUp: function (event) {\n      this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);if (this._mouseStarted) {\n        this._mouseStarted = false;if (event.target === this._mouseDownEvent.target) {\n          $.data(event.target, this.widgetName + ".preventClickEvent", true);\n        }this._mouseStop(event);\n      }mouseHandled = false;return false;\n    }, _mouseDistanceMet: function (event) {\n      return Math.max(Math.abs(this._mouseDownEvent.pageX - event.pageX), Math.abs(this._mouseDownEvent.pageY - event.pageY)) >= this.options.distance;\n    }, _mouseDelayMet: function () {\n      return this.mouseDelayMet;\n    }, _mouseStart: function () {}, _mouseDrag: function () {}, _mouseStop: function () {}, _mouseCapture: function () {\n      return true;\n    } });$.widget("ui.draggable", $.ui.mouse, { version: "1.11.4", widgetEventPrefix: "drag", options: { addClasses: true, appendTo: "parent", axis: false, connectToSortable: false, containment: false, cursor: "auto", cursorAt: false, grid: false, handle: false, helper: "original", iframeFix: false, opacity: false, refreshPositions: false, revert: false, revertDuration: 500, scope: "default", scroll: true, scrollSensitivity: 20, scrollSpeed: 20, snap: false, snapMode: "both", snapTolerance: 20, stack: false, zIndex: false, drag: null, start: null, stop: null }, _create: function () {\n      if (this.options.helper === "original") {\n        this._setPositionRelative();\n      }if (this.options.addClasses) {\n        this.element.addClass("ui-draggable");\n      }if (this.options.disabled) {\n        this.element.addClass("ui-draggable-disabled");\n      }this._setHandleClassName();this._mouseInit();\n    }, _setOption: function (key, value) {\n      this._super(key, value);if (key === "handle") {\n        this._removeHandleClassName();this._setHandleClassName();\n      }\n    }, _destroy: function () {\n      if ((this.helper || this.element).is(".ui-draggable-dragging")) {\n        this.destroyOnClear = true;return;\n      }this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy();\n    }, _mouseCapture: function (event) {\n      var o = this.options;this._blurActiveElement(event);if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {\n        return false;\n      }this.handle = this._getHandle(event);if (!this.handle) {\n        return false;\n      }this._blockFrames(o.iframeFix === true ? "iframe" : o.iframeFix);return true;\n    }, _blockFrames: function (selector) {\n      this.iframeBlocks = this.document.find(selector).map(function () {\n        var iframe = $(this);return $("<div>").css("position", "absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];\n      });\n    }, _unblockFrames: function () {\n      if (this.iframeBlocks) {\n        this.iframeBlocks.remove();delete this.iframeBlocks;\n      }\n    }, _blurActiveElement: function (event) {\n      var document = this.document[0];if (!this.handleElement.is(event.target)) {\n        return;\n      }try {\n        if (document.activeElement && document.activeElement.nodeName.toLowerCase() !== "body") {\n          $(document.activeElement).blur();\n        }\n      } catch (error) {}\n    }, _mouseStart: function (event) {\n      var o = this.options;this.helper = this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if ($.ui.ddmanager) {\n        $.ui.ddmanager.current = this;\n      }this._cacheMargins();this.cssPosition = this.helper.css("position");this.scrollParent = this.helper.scrollParent(true);this.offsetParent = this.helper.offsetParent();this.hasFixedAncestor = this.helper.parents().filter(function () {\n        return $(this).css("position") === "fixed";\n      }).length > 0;this.positionAbs = this.element.offset();this._refreshOffsets(event);this.originalPosition = this.position = this._generatePosition(event, false);this.originalPageX = event.pageX;this.originalPageY = event.pageY;o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt);this._setContainment();if (this._trigger("start", event) === false) {\n        this._clear();return false;\n      }this._cacheHelperProportions();if ($.ui.ddmanager && !o.dropBehaviour) {\n        $.ui.ddmanager.prepareOffsets(this, event);\n      }this._normalizeRightBottom();this._mouseDrag(event, true);if ($.ui.ddmanager) {\n        $.ui.ddmanager.dragStart(this, event);\n      }return true;\n    }, _refreshOffsets: function (event) {\n      this.offset = { top: this.positionAbs.top - this.margins.top, left: this.positionAbs.left - this.margins.left, scroll: false, parent: this._getParentOffset(), relative: this._getRelativeOffset() };this.offset.click = { left: event.pageX - this.offset.left, top: event.pageY - this.offset.top };\n    }, _mouseDrag: function (event, noPropagation) {\n      if (this.hasFixedAncestor) {\n        this.offset.parent = this._getParentOffset();\n      }this.position = this._generatePosition(event, true);this.positionAbs = this._convertPositionTo("absolute");if (!noPropagation) {\n        var ui = this._uiHash();if (this._trigger("drag", event, ui) === false) {\n          this._mouseUp({});return false;\n        }this.position = ui.position;\n      }this.helper[0].style.left = this.position.left + "px";this.helper[0].style.top = this.position.top + "px";if ($.ui.ddmanager) {\n        $.ui.ddmanager.drag(this, event);\n      }return false;\n    }, _mouseStop: function (event) {\n      var that = this,\n          dropped = false;if ($.ui.ddmanager && !this.options.dropBehaviour) {\n        dropped = $.ui.ddmanager.drop(this, event);\n      }if (this.dropped) {\n        dropped = this.dropped;this.dropped = false;\n      }if (this.options.revert === "invalid" && !dropped || this.options.revert === "valid" && dropped || this.options.revert === true || $.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped)) {\n        $(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {\n          if (that._trigger("stop", event) !== false) {\n            that._clear();\n          }\n        });\n      } else {\n        if (this._trigger("stop", event) !== false) {\n          this._clear();\n        }\n      }return false;\n    }, _mouseUp: function (event) {\n      this._unblockFrames();if ($.ui.ddmanager) {\n        $.ui.ddmanager.dragStop(this, event);\n      }if (this.handleElement.is(event.target)) {\n        this.element.focus();\n      }return $.ui.mouse.prototype._mouseUp.call(this, event);\n    }, cancel: function () {\n      if (this.helper.is(".ui-draggable-dragging")) {\n        this._mouseUp({});\n      } else {\n        this._clear();\n      }return this;\n    }, _getHandle: function (event) {\n      return this.options.handle ? !!$(event.target).closest(this.element.find(this.options.handle)).length : true;\n    }, _setHandleClassName: function () {\n      this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element;this.handleElement.addClass("ui-draggable-handle");\n    }, _removeHandleClassName: function () {\n      this.handleElement.removeClass("ui-draggable-handle");\n    }, _createHelper: function (event) {\n      var o = this.options,\n          helperIsFunction = $.isFunction(o.helper),\n          helper = helperIsFunction ? $(o.helper.apply(this.element[0], [event])) : o.helper === "clone" ? this.element.clone().removeAttr("id") : this.element;if (!helper.parents("body").length) {\n        helper.appendTo(o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo);\n      }if (helperIsFunction && helper[0] === this.element[0]) {\n        this._setPositionRelative();\n      }if (helper[0] !== this.element[0] && !/(fixed|absolute)/.test(helper.css("position"))) {\n        helper.css("position", "absolute");\n      }return helper;\n    }, _setPositionRelative: function () {\n      if (!/^(?:r|a|f)/.test(this.element.css("position"))) {\n        this.element[0].style.position = "relative";\n      }\n    }, _adjustOffsetFromHelper: function (obj) {\n      if (typeof obj === "string") {\n        obj = obj.split(" ");\n      }if ($.isArray(obj)) {\n        obj = { left: +obj[0], top: +obj[1] || 0 };\n      }if ("left" in obj) {\n        this.offset.click.left = obj.left + this.margins.left;\n      }if ("right" in obj) {\n        this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n      }if ("top" in obj) {\n        this.offset.click.top = obj.top + this.margins.top;\n      }if ("bottom" in obj) {\n        this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n      }\n    }, _isRootNode: function (element) {\n      return (/(html|body)/i.test(element.tagName) || element === this.document[0]\n      );\n    }, _getParentOffset: function () {\n      var po = this.offsetParent.offset(),\n          document = this.document[0];if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n        po.left += this.scrollParent.scrollLeft();po.top += this.scrollParent.scrollTop();\n      }if (this._isRootNode(this.offsetParent[0])) {\n        po = { top: 0, left: 0 };\n      }return { top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) };\n    }, _getRelativeOffset: function () {\n      if (this.cssPosition !== "relative") {\n        return { top: 0, left: 0 };\n      }var p = this.element.position(),\n          scrollIsRootNode = this._isRootNode(this.scrollParent[0]);return { top: p.top - (parseInt(this.helper.css("top"), 10) || 0) + (!scrollIsRootNode ? this.scrollParent.scrollTop() : 0), left: p.left - (parseInt(this.helper.css("left"), 10) || 0) + (!scrollIsRootNode ? this.scrollParent.scrollLeft() : 0) };\n    }, _cacheMargins: function () {\n      this.margins = { left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0 };\n    }, _cacheHelperProportions: function () {\n      this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() };\n    }, _setContainment: function () {\n      var isUserScrollable,\n          c,\n          ce,\n          o = this.options,\n          document = this.document[0];this.relativeContainer = null;if (!o.containment) {\n        this.containment = null;return;\n      }if (o.containment === "window") {\n        this.containment = [$(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, $(window).scrollLeft() + $(window).width() - this.helperProportions.width - this.margins.left, $(window).scrollTop() + ($(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];return;\n      }if (o.containment === "document") {\n        this.containment = [0, 0, $(document).width() - this.helperProportions.width - this.margins.left, ($(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];return;\n      }if (o.containment.constructor === Array) {\n        this.containment = o.containment;return;\n      }if (o.containment === "parent") {\n        o.containment = this.helper[0].parentNode;\n      }c = $(o.containment);ce = c[0];if (!ce) {\n        return;\n      }isUserScrollable = /(scroll|auto)/.test(c.css("overflow"));this.containment = [(parseInt(c.css("borderLeftWidth"), 10) || 0) + (parseInt(c.css("paddingLeft"), 10) || 0), (parseInt(c.css("borderTopWidth"), 10) || 0) + (parseInt(c.css("paddingTop"), 10) || 0), (isUserScrollable ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) - (parseInt(c.css("borderRightWidth"), 10) || 0) - (parseInt(c.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (isUserScrollable ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) - (parseInt(c.css("borderBottomWidth"), 10) || 0) - (parseInt(c.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom];this.relativeContainer = c;\n    }, _convertPositionTo: function (d, pos) {\n      if (!pos) {\n        pos = this.position;\n      }var mod = d === "absolute" ? 1 : -1,\n          scrollIsRootNode = this._isRootNode(this.scrollParent[0]);return { top: pos.top + this.offset.relative.top * mod + this.offset.parent.top * mod - (this.cssPosition === "fixed" ? -this.offset.scroll.top : scrollIsRootNode ? 0 : this.offset.scroll.top) * mod, left: pos.left + this.offset.relative.left * mod + this.offset.parent.left * mod - (this.cssPosition === "fixed" ? -this.offset.scroll.left : scrollIsRootNode ? 0 : this.offset.scroll.left) * mod };\n    }, _generatePosition: function (event, constrainPosition) {\n      var containment,\n          co,\n          top,\n          left,\n          o = this.options,\n          scrollIsRootNode = this._isRootNode(this.scrollParent[0]),\n          pageX = event.pageX,\n          pageY = event.pageY;if (!scrollIsRootNode || !this.offset.scroll) {\n        this.offset.scroll = { top: this.scrollParent.scrollTop(), left: this.scrollParent.scrollLeft() };\n      }if (constrainPosition) {\n        if (this.containment) {\n          if (this.relativeContainer) {\n            co = this.relativeContainer.offset();containment = [this.containment[0] + co.left, this.containment[1] + co.top, this.containment[2] + co.left, this.containment[3] + co.top];\n          } else {\n            containment = this.containment;\n          }if (event.pageX - this.offset.click.left < containment[0]) {\n            pageX = containment[0] + this.offset.click.left;\n          }if (event.pageY - this.offset.click.top < containment[1]) {\n            pageY = containment[1] + this.offset.click.top;\n          }if (event.pageX - this.offset.click.left > containment[2]) {\n            pageX = containment[2] + this.offset.click.left;\n          }if (event.pageY - this.offset.click.top > containment[3]) {\n            pageY = containment[3] + this.offset.click.top;\n          }\n        }if (o.grid) {\n          top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;pageY = containment ? top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3] ? top : top - this.offset.click.top >= containment[1] ? top - o.grid[1] : top + o.grid[1] : top;left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;pageX = containment ? left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2] ? left : left - this.offset.click.left >= containment[0] ? left - o.grid[0] : left + o.grid[0] : left;\n        }if (o.axis === "y") {\n          pageX = this.originalPageX;\n        }if (o.axis === "x") {\n          pageY = this.originalPageY;\n        }\n      }return { top: pageY - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.offset.scroll.top : scrollIsRootNode ? 0 : this.offset.scroll.top), left: pageX - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.offset.scroll.left : scrollIsRootNode ? 0 : this.offset.scroll.left) };\n    }, _clear: function () {\n      this.helper.removeClass("ui-draggable-dragging");if (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {\n        this.helper.remove();\n      }this.helper = null;this.cancelHelperRemoval = false;if (this.destroyOnClear) {\n        this.destroy();\n      }\n    }, _normalizeRightBottom: function () {\n      if (this.options.axis !== "y" && this.helper.css("right") !== "auto") {\n        this.helper.width(this.helper.width());this.helper.css("right", "auto");\n      }if (this.options.axis !== "x" && this.helper.css("bottom") !== "auto") {\n        this.helper.height(this.helper.height());this.helper.css("bottom", "auto");\n      }\n    }, _trigger: function (type, event, ui) {\n      ui = ui || this._uiHash();$.ui.plugin.call(this, type, [event, ui, this], true);if (/^(drag|start|stop)/.test(type)) {\n        this.positionAbs = this._convertPositionTo("absolute");ui.offset = this.positionAbs;\n      }return $.Widget.prototype._trigger.call(this, type, event, ui);\n    }, plugins: {}, _uiHash: function () {\n      return { helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs };\n    } });$.ui.plugin.add("draggable", "connectToSortable", { start: function (event, ui, draggable) {\n      var uiSortable = $.extend({}, ui, { item: draggable.element });draggable.sortables = [];$(draggable.options.connectToSortable).each(function () {\n        var sortable = $(this).sortable("instance");if (sortable && !sortable.options.disabled) {\n          draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate", event, uiSortable);\n        }\n      });\n    }, stop: function (event, ui, draggable) {\n      var uiSortable = $.extend({}, ui, { item: draggable.element });draggable.cancelHelperRemoval = false;$.each(draggable.sortables, function () {\n        var sortable = this;if (sortable.isOver) {\n          sortable.isOver = 0;draggable.cancelHelperRemoval = true;sortable.cancelHelperRemoval = false;sortable._storedCSS = { position: sortable.placeholder.css("position"), top: sortable.placeholder.css("top"), left: sortable.placeholder.css("left") };sortable._mouseStop(event);sortable.options.helper = sortable.options._helper;\n        } else {\n          sortable.cancelHelperRemoval = true;sortable._trigger("deactivate", event, uiSortable);\n        }\n      });\n    }, drag: function (event, ui, draggable) {\n      $.each(draggable.sortables, function () {\n        var innermostIntersecting = false,\n            sortable = this;sortable.positionAbs = draggable.positionAbs;sortable.helperProportions = draggable.helperProportions;sortable.offset.click = draggable.offset.click;if (sortable._intersectsWith(sortable.containerCache)) {\n          innermostIntersecting = true;$.each(draggable.sortables, function () {\n            this.positionAbs = draggable.positionAbs;this.helperProportions = draggable.helperProportions;this.offset.click = draggable.offset.click;if (this !== sortable && this._intersectsWith(this.containerCache) && $.contains(sortable.element[0], this.element[0])) {\n              innermostIntersecting = false;\n            }return innermostIntersecting;\n          });\n        }if (innermostIntersecting) {\n          if (!sortable.isOver) {\n            sortable.isOver = 1;draggable._parent = ui.helper.parent();sortable.currentItem = ui.helper.appendTo(sortable.element).data("ui-sortable-item", true);sortable.options._helper = sortable.options.helper;sortable.options.helper = function () {\n              return ui.helper[0];\n            };event.target = sortable.currentItem[0];sortable._mouseCapture(event, true);sortable._mouseStart(event, true, true);sortable.offset.click.top = draggable.offset.click.top;sortable.offset.click.left = draggable.offset.click.left;sortable.offset.parent.left -= draggable.offset.parent.left - sortable.offset.parent.left;sortable.offset.parent.top -= draggable.offset.parent.top - sortable.offset.parent.top;draggable._trigger("toSortable", event);draggable.dropped = sortable.element;$.each(draggable.sortables, function () {\n              this.refreshPositions();\n            });draggable.currentItem = draggable.element;sortable.fromOutside = draggable;\n          }if (sortable.currentItem) {\n            sortable._mouseDrag(event);ui.position = sortable.position;\n          }\n        } else {\n          if (sortable.isOver) {\n            sortable.isOver = 0;sortable.cancelHelperRemoval = true;sortable.options._revert = sortable.options.revert;sortable.options.revert = false;sortable._trigger("out", event, sortable._uiHash(sortable));sortable._mouseStop(event, true);sortable.options.revert = sortable.options._revert;sortable.options.helper = sortable.options._helper;if (sortable.placeholder) {\n              sortable.placeholder.remove();\n            }ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position = draggable._generatePosition(event, true);draggable._trigger("fromSortable", event);draggable.dropped = false;$.each(draggable.sortables, function () {\n              this.refreshPositions();\n            });\n          }\n        }\n      });\n    } });$.ui.plugin.add("draggable", "cursor", { start: function (event, ui, instance) {\n      var t = $("body"),\n          o = instance.options;if (t.css("cursor")) {\n        o._cursor = t.css("cursor");\n      }t.css("cursor", o.cursor);\n    }, stop: function (event, ui, instance) {\n      var o = instance.options;if (o._cursor) {\n        $("body").css("cursor", o._cursor);\n      }\n    } });$.ui.plugin.add("draggable", "opacity", { start: function (event, ui, instance) {\n      var t = $(ui.helper),\n          o = instance.options;if (t.css("opacity")) {\n        o._opacity = t.css("opacity");\n      }t.css("opacity", o.opacity);\n    }, stop: function (event, ui, instance) {\n      var o = instance.options;if (o._opacity) {\n        $(ui.helper).css("opacity", o._opacity);\n      }\n    } });$.ui.plugin.add("draggable", "scroll", { start: function (event, ui, i) {\n      if (!i.scrollParentNotHidden) {\n        i.scrollParentNotHidden = i.helper.scrollParent(false);\n      }if (i.scrollParentNotHidden[0] !== i.document[0] && i.scrollParentNotHidden[0].tagName !== "HTML") {\n        i.overflowOffset = i.scrollParentNotHidden.offset();\n      }\n    }, drag: function (event, ui, i) {\n      var o = i.options,\n          scrolled = false,\n          scrollParent = i.scrollParentNotHidden[0],\n          document = i.document[0];if (scrollParent !== document && scrollParent.tagName !== "HTML") {\n        if (!o.axis || o.axis !== "x") {\n          if (i.overflowOffset.top + scrollParent.offsetHeight - event.pageY < o.scrollSensitivity) {\n            scrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\n          } else if (event.pageY - i.overflowOffset.top < o.scrollSensitivity) {\n            scrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\n          }\n        }if (!o.axis || o.axis !== "y") {\n          if (i.overflowOffset.left + scrollParent.offsetWidth - event.pageX < o.scrollSensitivity) {\n            scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\n          } else if (event.pageX - i.overflowOffset.left < o.scrollSensitivity) {\n            scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\n          }\n        }\n      } else {\n        if (!o.axis || o.axis !== "x") {\n          if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\n            scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\n          } else if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\n            scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\n          }\n        }if (!o.axis || o.axis !== "y") {\n          if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\n            scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\n          } else if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\n            scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\n          }\n        }\n      }if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\n        $.ui.ddmanager.prepareOffsets(i, event);\n      }\n    } });$.ui.plugin.add("draggable", "snap", { start: function (event, ui, i) {\n      var o = i.options;i.snapElements = [];$(o.snap.constructor !== String ? o.snap.items || ":data(ui-draggable)" : o.snap).each(function () {\n        var $t = $(this),\n            $o = $t.offset();if (this !== i.element[0]) {\n          i.snapElements.push({ item: this, width: $t.outerWidth(), height: $t.outerHeight(), top: $o.top, left: $o.left });\n        }\n      });\n    }, drag: function (event, ui, inst) {\n      var ts,\n          bs,\n          ls,\n          rs,\n          l,\n          r,\n          t,\n          b,\n          i,\n          first,\n          o = inst.options,\n          d = o.snapTolerance,\n          x1 = ui.offset.left,\n          x2 = x1 + inst.helperProportions.width,\n          y1 = ui.offset.top,\n          y2 = y1 + inst.helperProportions.height;for (i = inst.snapElements.length - 1; i >= 0; i--) {\n        l = inst.snapElements[i].left - inst.margins.left;r = l + inst.snapElements[i].width;t = inst.snapElements[i].top - inst.margins.top;b = t + inst.snapElements[i].height;if (x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains(inst.snapElements[i].item.ownerDocument, inst.snapElements[i].item)) {\n          if (inst.snapElements[i].snapping) {\n            inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item }));\n          }inst.snapElements[i].snapping = false;continue;\n        }if (o.snapMode !== "inner") {\n          ts = Math.abs(t - y2) <= d;bs = Math.abs(b - y1) <= d;ls = Math.abs(l - x2) <= d;rs = Math.abs(r - x1) <= d;if (ts) {\n            ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top;\n          }if (bs) {\n            ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top;\n          }if (ls) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left;\n          }if (rs) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left;\n          }\n        }first = ts || bs || ls || rs;if (o.snapMode !== "outer") {\n          ts = Math.abs(t - y1) <= d;bs = Math.abs(b - y2) <= d;ls = Math.abs(l - x1) <= d;rs = Math.abs(r - x2) <= d;if (ts) {\n            ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top;\n          }if (bs) {\n            ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top;\n          }if (ls) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left;\n          }if (rs) {\n            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left;\n          }\n        }if (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {\n          inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item }));\n        }inst.snapElements[i].snapping = ts || bs || ls || rs || first;\n      }\n    } });$.ui.plugin.add("draggable", "stack", { start: function (event, ui, instance) {\n      var min,\n          o = instance.options,\n          group = $.makeArray($(o.stack)).sort(function (a, b) {\n        return (parseInt($(a).css("zIndex"), 10) || 0) - (parseInt($(b).css("zIndex"), 10) || 0);\n      });if (!group.length) {\n        return;\n      }min = parseInt($(group[0]).css("zIndex"), 10) || 0;$(group).each(function (i) {\n        $(this).css("zIndex", min + i);\n      });this.css("zIndex", min + group.length);\n    } });$.ui.plugin.add("draggable", "zIndex", { start: function (event, ui, instance) {\n      var t = $(ui.helper),\n          o = instance.options;if (t.css("zIndex")) {\n        o._zIndex = t.css("zIndex");\n      }t.css("zIndex", o.zIndex);\n    }, stop: function (event, ui, instance) {\n      var o = instance.options;if (o._zIndex) {\n        $(ui.helper).css("zIndex", o._zIndex);\n      }\n    } });var draggable = $.ui.draggable;$.widget("ui.resizable", $.ui.mouse, { version: "1.11.4", widgetEventPrefix: "resize", options: { alsoResize: false, animate: false, animateDuration: "slow", animateEasing: "swing", aspectRatio: false, autoHide: false, containment: false, ghost: false, grid: false, handles: "e,s,se", helper: false, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null }, _num: function (value) {\n      return parseInt(value, 10) || 0;\n    }, _isNumber: function (value) {\n      return !isNaN(parseInt(value, 10));\n    }, _hasScroll: function (el, a) {\n      if ($(el).css("overflow") === "hidden") {\n        return false;\n      }var scroll = a && a === "left" ? "scrollLeft" : "scrollTop",\n          has = false;if (el[scroll] > 0) {\n        return true;\n      }el[scroll] = 1;has = el[scroll] > 0;el[scroll] = 0;return has;\n    }, _create: function () {\n      var n,\n          i,\n          handle,\n          axis,\n          hname,\n          that = this,\n          o = this.options;this.element.addClass("ui-resizable");$.extend(this, { _aspectRatio: !!o.aspectRatio, aspectRatio: o.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null });if (this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)) {\n        this.element.wrap($("<div class=\'ui-wrapper\' style=\'overflow: hidden;\'></div>").css({ position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left") }));this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance"));this.elementIsWrapper = true;this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") });this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 });this.originalResizeStyle = this.originalElement.css("resize");this.originalElement.css("resize", "none");this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" }));this.originalElement.css({ margin: this.originalElement.css("margin") });this._proportionallyResize();\n      }this.handles = o.handles || (!$(".ui-resizable-handle", this.element).length ? "e,s,se" : { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" });this._handles = $();if (this.handles.constructor === String) {\n        if (this.handles === "all") {\n          this.handles = "n,e,s,w,se,sw,ne,nw";\n        }n = this.handles.split(",");this.handles = {};for (i = 0; i < n.length; i++) {\n          handle = $.trim(n[i]);hname = "ui-resizable-" + handle;axis = $("<div class=\'ui-resizable-handle " + hname + "\'></div>");axis.css({ zIndex: o.zIndex });this.handles[handle] = ".ui-resizable-" + handle;this.element.append(axis);\n        }\n      }this._renderAxis = function (target) {\n        var i, axis, padPos, padWrapper;target = target || this.element;for (i in this.handles) {\n          if (this.handles[i].constructor === String) {\n            this.handles[i] = this.element.children(this.handles[i]).first().show();\n          } else if (this.handles[i].jquery || this.handles[i].nodeType) {\n            this.handles[i] = $(this.handles[i]);this._on(this.handles[i], { mousedown: that._mouseDown });\n          }if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)) {\n            axis = $(this.handles[i], this.element);padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();padPos = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join("");target.css(padPos, padWrapper);this._proportionallyResize();\n          }this._handles = this._handles.add(this.handles[i]);\n        }\n      };this._renderAxis(this.element);this._handles = this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function () {\n        if (!that.resizing) {\n          if (this.className) {\n            axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);\n          }that.axis = axis && axis[1] ? axis[1] : "se";\n        }\n      });if (o.autoHide) {\n        this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function () {\n          if (o.disabled) {\n            return;\n          }$(this).removeClass("ui-resizable-autohide");that._handles.show();\n        }).mouseleave(function () {\n          if (o.disabled) {\n            return;\n          }if (!that.resizing) {\n            $(this).addClass("ui-resizable-autohide");that._handles.hide();\n          }\n        });\n      }this._mouseInit();\n    }, _destroy: function () {\n      this._mouseDestroy();var wrapper,\n          _destroy = function (exp) {\n        $(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();\n      };if (this.elementIsWrapper) {\n        _destroy(this.element);wrapper = this.element;this.originalElement.css({ position: wrapper.css("position"), width: wrapper.outerWidth(), height: wrapper.outerHeight(), top: wrapper.css("top"), left: wrapper.css("left") }).insertAfter(wrapper);wrapper.remove();\n      }this.originalElement.css("resize", this.originalResizeStyle);_destroy(this.originalElement);return this;\n    }, _mouseCapture: function (event) {\n      var i,\n          handle,\n          capture = false;for (i in this.handles) {\n        handle = $(this.handles[i])[0];if (handle === event.target || $.contains(handle, event.target)) {\n          capture = true;\n        }\n      }return !this.options.disabled && capture;\n    }, _mouseStart: function (event) {\n      var curleft,\n          curtop,\n          cursor,\n          o = this.options,\n          el = this.element;this.resizing = true;this._renderProxy();curleft = this._num(this.helper.css("left"));curtop = this._num(this.helper.css("top"));if (o.containment) {\n        curleft += $(o.containment).scrollLeft() || 0;curtop += $(o.containment).scrollTop() || 0;\n      }this.offset = this.helper.offset();this.position = { left: curleft, top: curtop };this.size = this._helper ? { width: this.helper.width(), height: this.helper.height() } : { width: el.width(), height: el.height() };this.originalSize = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };this.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };this.originalPosition = { left: curleft, top: curtop };this.originalMousePosition = { left: event.pageX, top: event.pageY };this.aspectRatio = typeof o.aspectRatio === "number" ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1;cursor = $(".ui-resizable-" + this.axis).css("cursor");$("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);el.addClass("ui-resizable-resizing");this._propagate("start", event);return true;\n    }, _mouseDrag: function (event) {\n      var data,\n          props,\n          smp = this.originalMousePosition,\n          a = this.axis,\n          dx = event.pageX - smp.left || 0,\n          dy = event.pageY - smp.top || 0,\n          trigger = this._change[a];this._updatePrevProperties();if (!trigger) {\n        return false;\n      }data = trigger.apply(this, [event, dx, dy]);this._updateVirtualBoundaries(event.shiftKey);if (this._aspectRatio || event.shiftKey) {\n        data = this._updateRatio(data, event);\n      }data = this._respectSize(data, event);this._updateCache(data);this._propagate("resize", event);props = this._applyChanges();if (!this._helper && this._proportionallyResizeElements.length) {\n        this._proportionallyResize();\n      }if (!$.isEmptyObject(props)) {\n        this._updatePrevProperties();this._trigger("resize", event, this.ui());this._applyChanges();\n      }return false;\n    }, _mouseStop: function (event) {\n      this.resizing = false;var pr,\n          ista,\n          soffseth,\n          soffsetw,\n          s,\n          left,\n          top,\n          o = this.options,\n          that = this;if (this._helper) {\n        pr = this._proportionallyResizeElements;ista = pr.length && /textarea/i.test(pr[0].nodeName);soffseth = ista && this._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height;soffsetw = ista ? 0 : that.sizeDiff.width;s = { width: that.helper.width() - soffsetw, height: that.helper.height() - soffseth };left = parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left) || null;top = parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top) || null;if (!o.animate) {\n          this.element.css($.extend(s, { top: top, left: left }));\n        }that.helper.height(that.size.height);that.helper.width(that.size.width);if (this._helper && !o.animate) {\n          this._proportionallyResize();\n        }\n      }$("body").css("cursor", "auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop", event);if (this._helper) {\n        this.helper.remove();\n      }return false;\n    }, _updatePrevProperties: function () {\n      this.prevPosition = { top: this.position.top, left: this.position.left };this.prevSize = { width: this.size.width, height: this.size.height };\n    }, _applyChanges: function () {\n      var props = {};if (this.position.top !== this.prevPosition.top) {\n        props.top = this.position.top + "px";\n      }if (this.position.left !== this.prevPosition.left) {\n        props.left = this.position.left + "px";\n      }if (this.size.width !== this.prevSize.width) {\n        props.width = this.size.width + "px";\n      }if (this.size.height !== this.prevSize.height) {\n        props.height = this.size.height + "px";\n      }this.helper.css(props);return props;\n    }, _updateVirtualBoundaries: function (forceAspectRatio) {\n      var pMinWidth,\n          pMaxWidth,\n          pMinHeight,\n          pMaxHeight,\n          b,\n          o = this.options;b = { minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0, maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : Infinity, minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0, maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : Infinity };if (this._aspectRatio || forceAspectRatio) {\n        pMinWidth = b.minHeight * this.aspectRatio;pMinHeight = b.minWidth / this.aspectRatio;pMaxWidth = b.maxHeight * this.aspectRatio;pMaxHeight = b.maxWidth / this.aspectRatio;if (pMinWidth > b.minWidth) {\n          b.minWidth = pMinWidth;\n        }if (pMinHeight > b.minHeight) {\n          b.minHeight = pMinHeight;\n        }if (pMaxWidth < b.maxWidth) {\n          b.maxWidth = pMaxWidth;\n        }if (pMaxHeight < b.maxHeight) {\n          b.maxHeight = pMaxHeight;\n        }\n      }this._vBoundaries = b;\n    }, _updateCache: function (data) {\n      this.offset = this.helper.offset();if (this._isNumber(data.left)) {\n        this.position.left = data.left;\n      }if (this._isNumber(data.top)) {\n        this.position.top = data.top;\n      }if (this._isNumber(data.height)) {\n        this.size.height = data.height;\n      }if (this._isNumber(data.width)) {\n        this.size.width = data.width;\n      }\n    }, _updateRatio: function (data) {\n      var cpos = this.position,\n          csize = this.size,\n          a = this.axis;if (this._isNumber(data.height)) {\n        data.width = data.height * this.aspectRatio;\n      } else if (this._isNumber(data.width)) {\n        data.height = data.width / this.aspectRatio;\n      }if (a === "sw") {\n        data.left = cpos.left + (csize.width - data.width);data.top = null;\n      }if (a === "nw") {\n        data.top = cpos.top + (csize.height - data.height);data.left = cpos.left + (csize.width - data.width);\n      }return data;\n    }, _respectSize: function (data) {\n      var o = this._vBoundaries,\n          a = this.axis,\n          ismaxw = this._isNumber(data.width) && o.maxWidth && o.maxWidth < data.width,\n          ismaxh = this._isNumber(data.height) && o.maxHeight && o.maxHeight < data.height,\n          isminw = this._isNumber(data.width) && o.minWidth && o.minWidth > data.width,\n          isminh = this._isNumber(data.height) && o.minHeight && o.minHeight > data.height,\n          dw = this.originalPosition.left + this.originalSize.width,\n          dh = this.position.top + this.size.height,\n          cw = /sw|nw|w/.test(a),\n          ch = /nw|ne|n/.test(a);if (isminw) {\n        data.width = o.minWidth;\n      }if (isminh) {\n        data.height = o.minHeight;\n      }if (ismaxw) {\n        data.width = o.maxWidth;\n      }if (ismaxh) {\n        data.height = o.maxHeight;\n      }if (isminw && cw) {\n        data.left = dw - o.minWidth;\n      }if (ismaxw && cw) {\n        data.left = dw - o.maxWidth;\n      }if (isminh && ch) {\n        data.top = dh - o.minHeight;\n      }if (ismaxh && ch) {\n        data.top = dh - o.maxHeight;\n      }if (!data.width && !data.height && !data.left && data.top) {\n        data.top = null;\n      } else if (!data.width && !data.height && !data.top && data.left) {\n        data.left = null;\n      }return data;\n    }, _getPaddingPlusBorderDimensions: function (element) {\n      var i = 0,\n          widths = [],\n          borders = [element.css("borderTopWidth"), element.css("borderRightWidth"), element.css("borderBottomWidth"), element.css("borderLeftWidth")],\n          paddings = [element.css("paddingTop"), element.css("paddingRight"), element.css("paddingBottom"), element.css("paddingLeft")];for (; i < 4; i++) {\n        widths[i] = parseInt(borders[i], 10) || 0;widths[i] += parseInt(paddings[i], 10) || 0;\n      }return { height: widths[0] + widths[2], width: widths[1] + widths[3] };\n    }, _proportionallyResize: function () {\n      if (!this._proportionallyResizeElements.length) {\n        return;\n      }var prel,\n          i = 0,\n          element = this.helper || this.element;for (; i < this._proportionallyResizeElements.length; i++) {\n        prel = this._proportionallyResizeElements[i];if (!this.outerDimensions) {\n          this.outerDimensions = this._getPaddingPlusBorderDimensions(prel);\n        }prel.css({ height: element.height() - this.outerDimensions.height || 0, width: element.width() - this.outerDimensions.width || 0 });\n      }\n    }, _renderProxy: function () {\n      var el = this.element,\n          o = this.options;this.elementOffset = el.offset();if (this._helper) {\n        this.helper = this.helper || $("<div style=\'overflow:hidden;\'></div>");this.helper.addClass(this._helper).css({ width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++o.zIndex });this.helper.appendTo("body").disableSelection();\n      } else {\n        this.helper = this.element;\n      }\n    }, _change: { e: function (event, dx) {\n        return { width: this.originalSize.width + dx };\n      }, w: function (event, dx) {\n        var cs = this.originalSize,\n            sp = this.originalPosition;return { left: sp.left + dx, width: cs.width - dx };\n      }, n: function (event, dx, dy) {\n        var cs = this.originalSize,\n            sp = this.originalPosition;return { top: sp.top + dy, height: cs.height - dy };\n      }, s: function (event, dx, dy) {\n        return { height: this.originalSize.height + dy };\n      }, se: function (event, dx, dy) {\n        return $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));\n      }, sw: function (event, dx, dy) {\n        return $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));\n      }, ne: function (event, dx, dy) {\n        return $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));\n      }, nw: function (event, dx, dy) {\n        return $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));\n      } }, _propagate: function (n, event) {\n      $.ui.plugin.call(this, n, [event, this.ui()]);n !== "resize" && this._trigger(n, event, this.ui());\n    }, plugins: {}, ui: function () {\n      return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition };\n    } });$.ui.plugin.add("resizable", "animate", { stop: function (event) {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          pr = that._proportionallyResizeElements,\n          ista = pr.length && /textarea/i.test(pr[0].nodeName),\n          soffseth = ista && that._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height,\n          soffsetw = ista ? 0 : that.sizeDiff.width,\n          style = { width: that.size.width - soffsetw, height: that.size.height - soffseth },\n          left = parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left) || null,\n          top = parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top) || null;that.element.animate($.extend(style, top && left ? { top: top, left: left } : {}), { duration: o.animateDuration, easing: o.animateEasing, step: function () {\n          var data = { width: parseInt(that.element.css("width"), 10), height: parseInt(that.element.css("height"), 10), top: parseInt(that.element.css("top"), 10), left: parseInt(that.element.css("left"), 10) };if (pr && pr.length) {\n            $(pr[0]).css({ width: data.width, height: data.height });\n          }that._updateCache(data);that._propagate("resize", event);\n        } });\n    } });$.ui.plugin.add("resizable", "containment", { start: function () {\n      var element,\n          p,\n          co,\n          ch,\n          cw,\n          width,\n          height,\n          that = $(this).resizable("instance"),\n          o = that.options,\n          el = that.element,\n          oc = o.containment,\n          ce = oc instanceof $ ? oc.get(0) : /parent/.test(oc) ? el.parent().get(0) : oc;if (!ce) {\n        return;\n      }that.containerElement = $(ce);if (/document/.test(oc) || oc === document) {\n        that.containerOffset = { left: 0, top: 0 };that.containerPosition = { left: 0, top: 0 };that.parentData = { element: $(document), left: 0, top: 0, width: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight };\n      } else {\n        element = $(ce);p = [];$(["Top", "Right", "Left", "Bottom"]).each(function (i, name) {\n          p[i] = that._num(element.css("padding" + name));\n        });that.containerOffset = element.offset();that.containerPosition = element.position();that.containerSize = { height: element.innerHeight() - p[3], width: element.innerWidth() - p[1] };co = that.containerOffset;ch = that.containerSize.height;cw = that.containerSize.width;width = that._hasScroll(ce, "left") ? ce.scrollWidth : cw;height = that._hasScroll(ce) ? ce.scrollHeight : ch;that.parentData = { element: ce, left: co.left, top: co.top, width: width, height: height };\n      }\n    }, resize: function (event) {\n      var woset,\n          hoset,\n          isParent,\n          isOffsetRelative,\n          that = $(this).resizable("instance"),\n          o = that.options,\n          co = that.containerOffset,\n          cp = that.position,\n          pRatio = that._aspectRatio || event.shiftKey,\n          cop = { top: 0, left: 0 },\n          ce = that.containerElement,\n          continueResize = true;if (ce[0] !== document && /static/.test(ce.css("position"))) {\n        cop = co;\n      }if (cp.left < (that._helper ? co.left : 0)) {\n        that.size.width = that.size.width + (that._helper ? that.position.left - co.left : that.position.left - cop.left);if (pRatio) {\n          that.size.height = that.size.width / that.aspectRatio;continueResize = false;\n        }that.position.left = o.helper ? co.left : 0;\n      }if (cp.top < (that._helper ? co.top : 0)) {\n        that.size.height = that.size.height + (that._helper ? that.position.top - co.top : that.position.top);if (pRatio) {\n          that.size.width = that.size.height * that.aspectRatio;continueResize = false;\n        }that.position.top = that._helper ? co.top : 0;\n      }isParent = that.containerElement.get(0) === that.element.parent().get(0);isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));if (isParent && isOffsetRelative) {\n        that.offset.left = that.parentData.left + that.position.left;that.offset.top = that.parentData.top + that.position.top;\n      } else {\n        that.offset.left = that.element.offset().left;that.offset.top = that.element.offset().top;\n      }woset = Math.abs(that.sizeDiff.width + (that._helper ? that.offset.left - cop.left : that.offset.left - co.left));hoset = Math.abs(that.sizeDiff.height + (that._helper ? that.offset.top - cop.top : that.offset.top - co.top));if (woset + that.size.width > that.parentData.width) {\n        that.size.width = that.parentData.width - woset;if (pRatio) {\n          that.size.height = that.size.width / that.aspectRatio;continueResize = false;\n        }\n      }if (hoset + that.size.height > that.parentData.height) {\n        that.size.height = that.parentData.height - hoset;if (pRatio) {\n          that.size.width = that.size.height * that.aspectRatio;continueResize = false;\n        }\n      }if (!continueResize) {\n        that.position.left = that.prevPosition.left;that.position.top = that.prevPosition.top;that.size.width = that.prevSize.width;that.size.height = that.prevSize.height;\n      }\n    }, stop: function () {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          co = that.containerOffset,\n          cop = that.containerPosition,\n          ce = that.containerElement,\n          helper = $(that.helper),\n          ho = helper.offset(),\n          w = helper.outerWidth() - that.sizeDiff.width,\n          h = helper.outerHeight() - that.sizeDiff.height;if (that._helper && !o.animate && /relative/.test(ce.css("position"))) {\n        $(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });\n      }if (that._helper && !o.animate && /static/.test(ce.css("position"))) {\n        $(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });\n      }\n    } });$.ui.plugin.add("resizable", "alsoResize", { start: function () {\n      var that = $(this).resizable("instance"),\n          o = that.options;$(o.alsoResize).each(function () {\n        var el = $(this);el.data("ui-resizable-alsoresize", { width: parseInt(el.width(), 10), height: parseInt(el.height(), 10), left: parseInt(el.css("left"), 10), top: parseInt(el.css("top"), 10) });\n      });\n    }, resize: function (event, ui) {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          os = that.originalSize,\n          op = that.originalPosition,\n          delta = { height: that.size.height - os.height || 0, width: that.size.width - os.width || 0, top: that.position.top - op.top || 0, left: that.position.left - op.left || 0 };$(o.alsoResize).each(function () {\n        var el = $(this),\n            start = $(this).data("ui-resizable-alsoresize"),\n            style = {},\n            css = el.parents(ui.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];$.each(css, function (i, prop) {\n          var sum = (start[prop] || 0) + (delta[prop] || 0);if (sum && sum >= 0) {\n            style[prop] = sum || null;\n          }\n        });el.css(style);\n      });\n    }, stop: function () {\n      $(this).removeData("resizable-alsoresize");\n    } });$.ui.plugin.add("resizable", "ghost", { start: function () {\n      var that = $(this).resizable("instance"),\n          o = that.options,\n          cs = that.size;that.ghost = that.originalElement.clone();that.ghost.css({ opacity: .25, display: "block", position: "relative", height: cs.height, width: cs.width, margin: 0, left: 0, top: 0 }).addClass("ui-resizable-ghost").addClass(typeof o.ghost === "string" ? o.ghost : "");that.ghost.appendTo(that.helper);\n    }, resize: function () {\n      var that = $(this).resizable("instance");if (that.ghost) {\n        that.ghost.css({ position: "relative", height: that.size.height, width: that.size.width });\n      }\n    }, stop: function () {\n      var that = $(this).resizable("instance");if (that.ghost && that.helper) {\n        that.helper.get(0).removeChild(that.ghost.get(0));\n      }\n    } });$.ui.plugin.add("resizable", "grid", { resize: function () {\n      var outerDimensions,\n          that = $(this).resizable("instance"),\n          o = that.options,\n          cs = that.size,\n          os = that.originalSize,\n          op = that.originalPosition,\n          a = that.axis,\n          grid = typeof o.grid === "number" ? [o.grid, o.grid] : o.grid,\n          gridX = grid[0] || 1,\n          gridY = grid[1] || 1,\n          ox = Math.round((cs.width - os.width) / gridX) * gridX,\n          oy = Math.round((cs.height - os.height) / gridY) * gridY,\n          newWidth = os.width + ox,\n          newHeight = os.height + oy,\n          isMaxWidth = o.maxWidth && o.maxWidth < newWidth,\n          isMaxHeight = o.maxHeight && o.maxHeight < newHeight,\n          isMinWidth = o.minWidth && o.minWidth > newWidth,\n          isMinHeight = o.minHeight && o.minHeight > newHeight;o.grid = grid;if (isMinWidth) {\n        newWidth += gridX;\n      }if (isMinHeight) {\n        newHeight += gridY;\n      }if (isMaxWidth) {\n        newWidth -= gridX;\n      }if (isMaxHeight) {\n        newHeight -= gridY;\n      }if (/^(se|s|e)$/.test(a)) {\n        that.size.width = newWidth;that.size.height = newHeight;\n      } else if (/^(ne)$/.test(a)) {\n        that.size.width = newWidth;that.size.height = newHeight;that.position.top = op.top - oy;\n      } else if (/^(sw)$/.test(a)) {\n        that.size.width = newWidth;that.size.height = newHeight;that.position.left = op.left - ox;\n      } else {\n        if (newHeight - gridY <= 0 || newWidth - gridX <= 0) {\n          outerDimensions = that._getPaddingPlusBorderDimensions(this);\n        }if (newHeight - gridY > 0) {\n          that.size.height = newHeight;that.position.top = op.top - oy;\n        } else {\n          newHeight = gridY - outerDimensions.height;that.size.height = newHeight;that.position.top = op.top + os.height - newHeight;\n        }if (newWidth - gridX > 0) {\n          that.size.width = newWidth;that.position.left = op.left - ox;\n        } else {\n          newWidth = gridX - outerDimensions.width;that.size.width = newWidth;that.position.left = op.left + os.width - newWidth;\n        }\n      }\n    } });var resizable = $.ui.resizable;var slider = $.widget("ui.slider", $.ui.mouse, { version: "1.11.4", widgetEventPrefix: "slide", options: { animate: false, distance: 0, max: 100, min: 0, orientation: "horizontal", range: false, step: 1, value: 0, values: null, change: null, slide: null, start: null, stop: null }, numPages: 5, _create: function () {\n      this._keySliding = false;this._mouseSliding = false;this._animateOff = true;this._handleIndex = null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider" + " ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all");this._refresh();this._setOption("disabled", this.options.disabled);this._animateOff = false;\n    }, _refresh: function () {\n      this._createRange();this._createHandles();this._setupEvents();this._refreshValue();\n    }, _createHandles: function () {\n      var i,\n          handleCount,\n          options = this.options,\n          existingHandles = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),\n          handle = "<span class=\'ui-slider-handle ui-state-default ui-corner-all\' tabindex=\'0\'></span>",\n          handles = [];handleCount = options.values && options.values.length || 1;if (existingHandles.length > handleCount) {\n        existingHandles.slice(handleCount).remove();existingHandles = existingHandles.slice(0, handleCount);\n      }for (i = existingHandles.length; i < handleCount; i++) {\n        handles.push(handle);\n      }this.handles = existingHandles.add($(handles.join("")).appendTo(this.element));this.handle = this.handles.eq(0);this.handles.each(function (i) {\n        $(this).data("ui-slider-handle-index", i);\n      });\n    }, _createRange: function () {\n      var options = this.options,\n          classes = "";if (options.range) {\n        if (options.range === true) {\n          if (!options.values) {\n            options.values = [this._valueMin(), this._valueMin()];\n          } else if (options.values.length && options.values.length !== 2) {\n            options.values = [options.values[0], options.values[0]];\n          } else if ($.isArray(options.values)) {\n            options.values = options.values.slice(0);\n          }\n        }if (!this.range || !this.range.length) {\n          this.range = $("<div></div>").appendTo(this.element);classes = "ui-slider-range" + " ui-widget-header ui-corner-all";\n        } else {\n          this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({ left: "", bottom: "" });\n        }this.range.addClass(classes + (options.range === "min" || options.range === "max" ? " ui-slider-range-" + options.range : ""));\n      } else {\n        if (this.range) {\n          this.range.remove();\n        }this.range = null;\n      }\n    }, _setupEvents: function () {\n      this._off(this.handles);this._on(this.handles, this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles);\n    }, _destroy: function () {\n      this.handles.remove();if (this.range) {\n        this.range.remove();\n      }this.element.removeClass("ui-slider" + " ui-slider-horizontal" + " ui-slider-vertical" + " ui-widget" + " ui-widget-content" + " ui-corner-all");this._mouseDestroy();\n    }, _mouseCapture: function (event) {\n      var position,\n          normValue,\n          distance,\n          closestHandle,\n          index,\n          allowed,\n          offset,\n          mouseOverHandle,\n          that = this,\n          o = this.options;if (o.disabled) {\n        return false;\n      }this.elementSize = { width: this.element.outerWidth(), height: this.element.outerHeight() };this.elementOffset = this.element.offset();position = { x: event.pageX, y: event.pageY };normValue = this._normValueFromMouse(position);distance = this._valueMax() - this._valueMin() + 1;this.handles.each(function (i) {\n        var thisDistance = Math.abs(normValue - that.values(i));\n\n        if (distance > thisDistance || distance === thisDistance && (i === that._lastChangedValue || that.values(i) === o.min)) {\n          distance = thisDistance;closestHandle = $(this);index = i;\n        }\n      });allowed = this._start(event, index);if (allowed === false) {\n        return false;\n      }this._mouseSliding = true;this._handleIndex = index;closestHandle.addClass("ui-state-active").focus();offset = closestHandle.offset();mouseOverHandle = !$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : { left: event.pageX - offset.left - closestHandle.width() / 2, top: event.pageY - offset.top - closestHandle.height() / 2 - (parseInt(closestHandle.css("borderTopWidth"), 10) || 0) - (parseInt(closestHandle.css("borderBottomWidth"), 10) || 0) + (parseInt(closestHandle.css("marginTop"), 10) || 0) };if (!this.handles.hasClass("ui-state-hover")) {\n        this._slide(event, index, normValue);\n      }this._animateOff = true;return true;\n    }, _mouseStart: function () {\n      return true;\n    }, _mouseDrag: function (event) {\n      var position = { x: event.pageX, y: event.pageY },\n          normValue = this._normValueFromMouse(position);this._slide(event, this._handleIndex, normValue);return false;\n    }, _mouseStop: function (event) {\n      this.handles.removeClass("ui-state-active");this._mouseSliding = false;this._stop(event, this._handleIndex);this._change(event, this._handleIndex);this._handleIndex = null;this._clickOffset = null;this._animateOff = false;return false;\n    }, _detectOrientation: function () {\n      this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal";\n    }, _normValueFromMouse: function (position) {\n      var pixelTotal, pixelMouse, percentMouse, valueTotal, valueMouse;if (this.orientation === "horizontal") {\n        pixelTotal = this.elementSize.width;pixelMouse = position.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0);\n      } else {\n        pixelTotal = this.elementSize.height;pixelMouse = position.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0);\n      }percentMouse = pixelMouse / pixelTotal;if (percentMouse > 1) {\n        percentMouse = 1;\n      }if (percentMouse < 0) {\n        percentMouse = 0;\n      }if (this.orientation === "vertical") {\n        percentMouse = 1 - percentMouse;\n      }valueTotal = this._valueMax() - this._valueMin();valueMouse = this._valueMin() + percentMouse * valueTotal;return this._trimAlignValue(valueMouse);\n    }, _start: function (event, index) {\n      var uiHash = { handle: this.handles[index], value: this.value() };if (this.options.values && this.options.values.length) {\n        uiHash.value = this.values(index);uiHash.values = this.values();\n      }return this._trigger("start", event, uiHash);\n    }, _slide: function (event, index, newVal) {\n      var otherVal, newValues, allowed;if (this.options.values && this.options.values.length) {\n        otherVal = this.values(index ? 0 : 1);if (this.options.values.length === 2 && this.options.range === true && (index === 0 && newVal > otherVal || index === 1 && newVal < otherVal)) {\n          newVal = otherVal;\n        }if (newVal !== this.values(index)) {\n          newValues = this.values();newValues[index] = newVal;allowed = this._trigger("slide", event, { handle: this.handles[index], value: newVal, values: newValues });otherVal = this.values(index ? 0 : 1);if (allowed !== false) {\n            this.values(index, newVal);\n          }\n        }\n      } else {\n        if (newVal !== this.value()) {\n          allowed = this._trigger("slide", event, { handle: this.handles[index], value: newVal });if (allowed !== false) {\n            this.value(newVal);\n          }\n        }\n      }\n    }, _stop: function (event, index) {\n      var uiHash = { handle: this.handles[index], value: this.value() };if (this.options.values && this.options.values.length) {\n        uiHash.value = this.values(index);uiHash.values = this.values();\n      }this._trigger("stop", event, uiHash);\n    }, _change: function (event, index) {\n      if (!this._keySliding && !this._mouseSliding) {\n        var uiHash = { handle: this.handles[index], value: this.value() };if (this.options.values && this.options.values.length) {\n          uiHash.value = this.values(index);uiHash.values = this.values();\n        }this._lastChangedValue = index;this._trigger("change", event, uiHash);\n      }\n    }, value: function (newValue) {\n      if (arguments.length) {\n        this.options.value = this._trimAlignValue(newValue);this._refreshValue();this._change(null, 0);return;\n      }return this._value();\n    }, values: function (index, newValue) {\n      var vals, newValues, i;if (arguments.length > 1) {\n        this.options.values[index] = this._trimAlignValue(newValue);this._refreshValue();this._change(null, index);return;\n      }if (arguments.length) {\n        if ($.isArray(arguments[0])) {\n          vals = this.options.values;newValues = arguments[0];for (i = 0; i < vals.length; i += 1) {\n            vals[i] = this._trimAlignValue(newValues[i]);this._change(null, i);\n          }this._refreshValue();\n        } else {\n          if (this.options.values && this.options.values.length) {\n            return this._values(index);\n          } else {\n            return this.value();\n          }\n        }\n      } else {\n        return this._values();\n      }\n    }, _setOption: function (key, value) {\n      var i,\n          valsLength = 0;if (key === "range" && this.options.range === true) {\n        if (value === "min") {\n          this.options.value = this._values(0);this.options.values = null;\n        } else if (value === "max") {\n          this.options.value = this._values(this.options.values.length - 1);this.options.values = null;\n        }\n      }if ($.isArray(this.options.values)) {\n        valsLength = this.options.values.length;\n      }if (key === "disabled") {\n        this.element.toggleClass("ui-state-disabled", !!value);\n      }this._super(key, value);switch (key) {case "orientation":\n          this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation);this._refreshValue();this.handles.css(value === "horizontal" ? "bottom" : "left", "");break;case "value":\n          this._animateOff = true;this._refreshValue();this._change(null, 0);this._animateOff = false;break;case "values":\n          this._animateOff = true;this._refreshValue();for (i = 0; i < valsLength; i += 1) {\n            this._change(null, i);\n          }this._animateOff = false;break;case "step":case "min":case "max":\n          this._animateOff = true;this._calculateNewMax();this._refreshValue();this._animateOff = false;break;case "range":\n          this._animateOff = true;this._refresh();this._animateOff = false;break;}\n    }, _value: function () {\n      var val = this.options.value;val = this._trimAlignValue(val);return val;\n    }, _values: function (index) {\n      var val, vals, i;if (arguments.length) {\n        val = this.options.values[index];val = this._trimAlignValue(val);return val;\n      } else if (this.options.values && this.options.values.length) {\n        vals = this.options.values.slice();for (i = 0; i < vals.length; i += 1) {\n          vals[i] = this._trimAlignValue(vals[i]);\n        }return vals;\n      } else {\n        return [];\n      }\n    }, _trimAlignValue: function (val) {\n      if (val <= this._valueMin()) {\n        return this._valueMin();\n      }if (val >= this._valueMax()) {\n        return this._valueMax();\n      }var step = this.options.step > 0 ? this.options.step : 1,\n          valModStep = (val - this._valueMin()) % step,\n          alignValue = val - valModStep;if (Math.abs(valModStep) * 2 >= step) {\n        alignValue += valModStep > 0 ? step : -step;\n      }return parseFloat(alignValue.toFixed(5));\n    }, _calculateNewMax: function () {\n      var max = this.options.max,\n          min = this._valueMin(),\n          step = this.options.step,\n          aboveMin = Math.floor(+(max - min).toFixed(this._precision()) / step) * step;max = aboveMin + min;this.max = parseFloat(max.toFixed(this._precision()));\n    }, _precision: function () {\n      var precision = this._precisionOf(this.options.step);if (this.options.min !== null) {\n        precision = Math.max(precision, this._precisionOf(this.options.min));\n      }return precision;\n    }, _precisionOf: function (num) {\n      var str = num.toString(),\n          decimal = str.indexOf(".");return decimal === -1 ? 0 : str.length - decimal - 1;\n    }, _valueMin: function () {\n      return this.options.min;\n    }, _valueMax: function () {\n      return this.max;\n    }, _refreshValue: function () {\n      var lastValPercent,\n          valPercent,\n          value,\n          valueMin,\n          valueMax,\n          oRange = this.options.range,\n          o = this.options,\n          that = this,\n          animate = !this._animateOff ? o.animate : false,\n          _set = {};if (this.options.values && this.options.values.length) {\n        this.handles.each(function (i) {\n          valPercent = (that.values(i) - that._valueMin()) / (that._valueMax() - that._valueMin()) * 100;_set[that.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";$(this).stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);if (that.options.range === true) {\n            if (that.orientation === "horizontal") {\n              if (i === 0) {\n                that.range.stop(1, 1)[animate ? "animate" : "css"]({ left: valPercent + "%" }, o.animate);\n              }if (i === 1) {\n                that.range[animate ? "animate" : "css"]({ width: valPercent - lastValPercent + "%" }, { queue: false, duration: o.animate });\n              }\n            } else {\n              if (i === 0) {\n                that.range.stop(1, 1)[animate ? "animate" : "css"]({ bottom: valPercent + "%" }, o.animate);\n              }if (i === 1) {\n                that.range[animate ? "animate" : "css"]({ height: valPercent - lastValPercent + "%" }, { queue: false, duration: o.animate });\n              }\n            }\n          }lastValPercent = valPercent;\n        });\n      } else {\n        value = this.value();valueMin = this._valueMin();valueMax = this._valueMax();valPercent = valueMax !== valueMin ? (value - valueMin) / (valueMax - valueMin) * 100 : 0;_set[this.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";this.handle.stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);if (oRange === "min" && this.orientation === "horizontal") {\n          this.range.stop(1, 1)[animate ? "animate" : "css"]({ width: valPercent + "%" }, o.animate);\n        }if (oRange === "max" && this.orientation === "horizontal") {\n          this.range[animate ? "animate" : "css"]({ width: 100 - valPercent + "%" }, { queue: false, duration: o.animate });\n        }if (oRange === "min" && this.orientation === "vertical") {\n          this.range.stop(1, 1)[animate ? "animate" : "css"]({ height: valPercent + "%" }, o.animate);\n        }if (oRange === "max" && this.orientation === "vertical") {\n          this.range[animate ? "animate" : "css"]({ height: 100 - valPercent + "%" }, { queue: false, duration: o.animate });\n        }\n      }\n    }, _handleEvents: { keydown: function (event) {\n        var allowed,\n            curVal,\n            newVal,\n            step,\n            index = $(event.target).data("ui-slider-handle-index");switch (event.keyCode) {case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:\n            event.preventDefault();if (!this._keySliding) {\n              this._keySliding = true;$(event.target).addClass("ui-state-active");allowed = this._start(event, index);if (allowed === false) {\n                return;\n              }\n            }break;}step = this.options.step;if (this.options.values && this.options.values.length) {\n          curVal = newVal = this.values(index);\n        } else {\n          curVal = newVal = this.value();\n        }switch (event.keyCode) {case $.ui.keyCode.HOME:\n            newVal = this._valueMin();break;case $.ui.keyCode.END:\n            newVal = this._valueMax();break;case $.ui.keyCode.PAGE_UP:\n            newVal = this._trimAlignValue(curVal + (this._valueMax() - this._valueMin()) / this.numPages);break;case $.ui.keyCode.PAGE_DOWN:\n            newVal = this._trimAlignValue(curVal - (this._valueMax() - this._valueMin()) / this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:\n            if (curVal === this._valueMax()) {\n              return;\n            }newVal = this._trimAlignValue(curVal + step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:\n            if (curVal === this._valueMin()) {\n              return;\n            }newVal = this._trimAlignValue(curVal - step);break;}this._slide(event, index, newVal);\n      }, keyup: function (event) {\n        var index = $(event.target).data("ui-slider-handle-index");if (this._keySliding) {\n          this._keySliding = false;this._stop(event, index);this._change(event, index);$(event.target).removeClass("ui-state-active");\n        }\n      } } });\n});';
},871:function(t,e,i){function n(){this.after("initialize",function(){this.scribeOnEvent("uiMomentClicked",{action:"click"}),this.scribeOnEvent("uiMomentCtaClicked",{action:"click"}),this.scribeOnEvent("uiFollowMoment",{action:"follow"}),this.scribeOnEvent("uiUnfollowMoment",{action:"unfollow"}),this.scribeOnEvent("uiLikeMoment",{action:"like"}),this.scribeOnEvent("uiUnlikeMoment",{action:"unlike"})})}var o=i(10),s=i(40);t.exports=o(n,s)},872:function(t,e,i){(function(e){function n(){this.defaultAttrs({itemSelector:".MomentCapsuleSummary",ctaSelector:".MomentCallToAction",defaultLinkSelector:".js-default-link"}),this.onCapsuleClick=function(t,i){if(this.isValidClickTarget(t)){var n=e(i.el).closest(this.attr.itemSelector),o=n.find(this.attr.defaultLinkSelector);this.trigger("uiMomentClicked",this.getMomentScribeInfo(o)),this.trigger("uiNavigate",{href:o.attr("href")})}},this.onDefaultLinkClick=function(t,i){var n=e(t.target);this.trigger("uiMomentClicked",this.getMomentScribeInfo(n))},this.onCtaClick=function(t){var i=e(t.target);this.trigger("uiMomentCtaClicked",this.getMomentScribeInfo(i))},this.isValidClickTarget=function(t){return 0===e(t.target).closest("a, button").length},this.after("initialize",function(){this.on("click",{itemSelector:this.onCapsuleClick,defaultLinkSelector:this.onDefaultLinkClick,ctaSelector:this.onCtaClick})})}var o=i(10),s=i(660);t.exports=o(n,s)}).call(e,i(1))},873:function(t,e,i){(function(e){function n(){this.defaultAttrs({top:"20%",triggerSelector:".js-deleteMoment",confirmDeleteSelector:".js-confirmDeleteMoment",momentCapsuleSelector:".MomentCapsuleSummary",momentId:void 0,deleteInline:!1}),this.onConfirmDeleteMoment=function(t,e){this.trigger("uiMomentMakerDeleteMoment",{moment_id:this.momentId})},this.onDeleteSuccess=function(t,i){if(this.attr.deleteInline){var n=this.attr.momentCapsuleSelector+'[data-moment-id="'+this.momentId+'"]';e(n).remove(),this.close(),this.momentId=void 0}else this.redirect(i.href)},this.onDeleteFailure=function(){this.momentId=void 0,this.close(),this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be deleted. Give it a minute, then try again."})},this.redirect=function(t){location.href=t},this.before("openWhenTriggerClicked",function(t){this.momentId=this.attr.momentId||e(t.target).closest("[data-moment-id]").attr("data-moment-id")}),this.after("initialize",function(){this.on("click",{confirmDeleteSelector:this.onConfirmDeleteMoment}),this.on(document,"dataMomentMakerDeleteMomentSuccess",this.onDeleteSuccess),this.on(document,"dataMomentMakerDeleteMomentFailure",this.onDeleteFailure)})}var o=(i(22),i(10)),s=i(59);t.exports=o(s,n)}).call(e,i(1))},874:function(t,e,i){function n(){this.defaultAttrs({momentFinishLaterSelector:".MomentMakerTopBar-finishLaterButton",momentDoneSelector:".MomentMakerTopBar-doneButton"}),this.scribeTopBarClick=function(t){this.scribe({component:"top_bar",element:t,action:"click"})},this.scribeVisibilityUpdate=function(t,e){this.scribe({component:"visibility_dialog",element:e.visibility_mode,action:"click"})},this.scribeDeleteClick=function(){this.scribe({component:"delete_dialog",element:"delete",action:"click"})},this.after("initialize",function(){this.on("click",{momentFinishLaterSelector:this.scribeTopBarClick.bind(this,"finish_later"),momentDoneSelector:this.scribeTopBarClick.bind(this,"done")}),this.on("uiMomentMakerDeleteMoment",this.scribeDeleteClick),this.on("uiMomentMakerUpdateVisibility",this.scribeVisibilityUpdate)})}var o=i(10),s=i(40);t.exports=o(n,s)},1185:function(t,e,i){function n(){this.follow=function(t,e){this.post({url:"/i/moments/follow",data:e,success:"dataMomentFollowSuccess",error:"dataMomentFollowError"})},this.unfollow=function(t,e){this.post({url:"/i/moments/unfollow",data:e,success:"dataMomentUnfollowSuccess",error:"dataMomentUnfollowError"})},this.after("initialize",function(){this.on("uiFollowMoment",this.follow),this.on("uiUnfollowMoment",this.unfollow)})}var o=i(10),s=i(226),a=i(235);t.exports=o(n,s,a)},1186:function(t,e,i){(function(e){function n(){this.attributes({buttonSelector:".MomentFollowButton",followSelector:".MomentFollowButton.is-notFollowing",unfollowSelector:".MomentFollowButton.is-following",followingStateClass:"is-following",notFollowingStateClass:"is-notFollowing",momentIdAttr:"data-moment-id",loggedIn:!1}),this.handleFollowUnfollow=function(t,i){i.stopPropagation();var n="uiFollowMoment"===t,o=e(i.target).closest(this.attr.buttonSelector),a=o.attr(this.attr.momentIdAttr);a&&(this.trigger(t,s.merge({moment_id:a},this.getMomentScribeInfo(o))),e(this.attr.buttonSelector).filter('[data-moment-id="'+a+'"]').toggleClass(this.attr.notFollowingStateClass,!n).toggleClass(this.attr.followingStateClass,n))},this.after("initialize",function(){this.attr.loggedIn?this.on("click ",{followSelector:this.handleFollowUnfollow.bind(this,"uiFollowMoment"),unfollowSelector:this.handleFollowUnfollow.bind(this,"uiUnfollowMoment")}):this.on("click",{followSelector:"uiOpenSignupDialog"})})}var o=i(10),s=i(25),a=i(660);t.exports=o(n,a)}).call(e,i(1))},1187:function(t,e,i){function n(){this.like=function(t,e){this.post({url:"/i/moments/like",data:e,success:"dataMomentLikeSuccess",error:function(t){this.trigger("dataMomentLikeError",s.merge({momentId:e.moment_id,data:t}))}.bind(this)})},this.unlike=function(t,e){this.post({url:"/i/moments/unlike",data:e,success:"dataMomentUnlikeSuccess",error:function(t){this.trigger("dataMomentUnlikeError",s.merge({momentId:e.moment_id,data:t}))}.bind(this)})},this.after("initialize",function(){this.on("uiLikeMoment",this.like),this.on("uiUnlikeMoment",this.unlike)})}var o=i(10),s=i(25),a=i(235),r=i(226);t.exports=o(n,r,a)},1188:function(t,e,i){(function(e){function n(){this.attributes({buttonSelector:".MomentLikeButton",likedSelector:".MomentLikeButton.is-liked",notLikedSelector:".MomentLikeButton.is-notLiked",likedStateClass:"is-liked",notLikedStateClass:"is-notLiked",momentIdAttr:"data-moment-id",loggedIn:!1}),this.triggerEvent=function(t,e,i){this.trigger(t,s.merge({moment_id:e},this.getMomentScribeInfo(i)))},this.updateLikeButtons=function(t,e){var i="uiLikeMoment"===t;this.select("buttonSelector").filter('[data-moment-id="'+e+'"]').toggleClass(this.attr.notLikedStateClass,!i).toggleClass(this.attr.likedStateClass,i)},this.handleLikeUnlikeRollback=function(t,e,i){this.updateLikeButtons(t,i.momentId)},this.handleClick=function(t,i){i.stopPropagation();var n=e(i.target).closest(this.attr.buttonSelector),o=n.attr(this.attr.momentIdAttr);o&&(this.triggerEvent(t,o,n),this.updateLikeButtons(t,o))},this.after("initialize",function(){this.attr.loggedIn?(this.on("click",{notLikedSelector:this.handleClick.bind(this,"uiLikeMoment"),likedSelector:this.handleClick.bind(this,"uiUnlikeMoment")}),this.on(document,"dataMomentLikeError",this.handleLikeUnlikeRollback.bind(this,"uiUnlikeMoment")),this.on(document,"dataMomentUnlikeError",this.handleLikeUnlikeRollback.bind(this,"uiLikeMoment"))):this.on("click",{notLikedSelector:"uiOpenSignupDialog"})})}var o=i(10),s=i(25),a=i(660);t.exports=o(n,a)}).call(e,i(1))},1189:function(t,e,i){(function(e){function n(){this.viewportHelpers=s,this.utils=a,this.defaultAttrs({audioPlayerContainerSelector:".MomentMediaItem-entity--audio",audioPlayerLoadedClass:"is-loaded",loadThreshold:500,scrollThrottle:100}),this.processMedia=function(){this.$mediaContainers.each(function(t,i){var n=e(i),o=s.isWithinBounds(this.$window,n,this.attr.loadThreshold),a=n.hasClass(this.attr.audioPlayerLoadedClass);!a&&o?n.trigger("uiAudioPlayerLoadIframe"):a&&!o&&n.trigger("uiAudioPlayerUnloadIframe")}.bind(this))},this.after("initialize",function(){this.$window=e(window),this.$mediaContainers=this.select("audioPlayerContainerSelector"),this.throttledProcessMedia=a.throttle(this.processMedia.bind(this),this.attr.scrollThrottle),this.on(this.$window,"resize",this.throttledProcessMedia),this.on(document,"uiSwiftLoaded uiPageChanged scroll",this.throttledProcessMedia)})}var o=i(10),s=i(74),a=i(25);t.exports=o(n)}).call(e,i(1))},1190:function(t,e,i){(function(e){function n(){this.attributes({audioContainerSelector:".MomentMediaItem-entity--audio",audioIframeSelector:".MomentMediaItem-entity--audio iframe",audioPlayerLoadedClass:"is-loaded"}),this.playAudio=function(t,e){var i=this.getIframeForEvent(t);this.postMessage(i,"play")},this.pauseAudio=function(t,e){this.postMessage(this.getIframeForEvent(t),"pause")},this.muteAudio=function(t,e){this.postMessage(this.getIframeForEvent(t),"mute")},this.unmuteAudio=function(t,e){this.postMessage(this.getIframeForEvent(t),"unmute")},this.loadIframe=function(t){var i=e(t.target).closest(this.attr.audioContainerSelector),n=e("<iframe>").attr("src",i.data("src")+"?muteOnStart=true").hide();i.html(n).addClass(this.attr.audioPlayerLoadedClass),n.fadeIn()},this.unloadIframe=function(t){var i=e(t.target).closest(this.attr.audioContainerSelector);i.empty(),i.removeClass(this.attr.audioPlayerLoadedClass),i.trigger("uiMomentMediaPlayerUnloaded")},this.postMessage=function(t,e){t&&t.contentWindow&&t.contentWindow.postMessage({method:e,context:"player.js"},"*")},this.onMessage=function(t){var e=t.originalEvent||t,i=e.data;if(i&&"https://twitter.com"===e.origin){if("string"==typeof i)try{i=JSON.parse(i)}catch(t){return}"player.js"===i.context&&this.isValidMessage(e)&&this.handleMessage(e,i)}},this.handleMessage=function(t,e){var i=this.getIframeBySource(t.source);switch(e.event){case"audioPlayerLoadSuccess":i.trigger("uiMomentMediaPlayerLoaded",e.value);break;case"audioPlayerLoadFailure":this.handleFailureMessage(i,e.value);break;case"audioPlayerPlaybackComplete":i.trigger("uiMomentMediaPlaybackComplete")}},this.handleFailureMessage=function(t,e){switch(e.status){case 403:t.trigger("uiMomentMediaLoadErrorRestrict");break;default:t.trigger("uiMomentMediaLoadError")}},this.isValidMessage=function(t){return this.getIframeBySource(t.source).length>0},this.getIframeBySource=function(t){return this.select("audioIframeSelector").filter(function(){return this.contentWindow===t})},this.getIframeForEvent=function(t){return e(t.target).find("iframe").get(0)},this.after("initialize",function(){this.on("uiMomentMediaPlay",this.playAudio),this.on("uiMomentMediaPause",this.pauseAudio),this.on("uiMomentMediaMute",this.muteAudio),this.on("uiMomentMediaUnmute",this.unmuteAudio),this.on("uiAudioPlayerLoadIframe",this.loadIframe),this.on("uiAudioPlayerUnloadIframe",this.unloadIframe),this.on(window,"message",this.onMessage)})}var o=i(10),s=i(40);t.exports=o(n,s)}).call(e,i(1))},1191:function(t,e,i){(function(e){function n(){this.attributes({playableMediaSelector:".PlayableMedia"}),this.triggerEventOnPlayer=function(t,e,i){var n=this.getPlayerForEvent(t);n&&n.trigger(e,i)},this.playVideo=function(t,e){e.hasInteracted?this.triggerEventOnPlayer(t,"uiPlayMedia",e):this.triggerEventOnPlayer(t,"uiAutoplayMedia",e)},this.pauseVideo=function(t,e){e.hasInteracted?this.triggerEventOnPlayer(t,"uiPauseMedia"):this.triggerEventOnPlayer(t,"uiStopAutoplayingMedia",e)},this.muteVideo=function(t,e){this.triggerEventOnPlayer(t,"uiMuteMedia")},this.unmuteVideo=function(t,e){this.triggerEventOnPlayer(t,"uiUnmuteMedia")},this.getPlayerForEvent=function(t){var i=e(t.target),n=i.is(this.attr.playableMediaSelector)?i:i.find(this.attr.playableMediaSelector);return n},this.after("initialize",function(){this.on("uiMomentMediaPlay",this.playVideo),this.on("uiMomentMediaPause",this.pauseVideo),this.on("uiMomentMediaMute",this.muteVideo),this.on("uiMomentMediaUnmute",this.unmuteVideo),this.on("uiMomentsHasInjectedNewItems","uiWatchAutoplayMedia"),this.on("uiMomentsHasInjectedNewItems uiMomentsHasRemovedItems","uiWatchPlayableMedia"),this.on("uiPlayableMediaPlaybackComplete","uiMomentMediaPlaybackComplete"),this.on("uiPlayableMediaReady","uiMomentMediaPlayerLoaded"),this.on("uiUnloadPlayableMedia","uiMomentMediaPlayerUnloaded"),this.on("uiAutoplayMedia","uiMomentVideoAutoplayStart"),this.on("uiStopAutoplayingMedia","uiMomentVideoAutoplayStop")})}var o=i(10);t.exports=o(n)}).call(e,i(1))},1192:function(t,e,i){(function(e){function n(){this.attributes({mediaSelector:'.MomentMediaItem[data-playable="true"]',mediaEntitySelector:".MomentMediaItem-entity--audio, .MomentMediaItem-entity--video",mediaControlSelector:".MomentMediaControls",badgeLabelSelector:".MomentMediaBadge-iconLabel",errorLabelSelector:".MomentMediaItem-errorOverlay",autoplayingVideoSelector:'[data-autoplaying-media="true"]',playingSelector:".is-playing",playingClass:"is-playing",mutedClass:"is-muted",hasErrorClass:"has-error",hasInteractedClass:"has-interacted",loadedClass:"is-loaded",itemType:"tweet"}),this.playMedia=function(t){this.hasError(t)||this.isPlaying(t)||(t.$entity.trigger("uiMomentMediaPlay",s.merge(t.scribeData,{sourceType:t.sourceType,tweetId:t.tweetId,hasInteracted:this.hasInteracted(t)})),t.$media.addClass(this.attr.playingClass))},this.pauseMedia=function(t){!this.hasError(t)&&this.isPlaying(t)&&(t.$entity.trigger("uiMomentMediaPause",s.merge(t.scribeData,{sourceType:t.sourceType,tweetId:t.tweetId,hasInteracted:this.hasInteracted(t)})),t.$media.removeClass(this.attr.playingClass))},this.muteMedia=function(t){this.hasError(t)||this.isMuted(t)||(t.$entity.trigger("uiMomentMediaMute",t.scribeData),t.$media.addClass(this.attr.mutedClass),this.markInteraction(t))},this.unmuteMedia=function(t){!this.hasError(t)&&this.isMuted(t)&&(t.$entity.trigger("uiMomentMediaUnmute",t.scribeData),t.$media.removeClass(this.attr.mutedClass),this.markInteraction(t))},this.pausePlayingMedia=function(){var t=this.select("mediaSelector").filter(this.attr.playingSelector);t.each(function(_,t){this.pauseMedia(this.getMedia(e(t)))}.bind(this))},this.resumePlayingMedia=function(){var t=this.select("mediaSelector").filter(this.attr.autoplayingVideoSelector);t.length&&this.playMedia(this.getMedia(t))},this.onMediaMouseover=function(t){var e=this.getMediaForEvent(t);"audio"===e.sourceType&&this.playMedia(e),"gif"!==e.sourceType&&this.unmuteMedia(e)},this.onMediaMouseout=function(t){var e=this.getMediaForEvent(t);"audio"===e.sourceType&&this.pauseMedia(e),"gif"!==e.sourceType&&this.muteMedia(e)},this.onMediaClick=function(t){var e=this.getMediaForEvent(t);this.markInteraction(e),this.isPlaying(e)?this.pauseMedia(e):this.playMedia(e)},this.onPlaybackComplete=function(t,e){var i=this.getMediaForEvent(t);"gif"!==i.sourceType&&"vine"!==i.sourceType&&(i.$media.removeClass(this.attr.playingClass),this.playMedia(i))},this.onMediaLoaded=function(t,e){var i=this.getMediaForEvent(t);"audio"===i.sourceType&&this.onAudioLoaded(i,e)},this.onAudioLoaded=function(t,e){var i=t.$media.find(this.attr.badgeLabelSelector);e.artist&&e.title&&""===i.text()&&i.text(e.artist+" - "+e.title).addClass(this.attr.loadedClass)},this.onMediaUnloaded=function(t){this.resetMedia(this.getMediaForEvent(t))},this.onMediaLoadError=function(t){var e=this.getMediaForEvent(t),i=e.$media.find(this.attr.errorLabelSelector);"uiMomentMediaLoadErrorRestrict"===t.type?i.text("The owner has restricted access to this content."):i.text("This media cannot be played."),this.markError(e)},this.syncVideoAutoplayStart=function(t){var e=this.getMediaForEvent(t);this.isAutoplayingVideo(e)&&(this.hasInteracted(e)?this.playMedia(e):e.$media.addClass(this.attr.playingClass))},this.syncVideoAutoplayStop=function(t){var e=this.getMediaForEvent(t);this.isAutoplayingVideo(e)||(this.hasInteracted(e)?this.pauseMedia(e):e.$media.removeClass(this.attr.playingClass))},this.onTeardown=function(){var t=this.select("mediaSelector").filter(this.attr.playingSelector);t.each(function(_,t){this.resetMedia(this.getMedia(e(t)))}.bind(this))},this.getMediaForEvent=function(t){var i=e(t.target).closest(this.attr.mediaSelector);return this.getMedia(i)},this.getMedia=function(t){var e=t.find(this.attr.mediaEntitySelector);return{$media:t,$entity:e,sourceType:t.attr("data-source-type"),tweetId:e.attr("data-tweet-id"),scribeData:this.interactionData(e)}},this.isMuted=function(t){return t.$media.hasClass(this.attr.mutedClass)},this.isPlaying=function(t){return t.$media.hasClass(this.attr.playingClass)},this.isAutoplayingVideo=function(t){return t.$media.is(this.attr.autoplayingVideoSelector)},this.markError=function(t){t.$media.addClass(this.attr.hasErrorClass)},this.hasError=function(t){return t.$media.hasClass(this.attr.hasErrorClass)},this.markInteraction=function(t){t.$media.addClass(this.attr.hasInteractedClass)},this.hasInteracted=function(t){return t.$media.hasClass(this.attr.hasInteractedClass)},this.resetMedia=function(t){t.$media.addClass(this.attr.mutedClass),t.$media.removeClass(this.attr.playingClass),t.$media.removeClass(this.attr.hasInteractedClass),t.$media.removeClass(this.attr.hasErrorClass)},this.after("initialize",function(){this.on("mouseover",{mediaControlSelector:this.onMediaMouseover}),this.on("mouseout",{mediaControlSelector:this.onMediaMouseout}),this.on("click",{mediaControlSelector:this.onMediaClick}),this.on(document,"uiMomentMediaPlayerLoaded",this.onMediaLoaded),this.on(document,"uiMomentMediaPlayerUnloaded",this.onMediaUnloaded),this.on(document,"uiMomentMediaPlaybackComplete",this.onPlaybackComplete),this.on(document,"uiMomentMediaLoadError uiMomentMediaLoadErrorRestrict",this.onMediaLoadError),this.on(document,"uiMomentVideoAutoplayStart",this.syncVideoAutoplayStart),this.on(document,"uiMomentVideoAutoplayStop",this.syncVideoAutoplayStop),this.on(document,"uiOverlayNavigate",this.pausePlayingMedia),this.on(document,"uiOverlayClosed",this.resumePlayingMedia)}),this.before("teardown",this.onTeardown)}var o=i(10),s=i(25),a=(i(22),i(36));t.exports=o(n,a)}).call(e,i(1))},1193:function(t,e,i){function n(){this.scribeControlInteraction=function(t){return function(e,i){this.scribeInteraction({component:"capsule_item",action:t},i)}},this.after("initialize",function(){this.on("uiMomentMediaPlay",this.scribeControlInteraction("play")),this.on("uiMomentMediaPause",this.scribeControlInteraction("pause")),this.on("uiMomentMediaMute",this.scribeControlInteraction("mute")),this.on("uiMomentMediaUnmute",this.scribeControlInteraction("unmute"))})}var o=i(10),s=i(39);t.exports=o(n,s)},1194:function(t,e,i){(function(e){function n(){this.defaultAttrs({buttonSelector:".MomentMakerActionButtons-button--add",capsuleItemSelector:".MomentCapsuleItem",existingTweetsListSelector:".MomentMakerPage-existingTweets",recommendationsContainerSelector:".MomentMakerRecommendations",playableMediaSelector:".PlayableMedia",capsuleItemMargin:80}),this.onAddButtonClick=function(t,i){var n=e(t.target).closest(this.attr.capsuleItemSelector),o=n.attr("data-tweet-id");this.isExistingTweet(o)?this.trigger("uiShowError",{message:"Tweet is already in this Moment"}):this.trigger("uiMomentMakerAddTweet",{moment_id:this.attr.momentId,tweet_id:o,category:this.getCurrentCategory(),scribeData:s.scribeData({moment_id:this.attr.momentId,visibility:s.getMomentMakerTopBarVisibility()})})},this.onAddTweetFailure=function(){this.trigger("uiShowError",{message:"Something went wrong. This Tweet couldn't be added to this Moment right now. Give it a minute, then try again."})},this.onAddTweetSuccess=function(t,e){var i=this.getCapsuleItem(e.tweet_id),n=this.dom.$window.scrollTop(),o=i.height()+this.attr.capsuleItemMargin;this.dom.$existingTweetsList.append(i.clone()),this.trigger("uiMomentMakerDedupeRecommendedTweets",e),this.dom.$window.scrollTop(n+o)},this.getCapsuleItem=function(t){var e=this.attr.capsuleItemSelector+"[data-tweet-id="+t+"]",i=this.$node.find(e);return i.find(this.attr.playableMediaSelector).removeClass("watched playable-media-loaded"),i},this.getCurrentCategory=function(){return this.dom.$recommendationsContainer.attr("data-active-category")},this.isExistingTweet=function(t){return this.dom.$existingTweetsList.find('[data-tweet-id="'+t+'"]').length>0},this.after("initialize",function(){this.dom={$window:e(window),$existingTweetsList:e(this.attr.existingTweetsListSelector),$recommendationsContainer:e(this.attr.recommendationsContainerSelector)},this.on("click",{buttonSelector:this.onAddButtonClick}),this.on(document,"dataMomentMakerAddTweetSuccess",this.onAddTweetSuccess),this.on(document,"dataMomentMakerAddTweetFailure",this.onAddTweetFailure)})}var o=(i(22),i(10)),s=i(661);t.exports=o(n)}).call(e,i(1))},1195:function(t,e,i){(function(e){function n(){this.defaultAttrs({buttonSelector:".MomentMakerAddItemForm-button",inputSelector:".MomentMakerAddItemForm-input",existingTweetsListSelector:".MomentMakerPage-existingTweets",errorMessageSelector:".MomentMakerAddItemForm-error"}),this.getTweetId=function(){var t=r.exec(this.dom.$input.val());if(t&&t.length>0)return t[1]},this.onAddButtonClick=function(){var t=this.getTweetId();t&&this.trigger("uiMomentMakerAddTweet",{moment_id:this.attr.momentId,tweet_id:t,hydrate:!0,category:"urls",scribeData:a.scribeData({moment_id:this.attr.momentId,visibility:a.getMomentMakerTopBarVisibility()})})},this.onAddTweetSuccess=function(t,e){if(this.trigger("uiShowMessage",{message:"Tweet successfully added."}),this.dom.$input.val(""),e.html){var i=this.dom.$document.height()-this.dom.$window.scrollTop();this.dom.$existingTweetsList.append(e.html),this.dom.$existingTweetsList.trigger("uiMomentsHasInjectedNewItems"),this.dom.$window.scrollTop(this.dom.$document.height()-i)}},this.onTextChanged=function(){var t=this.getTweetId(),e=this.isExistingTweet(t),i=!!t&&!e,n=!this.dom.$input.val();t||n?e&&this.dom.$errorMessage.html(l.Duplicate):this.dom.$errorMessage.html(l.InvalidUrl),this.dom.$errorMessage.toggleClass("is-hidden",i||n),this.dom.$button.prop("disabled",!i||n)},this.isExistingTweet=function(t){return this.dom.$existingTweetsList.find('[data-tweet-id="'+t+'"]').length>0},this.after("initialize",function(){this.initTextNode(),this.dom={$button:this.select("buttonSelector"),$input:this.select("inputSelector"),$errorMessage:this.select("errorMessageSelector"),$existingTweetsList:e(this.attr.existingTweetsListSelector),$window:e(window),$document:e(document)},this.on("click",{buttonSelector:this.onAddButtonClick}),this.on("uiTextChanged",this.onTextChanged),this.on(document,"dataMomentMakerAddTweetSuccess",this.onAddTweetSuccess)})}var o=(i(22),i(213)),s=i(10),a=i(661);t.exports=s(n,o);var r=/.*twitter.com\/\w+\/status(?:es)?\/(\d+)/,l={InvalidUrl:"Tweet must be a link from Twitter.com",Duplicate:"Tweet is already in this Moment"}}).call(e,i(1))},1196:function(t,e,i){(function(e){function n(){this.defaultAttrs({makerMediaItemSelector:".MomentMakerCoverCropper-container",previewImageSelector:".MomentMakerCoverCropper .MomentMakerMediaInlinePreview-image",squarePreviewImageSelector:".MomentMakerCoverCropper .MomentMakerCoverCropper-squarePreview img",triggerSelector:".MomentMakerCapsuleCover .MomentMakerMediaActionButtons-button--crop",nextCropSelector:".MomentMakerCoverCropper-actions--nextCrop",saveCropSelector:".MomentMakerCoverCropper-actions--saveCrop",closeSelector:".MomentMakerCoverCropper-actions--cancelCrop",overlaySelector:".MomentMakerCoverCropper",pageSelector:".MomentMakerPage",existingCoverImageSelector:".MomentMakerCapsuleCover .MomentMediaItem-entity",cropAreaSelector:".MomentMakerCropOverlay-cropArea",cropImageSelector:".MomentMakerCoverCropper-imageContainer",croppingItemSelector:".MomentMakerCoverCropper-container",capsuleCoverSelector:".MomentMakerCapsuleCover",itemSelector:".MomentMediaItem",portraitClass:"is-portrait",landscapeClass:"is-landscape",noCropClass:"no-crop",hasCoverOverlayClass:"hasCoverOverlay",hasSmallImageClass:"hasSmallImage",extraOverlayHeight:246,minHeightForScrolling:500,croppingItemWidth:640}),this.showOverlay=function(){this.$page.addClass(this.attr.hasCoverOverlayClass),this.$overlay.show()},this.hideOverlay=function(){this.$page.removeClass(this.attr.hasCoverOverlayClass),this.$overlay.hide(),this.select("capsuleCoverSelector").find(this.attr.maskedImageSelector).empty()},this.onImageLoad=function(t){var e=t.get(0),i=e.height,n=e.width,o=n>i,s=o?this.attr.croppingItemWidth*i/n:this.attr.croppingItemWidth,a=o?this.attr.landcapeClass:this.attr.portraitClass,r=this.select("cropImageSelector");r.empty(),this.$overlay.css("minHeight",s+this.attr.extraOverlayHeight),this.$overlay.toggleClass(this.attr.hasSmallImageClass,s<this.attr.minHeightForScrolling),t.addClass(a),r.empty().append(t),this.showOverlay(),this.startSquareCrop()},this.showImage=function(){var t=this.select("existingCoverImageSelector").attr("data-preview-image-src"),i=e('<img class="MomentMakerCoverCropper-image"/>');i.on("load",this.onImageLoad.bind(this,i)),i.attr("src",t),this.$overlay.find(this.attr.cropAreaSelector).attr("data-preview-image-src",t),this.$squarePreview.attr("src",t)},this.clearMediaCropData=function(){this.select("capsuleCoverSelector").find(this.attr.cropAreaSelector).data({"mobile-no-crop":!1,height:"",width:"","mobile-portrait-crop-width":"","mobile-portrait-crop-height":"","mobile-portrait-crop-x":"","mobile-portrait-crop-y":"","square-crop-width":"","square-crop-height":"","square-crop-x":"","square-crop-y":""})},this.getMediaCropData=function(t,e){var i=this.select("existingCoverImageSelector"),n=i.closest(this.attr.itemSelector);return a.merge({moment_id:this.attr.momentId,media_id:i.data("media-id"),tweet_id:n.data("tweet-id"),aspect_ratio:e},this.formatMediaCropPositionForAjax(t))},this.startSquareCrop=function(){this.$overlay.removeClass(this.attr.portraitClass),this.enableCropping(this.$coverPreview,{cropMode:r.Square.mode})},this.startPortraitCrop=function(){this.saveCrop(r.Square.aspectRatio),this.$overlay.addClass(this.attr.portraitClass),this.enableCropping(this.$coverPreview,{cropMode:r.MobilePortrait.mode})},this.saveCrop=function(t){var e=this.scaleFromTimelineToNative(this.$croppingItem);this.setNativeMediaCropPosition(this.$croppingItem,e),this.$croppingItem.trigger("uiMomentMakerSetCoverCrop",this.getMediaCropData(this.$croppingItem,t)),t===r.MobilePortrait.aspectRatio&&this.hideOverlay()},this.after("initialize",function(){this.momentId=this.attr.momentId,this.$page=this.select("pageSelector"),this.$overlay=this.select("overlaySelector"),this.$coverPreview=this.select("makerMediaItemSelector"),this.$squarePreview=this.select("squarePreviewImageSelector"),this.$croppingItem=this.select("croppingItemSelector"),this.on("click",{closeSelector:this.hideOverlay,nextCropSelector:this.startPortraitCrop,saveCropSelector:this.saveCrop.bind(this,r.MobilePortrait.aspectRatio)}),this.on(document,"dataMomentMakerSetCoverSuccess",this.clearMediaCropData),this.on(document,"uiMomentMakerHasNewCoverImage",this.showImage),this.on(document,"click",{triggerSelector:this.showImage})})}var o=i(10),s=i(1197),a=i(25),r=i(1200),l=o(n,s);t.exports=l}).call(e,i(1))},1197:function(t,e,i){function n(){o.mixin(this,[a,r]),this.aspectRatio={MOBILEPORTRAIT:9/16,SQUARE:1},this.defaultAttrs({draggableClass:"ui-draggable",resizableClass:"ui-resizable",throttleInterval:16,overlayHandleLength:25,overlayHandleSelector:".MomentMakerCropOverlay-cropArea .ui-resizable-handle"}),this.enableCropping=function(t,e){this.currentCropMode=e.cropMode;var i=t.find(this.attr.cropAreaSelector);this.displayMaskedImage(t),this.initializeDraggable(i),this.initializeResizable(i),this.setTimelineMediaCropPosition(t,this.scaleFromNativeToTimeline(t)),this.setAspectRatio(i,this.aspectRatio[e.cropMode]),this.setPreviewSrc(t),this.updateNoCropState(t),this.showPreview(),this.enableDragging(t),this.enableResizing(t)},this.disableCropping=function(t,e){this.disableDragging(t),this.disableResizing(t),e&&this.noCropEnabled()?this.setNativeMediaNoCrop(t):e&&this.setNativeMediaCropPosition(t,this.scaleFromTimelineToNative(t))},this.initializeDraggable=function(t){t.draggable({containment:"parent",scroll:!1,drag:this.updatePreviewThrottled})},this.initializeResizable=function(t){t.resizable({containment:"parent",aspectRatio:!0,handles:"ne,se,sw,nw",minHeight:2*this.attr.overlayHandleLength,resize:this.updatePreviewThrottled})},this.updateNoCropState=function(t){var e=this.noCropEnabled();t.toggleClass(this.attr.noCropClass,e),e||this.currentCropMode||(this.currentCropMode="MOBILEPORTRAIT"),this.setPreviewPosition(t)},this.hasDraggable=function(t){return t.hasClass(this.attr.draggableClass)},this.hasResizable=function(t){return t.hasClass(this.attr.resizableClass)},this.enableDragging=function(t){t.find(this.attr.cropAreaSelector).draggable("enable")},this.disableDragging=function(t){t.find(this.attr.cropAreaSelector).draggable("disable")},this.enableResizing=function(t){t.find(this.attr.cropAreaSelector).resizable("enable")},this.disableResizing=function(t){t.find(this.attr.cropAreaSelector).resizable("disable")},this.setAspectRatio=function(t,e){t.resizable("option","aspectRatio",e)},this.noCropEnabled=function(){return this.$noCropInput.is(":checked")},this.mediaHasNoCrop=function(t){return t.find(this.attr.cropAreaSelector).data("mobile-no-crop")},this.after("initialize",function(){this.$noCropInput=this.select("noCropCheckboxSelector"),this.updatePreviewThrottled=s.throttle(this.updatePreview.bind(this),this.attr.throttleInterval)})}i(759);var o=i(20),s=i(25),a=i(1198),r=i(1199);t.exports=n},1198:function(t,e,i){(function(e){function n(){this.defaultAttrs({dataPreviewImageSrcAttr:"data-preview-image-src",maskedImageSelector:".MomentMakerMaskedImage",maskedImageClipSelector:".MomentMakerMaskedImage-imageClip",maskedImageTemplate:"moments/maker/moment_maker_masked_image",hasMaskClass:"has-mask"}),this.noCropPositionCss={top:"",left:"",height:"",width:""};var t={width:240,height:426},i={width:240,height:240};this.updatePreview=function(t,e){var i=e.helper.closest(this.attr.makerMediaItemSelector);this.setPreviewPosition(i)},this.getPreviewSrc=function(t){var e=t.find(this.attr.cropAreaSelector);return e.attr(this.attr.dataPreviewImageSrcAttr)},this.setPreviewSrc=function(t){this.$imagePreview.attr("src",this.getPreviewSrc(t))},this.displayMaskedImage=function(t){var i=this.getPreviewSrc(t),n=e(this.maskedImageTemplate.render({url:i}));t.find(this.attr.maskedImageSelector).replaceWith(n)},this.removeMaskedImage=function(t){t.find(this.attr.maskedImageSelector).empty().removeClass(this.attr.hasMaskClass)},this.updateMaskedImage=function(t,e,i,n){var o=t.find(this.attr.maskedImageSelector),s=i.top,a=i.left,r=s+e.height,l=a+e.width,h=n?"":"rect("+s+"px, "+l+"px, "+r+"px, "+a+"px)";o.find(this.attr.maskedImageClipSelector).css({clip:h})},this.setPreviewPosition=function(e){var n="SQUARE"===this.currentCropMode,o=n?this.$squareImagePreview:this.$imagePreview,s=n?i:t;if(!this.writeFrameExists){this.writeFrameExists=!0;var a=e.find(this.attr.cropAreaSelector),r=e[0].getBoundingClientRect(),l=a[0].getBoundingClientRect(),h=a.position(),c=e.hasClass(this.attr.noCropClass),d=c?this.noCropPositionCss:this.calculatePreviewPosition(r,l,h,s);requestAnimationFrame(function(){o.css(d),this.updateMaskedImage(e,l,h,c),this.writeFrameExists=!1}.bind(this))}},this.calculatePreviewPosition=function(t,e,i,n){var o=this.calculatePreviewSize(t,e,n),s=this.calculatePreviewOffset(t,o,i);return{top:s.top,left:s.left,width:o.width,height:o.height}},this.calculatePreviewSize=function(t,e,i){return{width:t.width*i.width/e.width,height:t.height*i.height/e.height}},this.calculatePreviewOffset=function(t,e,i){return{left:-i.left*e.width/t.width,top:-i.top*e.height/t.height}},this.hidePreview=function(){this.$imagePreview.addClass("u-hidden")},this.showPreview=function(){this.$imagePreview.removeClass("u-hidden")},this.after("initialize",function(){this.writeFrameExists=!1,this.$imagePreview=this.select("previewImageSelector"),this.$squareImagePreview=this.select("squarePreviewImageSelector"),this.maskedImageTemplate=o[this.attr.maskedImageTemplate]})}var o=i(108);t.exports=n}).call(e,i(1))},1199:function(t,e,i){function n(){this.scaleFromTimelineToNative=function(t){return this.scaleCrop(this.getTimelineMediaCropPosition(t),this.getNativeMediaCropPosition(t))},this.scaleFromNativeToTimeline=function(t){var e=this.scaleCrop(this.getNativeMediaCropPosition(t),this.getTimelineMediaCropPosition(t));
return this.isValidCropData(e)?e:this.getMediaDefaultCropSize(t)},this.scaleCrop=function(t,e){var i=e.imageWidth/t.imageWidth,n=t[this.currentCropMode]||{};return{x:n.x*i,y:n.y*i,width:n.width*i,height:n.height*i,imageWidth:e.imageWidth,imageHeight:e.imageHeight}},this.getTimelineMediaCropPosition=function(t){var e=t.find(this.attr.cropAreaSelector),i=t[0].getBoundingClientRect(),n=e[0].getBoundingClientRect(),o=e.position(),s={imageWidth:i.width,imageHeight:i.height};return s[this.currentCropMode]={x:o.left,y:o.top,width:n.width,height:n.height},s},this.setTimelineMediaCropPosition=function(t,e){t.find(this.attr.cropAreaSelector).css({left:e.x,top:e.y,width:e.width,height:e.height,position:"absolute"})},this.getExistingCropData=function(t){return{MOBILEPORTRAIT:{x:t.data("mobile-portrait-crop-x"),y:t.data("mobile-portrait-crop-y"),width:t.data("mobile-portrait-crop-width"),height:t.data("mobile-portrait-crop-height")},SQUARE:{x:t.data("square-crop-x"),y:t.data("square-crop-y"),width:t.data("square-crop-width"),height:t.data("square-crop-height")}}},this.isValidCropData=function(t){return t.height&&t.width&&void 0!==t.x&&void 0!==t.y},this.getPortraitCropSize=function(t){var e,i,n=t.width/t.height<this.aspectRatio.MOBILEPORTRAIT;return n?(i=t.width,e=i/this.aspectRatio.MOBILEPORTRAIT):(e=t.height,i=e*this.aspectRatio.MOBILEPORTRAIT),{x:(t.width-i)/2,y:0,width:i,height:e}},this.getSquareCropSize=function(t){var e=t.width<t.height,i=Math.min(t.width,t.height);return{x:e?0:(t.width-i)/2,y:e?(t.height-i)/2:0,width:i,height:i}},this.getMediaDefaultCropSize=function(t){var e=t[0].getBoundingClientRect();return"SQUARE"===this.currentCropMode?this.getSquareCropSize(e):this.getPortraitCropSize(e)},this.getNativeMediaCropPosition=function(t){var e=t.find(this.attr.cropAreaSelector),i=this.getExistingCropData(t.find(this.attr.cropAreaSelector)),n=e.data("width")||t.width(),s=e.data("height")||t.height();return o.merge(i,{imageWidth:n,imageHeight:s})},this.formatMediaCropPositionForAjax=function(t){var e=this.getNativeMediaCropPosition(t),i=t.hasClass(this.attr.noCropClass);return i?{height:e.imageHeight,width:e.imageWidth,no_crop:!0}:{mobile_portrait_crop_x:e.MOBILEPORTRAIT.x,mobile_portrait_crop_y:e.MOBILEPORTRAIT.y,mobile_portrait_crop_width:e.MOBILEPORTRAIT.width,mobile_portrait_crop_height:e.MOBILEPORTRAIT.height,square_crop_x:e.SQUARE.x,square_crop_y:e.SQUARE.y,square_crop_width:e.SQUARE.width,square_crop_height:e.SQUARE.height,width:e.imageWidth,height:e.imageHeight}},this.setNativeMediaCropPosition=function(t,e){"MOBILEPORTRAIT"===this.currentCropMode?t.find(this.attr.cropAreaSelector).data({"mobile-no-crop":!1,"mobile-portrait-crop-x":e.x,"mobile-portrait-crop-y":e.y,"mobile-portrait-crop-width":e.width,"mobile-portrait-crop-height":e.height}):t.find(this.attr.cropAreaSelector).data({"mobile-no-crop":!1,"square-crop-x":e.x,"square-crop-y":e.y,"square-crop-width":e.width,"square-crop-height":e.height})},this.setNativeMediaNoCrop=function(t){t.find(this.attr.cropAreaSelector).data({"mobile-no-crop":!0,"mobile-portrait-crop-x":"","mobile-portrait-crop-y":"","mobile-portrait-crop-width":"","mobile-portrait-crop-height":""})}}var o=i(25);t.exports=n},1200:function(t,e){var i={MobilePortrait:{mode:"MOBILEPORTRAIT",aspectRatio:"portrait"},Square:{mode:"SQUARE",aspectRatio:"square"}};t.exports=i},1201:function(t,e,i){(function(e){function n(){this.defaultAttrs({mediaItemSelector:".MomentMediaItem",attributionContainerSelector:".MomentMakerCapsuleCover-attribution",changeCoverSelector:".MomentMakerCapsuleCover-setButton, .MomentMakerCapsuleCover-changeButton",coverMediaSelector:".MomentMakerCapsuleCover-media",coverContainerSelector:".MomentMakerCapsuleCover-mediaMask",emptyCoverContainerSelector:".MomentMakerCapsuleCover-empty",spinnerSelector:".MomentMakerCapsuleCover-spinner",hasMediaClass:"has-media"}),this.displayNewCover=function(t,i){var n=e(i.media),o=this.select("mediaItemSelector");this.$node.addClass(this.attr.hasMediaClass),o.replaceWith(n.clone()),this.select("attributionContainerSelector").html(i.attribution),this.trigger("uiMomentsHasInjectedNewItems")},this.handleSetCoverSuccess=function(t,e){this.displayNewCover(t,e),this.trigger("uiMomentMakerHasNewCoverImage"),this.setCoverComplete()},this.handleCoverFailure=function(){this.trigger("uiShowMessage",{message:"Unable to set cover image"}),this.setCoverComplete()},this.showSpinner=function(){this.$spinner.show(),this.$coverContainer.hide()},this.setCoverComplete=function(){var t=this.hasCover();this.$spinner.hide(),this.$coverContainer.toggle(t),this.$emptyCoverContainer.toggle(!t)},this.hasCover=function(){return!!this.$coverContainer.closest(this.attr.coverMediaSelector).hasClass(this.attr.hasMediaClass)},this.after("initialize",function(){this.$spinner=this.select("spinnerSelector"),this.$coverContainer=this.select("coverContainerSelector"),this.$emptyCoverContainer=this.select("emptyCoverContainerSelector"),this.on("click",{changeCoverSelector:"uiMomentMakerChangeCoverButtonClicked"}),this.on(document,"uiMomentMakerSetCover uiMomentMakerSetCoverByMediaId",this.showSpinner),this.on(document,"dataMomentMakerSetCoverCropSuccess",this.displayNewCover),this.on(document,"dataMomentMakerSetCoverSuccess",this.handleSetCoverSuccess),this.on(document,"dataMomentMakerSetCoverFailure",this.handleCoverFailure)})}var o=(i(22),i(10)),s=o(n);t.exports=s}).call(e,i(1))},1202:function(t,e,i){(function(e){function n(){this.defaultAttrs({isRequired:!1,setFocusOnLoad:!1,emptyStateClass:"is-empty",textEditorSelector:".rich-editor",saveInterval:2e3}),this.shouldSaveText=function(t){return t!==this.currentMeta&&t.length<=this.attr.maxLength&&!(this.attr.isRequired&&!t)},this.triggerSaveMeta=function(t){var i;i="focusout"===t.type?e(t.target):e(t.target).find(this.attr.textEditorSelector);var n=i.data("field"),o=this.addHiddenText(this.getVisibleText());if(this.shouldSaveText(o)){var s={moment_id:this.attr.momentId,field:n,value:o};this.$node.toggleClass(this.attr.emptyStateClass,!o.length),this.currentMeta=o,this.trigger("uiMomentMakerEditMeta",s)}},this.onFailure=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.onSuccess=function(){},this.after("initialize",function(){this.initTextNode(),this.attr.setFocusOnLoad&&this.focus(),this.currentMeta=this.addHiddenText(this.getVisibleText()),this.on("click",this.focus),this.on("focusout",this.triggerSaveMeta),this.on("uiTextChanged",c(this.triggerSaveMeta,this.attr.saveInterval,this.attr.saveInterval,!1)),this.on(document,"dataMomentMakerEditMetaSuccess",this.onSuccess),this.on(document,"dataMomentMakerEditMetaFailure",this.onFailure)})}var o=(i(22),i(10)),s=i(218),a=i(304),r=i(303),l=i(213),h=i(302),c=i(240);t.exports=o(n,l,a,s,r,h)}).call(e,i(1))},1203:function(t,e,i){(function(e){function n(){this.defaultAttrs({previewImageSelector:".MomentMakerMediaInlinePreview-image",makerMediaItemSelector:".MomentMakerMediaContainer",mediaItemSelector:".MomentMediaItem",croppingItemSelector:".MomentMakerMediaContainer.is-cropping",croppingClass:"is-cropping",cropAreaSelector:".MomentMakerCropOverlay-cropArea",mediaSelector:".MomentMediaItem-entity",capsuleItemSelector:".MomentCapsuleItem",previewSelector:".MomentMakerMediaInlinePreview",maskSelector:".MomentMakerPage-mask",cancelButtonSelector:".js-cancelCrop",applyButtonSelector:".js-applyCrop",noCropCheckboxSelector:".MomentMakerMediaInlinePreview-noCrop",noCropClass:"no-crop",cropAllClass:"is-cropAllMode",croppableMediaSelector:".MomentMediaItem-entity:not(.MomentMediaItem-entity--audio)"}),this.isCropAllMode=function(){return this.$inlinePreview.hasClass(this.attr.cropAllClass)},this.endCrop=function(t){var e=this.select("croppingItemSelector"),i=this.isCropAllMode(),n=t&&i&&this.uncroppedMedia.length;this.trigger("uiMomentMakerTimelineCropEnd"),n?(this.disableCropping(e,t),e.removeClass(this.attr.croppingClass)):(this.unshiftContent(e),this.disableCropping(e,t)),t&&(e.find(this.attr.mediaSelector).trigger("uiMomentMakerUpdateCrop",this.getMediaCropData(e)),this.mediaHasNoCrop(e)&&this.trigger("uiMomentMakerTimelineSetNoCrop"),n?window.requestAnimationFrame(this.cropNextUncroppedMedia.bind(this)):i&&this.trigger("uiMomentMakerCropAllCompleted")),this.removeMaskedImage(e)},this.getMediaCropData=function(t){var e=t.find(this.attr.mediaSelector);return a.merge({moment_id:this.attr.momentId,tweet_id:t.closest(this.attr.capsuleItemSelector).data("tweet-id"),media_id:e.data("media-id")},this.formatMediaCropPositionForAjax(t))},this.positionPreview=function(t){var i=t.closest(this.attr.capsuleItemSelector).position(),n=t.position();t.addClass(this.attr.croppingClass),this.$inlinePreview.css({top:n.top+i.top}),e("html, body").animate({scrollTop:t.offset().top-100},this.isCropAllMode()?400:200)},this.shiftContent=function(){this.$node.addClass(this.attr.croppingClass),this.$node.animate({left:-100},200,function(){this.$inlinePreview.fadeIn(),this.$mask.fadeIn()}.bind(this))},this.unshiftContent=function(t){this.$inlinePreview.fadeOut(100),this.$mask.fadeOut(100),this.$node.animate({left:0},function(){this.$node.removeClass(this.attr.croppingClass),t.removeClass(this.attr.croppingClass),this.isCropAllMode()&&(this.$inlinePreview.removeClass(this.attr.cropAllClass),this.uncroppedMedia=[])}.bind(this))},this.startCrop=function(t,i){this.cropMediaItem(e(t.target))},this.cropMediaItem=function(t){var e=this.mediaHasNoCrop(t);this.positionPreview(t),this.$noCropInput.prop("checked",e),this.$inlinePreview.toggleClass(this.attr.noCropClass,e),this.enableCropping(t,{cropMode:r.MobilePortrait.mode}),this.shiftContent()},this.onNoCropChange=function(t,e){this.$inlinePreview.toggleClass(this.attr.noCropClass,this.noCropEnabled()),this.updateNoCropState(this.select("croppingItemSelector"))},this.triggerCropAll=function(t,e){var i=e&&e.mediaId||null;this.$inlinePreview.addClass(this.attr.cropAllClass),this.uncroppedMedia=this.getUncroppedMedia(i),this.cropNextUncroppedMedia()},this.cropNextUncroppedMedia=function(){var t=this.uncroppedMedia.shift();t&&t.length&&this.cropMediaItem(t)},this.hasValidCropData=function(t){return t.data("mobile-portrait-crop-height")&&t.data("mobile-portrait-crop-width")&&void 0!==t.data("mobile-portrait-crop-x")&&void 0!==t.data("mobile-portrait-crop-y")},this.filterOutCroppedMedia=function(t){var e=t.find(this.attr.cropAreaSelector);return e.data("mobile-no-crop")!==!0&&!this.hasValidCropData(e)},this.getUncroppedMedia=function(t){var i=this.select("croppableMediaSelector").toArray().map(function(t){return e(t).closest(this.attr.makerMediaItemSelector)}.bind(this)).filter(this.filterOutCroppedMedia.bind(this)),n=i.map(function(t){return t.find(this.attr.mediaSelector).attr("data-media-id")},this),o=Math.max(0,n.indexOf(t));return i.slice(o).concat(i.slice(0,o))},this.after("initialize",function(){this.$inlinePreview=this.select("previewSelector"),this.uncroppedMedia=[],this.$mask=e(this.attr.maskSelector),this.on(document,"uiMomentMakerCropAll",this.triggerCropAll),this.on(document,"uiMomentMakerTimelineCropStart",this.startCrop),this.on(document,"click",{maskSelector:this.endCrop.bind(this,!1)}),this.on("click",{cancelButtonSelector:this.endCrop.bind(this,!1),applyButtonSelector:this.endCrop.bind(this,!0)}),this.on("change",{noCropCheckboxSelector:this.onNoCropChange})})}var o=i(10),s=i(1197),a=i(25),r=i(1200);t.exports=o(s,n)}).call(e,i(1))},1204:function(t,e,i){(function(e){function n(){this.defaultAttrs({makerMediaItemSelector:".MomentMakerMediaContainer",mediaEntitySelector:".MomentMediaItem-entity",capsuleItemSelector:".MomentCapsuleItem",cropSelector:".MomentMakerMediaActionButtons-button--crop"}),this.handleCrop=function(t){e(t.target).closest(this.attr.makerMediaItemSelector).trigger("uiMomentMakerTimelineCropStart",{cropMode:s.MobilePortrait.mode})},this.after("initialize",function(){this.on("click",{cropSelector:this.handleCrop})})}var o=i(10),s=i(1200);t.exports=o(n)}).call(e,i(1))},1205:function(t,e,i){(function(e){function n(){this.defaultAttrs({isFixedClass:"is-fixed",scrollTopTargetSelector:".MomentMakerRecommendations",scrollTopButtonSelector:".MomentMakerRecommendations-scrollTopButton",scrollTopThreshold:75}),this.scrollUp=function(){var t=this.$scrollTopTarget.offset().top-this.attr.scrollTopThreshold;this.$body.animate({scrollTop:t})},this.possiblyShowScrollTopButton=function(){var t=this.$body.scrollTop(),e=this.$scrollTopTarget.offset().top,i=e+this.$scrollTopTarget.height(),n=e<t&&t<i;this.$button.toggleClass(this.attr.isFixedClass,n)},this.after("initialize",function(){this.$body=e("body"),this.$button=this.select("scrollTopButtonSelector"),this.$scrollTopTarget=this.select("scrollTopTargetSelector"),this.on("click",{scrollTopButtonSelector:this.scrollUp}),this.on(document,"scroll",s.throttle(this.possiblyShowScrollTopButton.bind(this),10))})}var o=i(10),s=i(25);t.exports=o(n)}).call(e,i(1))},1206:function(t,e,i){(function(e){function n(){this.defaultAttrs({categorySelector:".MomentMakerRecommendedCategories-item",likesSelector:'.MomentMakerRecommendedCategories-item[data-recommended-category="likes"]',buttonSelector:".MomentMakerRecommendedCategories-target",activeClass:"is-active",userColorTextClass:"u-textUserColor"}),this.onCategoryClick=function(t){var i=e(t.target).closest(this.attr.categorySelector);this.showCategory(i)},this.showLikesCategory=function(){var t=this.select("likesSelector");this.showCategory(t)},this.showCategory=function(t){var e=t.data("recommended-category");this.$allCategories.removeClass(this.attr.activeClass),this.$allButtons.removeClass(this.attr.userColorTextClass),t.addClass(this.attr.activeClass),t.find(this.attr.buttonSelector).addClass(this.attr.userColorTextClass),this.trigger(document,"uiMomentMakerCategorySelected",{category:e})},this.after("initialize",function(){this.$allCategories=this.select("categorySelector"),this.$allButtons=this.select("buttonSelector"),this.on("click",{categorySelector:this.onCategoryClick}),this.on(document,"uiSwiftLoaded uiPageChanged",this.showLikesCategory)})}var o=i(10),s=i(226);t.exports=o(n,s)}).call(e,i(1))},1207:function(t,e,i){(function(e){function n(){this.defaultAttrs({countToShow:10,moreSelector:".MomentMakerRecommendations-more",containerSelector:".MomentMakerPage-recommendedTweets",userViewContainerSelector:".MomentMakerRecommendedTweetsSearch-userContainer",existingTweetsSelector:".MomentMakerPage-existingTweets .MomentCapsuleItem",capsuleItemSelector:".MomentCapsuleItem",playableMediaSelector:".PlayableMedia",typeaheadSelector:".MomentMakerRecommendedTweetsSearch-typeahead",tweetsSearchFormSelector:".MomentMakerRecommendedTweetsSearch--tweets .MomentMakerRecommendedTweetsSearch-form",tweetsSearchInputSelector:".MomentMakerRecommendedTweetsSearch--tweets .MomentMakerRecommendedTweetsSearch-typeahead",spinnerSelector:".spinner",messageSelector:".MomentMakerRecommendations-message"}),this.onCategorySelected=function(t,e){var i=e.category===this.state.activeCategory,n=e.category&&this.state.cachedTweets[e.category],o=n&&n.items||[],s=!!o.length;i&&s||(this.reset(),this.state.activeCategory=e.category,this.$node.attr("data-active-category",this.state.activeCategory),s?(this.showCachedTweets(),this.potentiallyShowUserView()):this.shouldRequestResults(e.category)&&(this.dom.$spinner.show(),this.trigger(document,"uiMomentMakerGetRecommendedTweets",e)))},this.onUserSearchEntryComplete=function(t,e){this.reset(),this.dom.$spinner.show();var i=e&&e.item&&e.item.id;this.state.typeaheadUserId=i,i&&this.trigger(document,"uiMomentMakerGetRecommendedTweets",{category:s.Tweets,user_id:i}),this.hideTypeahead()},this.onTweetsSearchEntryComplete=function(t,e){if(!this.isNonEnterKeypress(t)){this.reset(),this.dom.$spinner.show();var i;"uiTypeaheadItemComplete"===t.type?i=e.query:(t.preventDefault(),i=this.dom.$tweetsSearchInput.val()),i&&this.trigger(document,"uiMomentMakerGetRecommendedTweets",{category:s.Search,query:i})}},this.onGetRecommendedTweetsSuccess=function(t,e){this.reset(),e.html?(this.showNewTweets(e),this.potentiallyShowUserView()):(this.trigger("uiMomentMakerGetRecommendedTweetsNoResults",e),this.showErrorMessage(this.getSuccessErrorMessage(e)))},this.onGetRecommendedTweetsFailure=function(){this.reset(),this.showErrorMessage(a[this.state.activeCategory])},this.onClickMore=function(){var t=this.state.cachedTweets[this.state.activeCategory].items,e=this.state.cachedTweets[this.state.activeCategory].offset,i=Math.min(this.attr.countToShow+e,t.length);this.trigger("uiMomentMakerRecommendedTweetsShowMore",{category:this.state.activeCategory}),this.showTweets(t,i)},this.onDedupe=function(t,i){if(this.state.cachedTweets&&this.state.activeCategory&&this.state.cachedTweets[this.state.activeCategory]){var n=this.attr.capsuleItemSelector+"[data-tweet-id="+i.tweet_id+"]",o=this.state.cachedTweets[this.state.activeCategory].items,s=e("<div></div>").html(o);s.find(n).remove(),this.state.cachedTweets[this.state.activeCategory].items=e(s.html()),this.showCachedTweets()}},this.shouldRequestResults=function(t){return t===s.Likes||t===s.Suggestions||t===s.Tweets},this.showNewTweets=function(t){var i=e(t.html).filter(this.attr.capsuleItemSelector),n=Math.min(this.attr.countToShow,i.length);this.state.cachedTweets[t.category]={items:i,offset:n},this.state.activeCategory===t.category&&this.showTweets(i,n),t.userView&&this.dom.$userViewContainer.html(t.userView)},this.showCachedTweets=function(){var t=this.state.cachedTweets[this.state.activeCategory].items,e=this.state.cachedTweets[this.state.activeCategory].offset,i=Math.min(e,t.length);this.showTweets(t,i)},this.showTweets=function(t,e){this.reset(),this.dom.$container.html(t.slice(0,e)),this.state.cachedTweets[this.state.activeCategory].offset=e,this.updateMoreButton(),this.dom.$container.trigger("uiMomentsHasInjectedNewItems")},this.potentiallyShowUserView=function(){this.dom.$userViewContainer.toggle(this.state.activeCategory===s.Tweets)},this.showErrorMessage=function(t){t.length&&this.dom.$message.html(t).show()},this.filterTypeaheadEvents=function(t,e){return function(i,n){this.state.activeCategory===t&&e(i,n)}},this.hideTypeahead=function(){this.select("typeaheadSelector").blur().val("")},this.isNonEnterKeypress=function(t){return"keyup"===t.type&&(t.which||t.keyCode)!==l},this.updateMoreButton=function(){var t=this.state.activeCategory&&this.state.cachedTweets[this.state.activeCategory]||{},e=t.items||[],i=t.offset||0,n=e.length>i;this.dom.$moreButton.toggle(n)},this.reset=function(){this.dom.$container.trigger("uiMomentsHasRemovedItems"),this.dom.$container.find(this.attr.playableMediaSelector).removeClass("watched"),this.dom.$container.empty(),this.dom.$userViewContainer.hide(),this.dom.$moreButton.hide(),this.dom.$message.hide(),this.dom.$spinner.hide()},this.getSuccessErrorMessage=function(t){var e="";return this.state.activeCategory===s.Likes?e=r[s.Likes]:this.state.activeCategory===s.Search?e=r[s.Search]:this.state.activeCategory===s.Suggestions?e=this.getSuggestionsErrorMessage():this.state.activeCategory===s.Tweets&&(e=this.getTweetsErrorMessage(t)),e},this.getSuggestionsErrorMessage=function(){var t="",i=e(this.attr.existingTweetsSelector).length>0;return t=i?"No Tweets to recommend yet. Add a few more Tweets to your Moment and we'll find something good!":"Add Tweets to this Moment and you'll see some recommended Tweets to add here."},this.getTweetsErrorMessage=function(t){var e="",i={user:t.fullName};return e=this.state.typeaheadUserId&&this.state.typeaheadUserId!==this.state.userId?t.isBlocked?_("You are blocked by {{user}} and cannot add {{user}}'s Tweets to this Moment.",i):t.isProtected?_("{{user}}'s Tweets are protected.",i):_("{{user}} hasn't Tweeted yet.",i):"You haven't Tweeted yet. Once you do, you'll be able to use your Tweets in a Moment."},this.after("initialize",function(){this.state={userId:this.attr.userId,activeCategory:null,typeaheadUserId:null,cachedTweets:{}},this.dom={$container:this.select("containerSelector"),$moreButton:this.select("moreSelector"),$userViewContainer:this.select("userViewContainerSelector"),$tweetsSearchForm:this.select("tweetsSearchFormSelector"),$tweetsSearchInput:this.select("tweetsSearchInputSelector"),$spinner:this.select("spinnerSelector"),$message:this.select("messageSelector")},this.on(document,"uiMomentMakerCategorySelected",this.onCategorySelected),this.on(document,"dataMomentMakerGetRecommendedTweetsSuccess",this.onGetRecommendedTweetsSuccess),this.on(document,"dataMomentMakerGetRecommendedTweetsFailure",this.onGetRecommendedTweetsFailure),this.on(document,"uiMomentMakerDedupeRecommendedTweets",this.onDedupe),this.on(this.dom.$moreButton,"click",this.onClickMore),this.on("uiTypeaheadItemComplete",this.filterTypeaheadEvents(s.Tweets,this.onUserSearchEntryComplete.bind(this))),this.on("uiTypeaheadItemComplete",this.filterTypeaheadEvents(s.Search,this.onTweetsSearchEntryComplete.bind(this))),this.on(this.dom.$tweetsSearchForm,"submit",this.onTweetsSearchEntryComplete),this.on(this.dom.$tweetsSearchInput,"keyup",this.onTweetsSearchEntryComplete)})}var o=i(10),_=i(22);t.exports=o(n);var s={Likes:"likes",Suggestions:"suggestions",Tweets:"tweets",Search:"search",Urls:"urls"},a={likes:"Hmm, Tweets you've liked aren't loading right now. Try again.",suggestions:"Hmm, recommended Tweets aren't loading right now. Try again.",tweets:"Hmm, Tweets aren't loading right now. Try again.",search:"Hmm, Tweets aren't loading right now. Try again."},r={likes:"You haven't liked any Tweets yet. When you like a Tweet, it will show up here and you can add it to a Moment.",search:"This search did not return any Tweets. Try again."},l=13}).call(e,i(1))},1208:function(t,e,i){function n(){this.getTweets=function(t,e){function i(){this.trigger("dataMomentMakerGetRecommendedTweetsFailure",e)}this.get({url:"/i/moments/edit/"+this.attr.momentId+"/recommendations/"+e.category,data:e,success:"dataMomentMakerGetRecommendedTweetsSuccess",error:i.bind(this)})},this.after("initialize",function(){this.on("uiMomentMakerGetRecommendedTweets",this.getTweets)})}var o=i(10),s=i(226);t.exports=o(n,s)},1209:function(t,e,i){(function(e){function n(){this.defaultAttrs({buttonSelector:".MomentMakerActionButtons-button--up, .MomentMakerActionButtons-button--down",upClass:"MomentMakerActionButtons-button--up",capsuleItemSelector:".MomentCapsuleItem",capsuleItemMargin:80}),this.adjustViewport=function(t,e){var i=this.$body.scrollTop(),n=t.height()+this.attr.capsuleItemMargin;"above"===e?this.$body.animate({scrollTop:i-n},300):this.$body.animate({scrollTop:i+n},300)},this.handleMove=function(t,i){var n=e(t.target).closest(this.attr.buttonSelector),o=n.closest(this.attr.capsuleItemSelector),s=n.hasClass(this.attr.upClass),a=s?o.prev():o.next();a.filter(this.attr.capsuleItemSelector).length&&(this.trigger("uiMomentMakerReorderTweet",{moment_id:this.attr.momentId,tweet_id:o.attr("data-tweet-id"),relative_tweet_id:a.attr("data-tweet-id"),above:s}),s?(this.adjustViewport(a,"above"),o.insertBefore(a)):(this.adjustViewport(a,"below"),o.insertAfter(a)))},this.after("initialize",function(){this.$body=e("body"),this.on("click",{buttonSelector:this.handleMove})})}var o=i(10);t.exports=o(n)}).call(e,i(1))},1210:function(t,e,i){(function(e){function n(){this.defaultAttrs({buttonSelector:".MomentMakerActionButtons-button--remove",capsuleItemSelector:".MomentCapsuleItem"}),this.handleRemoveFailure=function(t,e){this.trigger("uiShowError",{message:"Something went wrong. This Tweet couldn't be removed from this Moment right now. Give it a minute, then try again."})},this.handleRemove=function(t,e){var i=this.$tweet.attr("data-tweet-id");this.$tweet.remove(),e={moment_id:this.attr.momentId,tweet_id:i},this.trigger("uiMomentMakerRemoveTweet",e)},this.openDialog=function(t,i){this.$tweet=e(t.target).closest(this.attr.capsuleItemSelector),this.trigger("uiMomentMakerOpenDeleteTweetDialog")},this.after("initialize",function(){this.on("click",{buttonSelector:this.openDialog}),this.on(document,"uiMomentMakerConfirmDelete",this.handleRemove),this.on(document,"dataMomentMakerRemoveTweetFailure",this.handleRemoveFailure)})}var o=(i(22),i(10));t.exports=o(n)}).call(e,i(1))},1211:function(t,e,i){(function(e){function n(){this.defaultAttrs({momentId:null,sortButtonSelector:".MomentMakerSortMenu-sortButton",existingTweetsSelector:".MomentMakerPage-existingTweets",capsuleItemSelector:".MomentCapsuleItem"}),this.onSortButtonClicked=function(t,i){var n=e(t.target).attr("data-sort-by");this.trigger("uiMomentMakerSortMoment",{moment_id:this.attr.momentId,sort_by:n}),this.trigger("uiCloseDropdowns")},this.onSortMomentSuccess=function(t,e){e.html&&(this.trigger("uiMomentsDestroyCardsInContainer",{containerSelector:this.attr.existingTweetsSelector}),this.dom.$existingTweets.find(this.attr.capsuleItemSelector).remove(),this.dom.$existingTweets.append(e.html),this.dom.$existingTweets.trigger("uiMomentsHasInjectedNewItems"))},this.after("initialize",function(){this.dom={$existingTweets:e(this.attr.existingTweetsSelector)},this.on("click",{sortButtonSelector:this.onSortButtonClicked}),this.on(document,"dataMomentMakerSortMomentSuccess",this.onSortMomentSuccess)})}var o=i(10),s=i(397);t.exports=o(n,s)}).call(e,i(1))},1212:function(t,e,i){function n(){this.scribeUpdateVisibility=function(t,e,i){this.scribe({component:"visibility_dialog",element:i.visibility_mode,action:t})},this.scribeCropEvent=function(t){this.scribe({component:"moment_capsule",element:"media_crop",action:t})},this.scribeSetCoverEvent=function(t){this.scribe({component:"cover",element:"set",action:t})},this.scribeRecommendedTweetsEvent=function(t,e,i){this.scribe({component:"recommended_tweets",element:i.category,action:t},i&&i.scribeData)},this.after("initialize",function(){this.on("uiMomentMakerUpdateVisibilitySuccess",this.scribeUpdateVisibility.bind(this,"success")),this.on("uiMomentMakerUpdateVisibilityError",this.scribeUpdateVisibility.bind(this,"failure")),this.on(document,"uiMomentMakerTimelineCropStart",this.scribeCropEvent.bind(this,"start")),this.on(document,"uiMomentMakerTimelineCropEnd",this.scribeCropEvent.bind(this,"end")),this.on(document,"uiMomentMakerTimelineSetNoCrop",this.scribeCropEvent.bind(this,"none")),this.on(document,"dataMomentMakerUpdateCropSuccess",this.scribeCropEvent.bind(this,"success")),this.on(document,"dataMomentMakerUpdateCropFailure",this.scribeCropEvent.bind(this,"failure")),this.on(document,"uiMomentMakerSetCover",this.scribeSetCoverEvent.bind(this,"existing")),this.on(document,"uiMomentMakerSetCoverByMediaId",this.scribeSetCoverEvent.bind(this,"upload")),this.on(document,"uiMomentMakerCategorySelected",this.scribeRecommendedTweetsEvent.bind(this,"navigate")),this.on(document,"uiMomentMakerGetRecommendedTweets",this.scribeRecommendedTweetsEvent.bind(this,"get")),this.on(document,"uiMomentMakerGetRecommendedTweetsNoResults",this.scribeRecommendedTweetsEvent.bind(this,"no_results")),this.on(document,"dataMomentMakerGetRecommendedTweetsFailure",this.scribeRecommendedTweetsEvent.bind(this,"failure")),this.on(document,"uiMomentMakerRecommendedTweetsShowMore",this.scribeRecommendedTweetsEvent.bind(this,"more")),this.on(document,"uiMomentMakerAddTweet",this.scribeRecommendedTweetsEvent.bind(this,"add")),this.scribeOnEvent("uiMomentMakerCropAll",{component:"crop_before_publish_dialog",element:"crop_all",action:"click"}),this.scribeOnEvent("uiMomentMakerForcePublish",{component:"crop_before_publish_dialog",element:"force_publish_button",action:"click"}),this.scribeOnEvent("uiMomentMakerChangeCoverButtonClicked",{component:"cover",element:"set_button",action:"click"})})}var o=i(10),s=i(40);t.exports=o(n,s)},1213:function(t,e,i){(function(e){function n(){this.defaultAttrs({saveSelector:".js-confirmSaveCover",noMediaMessageSelector:".MomentMakerCoverDialog-noMediaMessage",imagePreviewSelector:".MomentMakerCoverDialog-cell--image",containerSelector:".MomentMakerCoverDialog-imageGridImages",coverPreviewTemplate:"moments/maker/moment_maker_cover_preview",hasSensitiveMediaDataAttr:"is-sensitive-media",itemSelector:".MomentMediaItem",uploadType:"moment_cover"}),this.displayPreviews=function(){var t=this.getMediaItems(),e=this.imageTemplate.render({items:t},a);this.$noMediaMessage.toggle(!t.length),this.$container.html(e),this.open()},this.mediaFilter=function(t){return!t.closest(this.attr.itemSelector).data(this.attr.hasSensitiveMediaDataAttr)},this.setActivePreview=function(t){this.$selectedImage=e(t.target).closest(this.attr.imagePreviewSelector),this.select("imagePreviewSelector").removeClass("selected"),this.$selectedImage.addClass("selected"),this.$saveButton.attr("disabled",!1)},this.saveCover=function(t,e){var i={moment_id:this.momentId,height:this.$selectedImage.data("height"),width:this.$selectedImage.data("width"),tweet_id:this.$selectedImage.data("tweet-id")},n=this.$selectedImage.data("media-id");n&&(i.media_id=n),this.trigger("uiMomentMakerSetCover",i)},this.getImageFromUpload=function(t,e){var i=s.update(e.fileId,{momentId:this.momentId});t.preventDefault(),i&&(this.trigger("uiMomentMakerSetCoverByMediaId",i),this.close())},this.after("initialize",function(){this.momentId=this.attr.momentId,this.imageTemplate=a[this.attr.coverPreviewTemplate],this.$selectedImage=null,this.$saveButton=this.select("saveSelector"),this.$container=this.select("containerSelector"),this.$noMediaMessage=this.select("noMediaMessageSelector"),this.on("click",{saveSelector:this.saveCover,imagePreviewSelector:this.setActivePreview}),this.on(document,"uiFileSelected",this.verifyUploadType(this.getImageFromUpload)),this.on(document,"dataMomentMakerSetCoverSuccess",this.close),this.on(document,"uiMomentMakerChangeCoverButtonClicked",this.displayPreviews)})}var o=i(10),s=i(210),a=i(108),r=i(59),l=i(1214),h=i(731),c=o(n,r,l,h);t.exports=c}).call(e,i(1))},1214:function(t,e,i){(function(e){function i(){this.defaultAttrs({tweetsWithMediaSelector:".MomentCapsuleItem--withMedia",mediaSelector:".MomentMakerPage-existingTweets .MomentMediaItem-entity:not(.MomentMediaItem-entity--audio)"}),this.mediaFilter=function(t){return!0},this.getMediaItems=function(){return e(this.attr.mediaSelector).toArray().map(function(t){return e(t)}).filter(this.mediaFilter.bind(this)).map(this.getDataForImage.bind(this))},this.getDataForImage=function(t){var e=t.closest(this.attr.tweetsWithMediaSelector),i=t.height(),n=t.width();return{moment_id:this.attr.momentId,media_id:t.data("media-id"),preview_url:t.data("preview-image-src"),alt_text:t.attr("alt"),height:i,width:n,tweet_id:e.data("tweet-id")}}}t.exports=i}).call(e,i(1))},1215:function(t,e,i){function n(){this.defaultAttrs({top:"20%",deleteSelector:".js-confirmDeleteTweet"}),this.onDeleteClick=function(){this.trigger("uiMomentMakerConfirmDelete"),this.close()},this.after("initialize",function(){this.on("click",{deleteSelector:this.onDeleteClick}),this.on(document,"uiMomentMakerOpenDeleteTweetDialog",this.open)})}var o=i(10),s=i(59),a=o(n,s);t.exports=a},1216:function(t,e,i){(function(e){function n(t){this.defaultAttrs({top:"20%",triggerSelector:".js-setMomentNSFWStatus",confirmButtonSelector:".js-confirm",checkboxSelector:".MomentDialog-toggleInput",topBarDropDownMenuSelector:".MomentMakerTopBarDropdownMenu",nsfwSetting:!1}),this.before("openWhenTriggerClicked",function(){this.select("checkboxSelector").prop("checked",this.isChecked)}),this.confirm=function(){var t=this.select("checkboxSelector").is(":checked");this.isChecked!==t&&this.trigger("uiMomentMakerUpdateNSFW",{moment_id:this.attr.momentId,value:!!t,previous_value:!t}),this.updateCheckedValue(t),this.close()},this.handleError=function(t,e){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."}),this.updateCheckedValue(e.previous_value)},this.updateCheckedValue=function(t){e(this.attr.topBarDropDownMenuSelector).attr("data-nsfw-moment",t),this.isChecked=t},this.after("initialize",function(){this.isChecked=this.attr.nsfwSetting,
this.on("click",{confirmButtonSelector:this.confirm}),this.on(document,"dataMomentMakerUpdateNSFWError",this.handleError)})}var o=i(10),s=i(59),a=(i(22),o(s,n));t.exports=a}).call(e,i(1))},1217:function(t,e,i){function n(){this.defaultAttrs({left:0,top:"20%",openOnPageChanged:!0,disabledButtonSelector:".js-close[disabled]"}),this.after("open",function(){this.select("disabledButtonSelector").prop("disabled","")})}var o=i(10),s=i(59);t.exports=o(s,n)},1218:function(t,e,i){(function(e){function n(t){this.defaultAttrs({top:"20%",triggerSelector:".js-momentMakerPublishLocation",confirmButtonSelector:".js-confirm",checkboxSelector:".MomentDialog-toggleInput",topBarDropDownMenuSelector:".MomentMakerTopBarDropdownMenu",dataAttr:"data-publish-location",publishLocationSetting:!1}),this.before("openWhenTriggerClicked",function(){this.select("checkboxSelector").prop("checked",this.isChecked)}),this.confirm=function(){var t=this.select("checkboxSelector").is(":checked");this.isChecked!==t&&this.trigger("uiMomentMakerUpdatePublishLocation",{moment_id:this.attr.momentId,value:!!t,previous_value:!t}),this.updateCheckedValue(t),this.close()},this.handleError=function(t,e){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."}),this.updateCheckedValue(e.previous_value)},this.updateCheckedValue=function(t){e(this.attr.topBarDropDownMenuSelector).attr(this.attr.dataAttr,t),this.isChecked=t},this.after("initialize",function(){this.isChecked=this.attr.publishLocationSetting,this.on("click",{confirmButtonSelector:this.confirm}),this.on(document,"dataMomentMakerUpdatePublishLocationError",this.handleError)})}var o=i(10),s=i(59);i(22);t.exports=o(s,n)}).call(e,i(1))},1219:function(t,e,i){(function(e){function n(){this.defaultAttrs({top:"20%",cropDialogTemplate:"dialogs/moments/moment_maker_crop_before_publish_dialog",textDialogTemplate:"dialogs/moments/moment_maker_text_validation_dialog",forcePublishSelector:".MomentMakerCropBeforePublishDialog-forcePublish",cropAllButtonSelector:".MomentMakerCropBeforePublishDialog-cropAll, .MomentMakerCropBeforePublishDialog-cellPlaceholder",cropImageButtonSelector:".MomentMakerCropBeforePublishDialog .MomentMakerCoverDialog-cell--image",publishButtonSelector:".MomentMakerTopBar-publishButton:not(.is-disabled)",cropAreaSelector:".MomentMakerCropOverlay-cropArea",mediaContainerSelector:".MomentMakerMediaContainer-mediaContainer",capsuleItemSelector:".MomentMakerPage-existingTweets .MomentCapsuleItem",titleTextSelector:".MomentCapsuleEditableMeta-title",descriptionTextSelector:".MomentCapsuleEditableMeta-description",emptyCoverSelector:".MomentMakerCapsuleCover-empty:visible",validationSubmitSelector:".js-momentValidationDialogSubmit",textEmptyClass:"is-empty"}),this.handleMomentValidation=function(){var t=this.getTitleDescriptionHtml()||this.getHasTweetHtml()||this.getCoverImageHtml()||this.getCropAllHtml();t?this.loadDialog(t):this.triggerPublish()},this.loadDialog=function(t){this.$node.html(t),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open()},this.triggerPublish=function(){this.closeImmediately(),this.trigger("uiMomentMakerTriggerVisibilityUpdate",{visibility_mode:"public"})},this.triggerForcePublish=function(){this.trigger("uiMomentMakerForcePublish"),this.triggerPublish()},this.getCoverImageHtml=function(){if(0!==e(this.attr.emptyCoverSelector).length)return this.renderTemplate({message:"No cover yet! You need a cover before you can publish this moment. Choose from existing media or upload something new."},this.textTemplate)},this.getTitleDescriptionHtml=function(){var t=e(this.attr.titleTextSelector).hasClass(this.attr.textEmptyClass),i=e(this.attr.descriptionTextSelector).hasClass(this.attr.textEmptyClass);return t?this.renderTemplate({message:"No title yet! You need a title and description before you can publish this Moment."},this.textTemplate):i?this.renderTemplate({message:"No description yet! You need a title and description before you can publish this Moment."},this.textTemplate):void 0},this.getHasTweetHtml=function(){if(0===e(this.attr.capsuleItemSelector).length)return this.renderTemplate({message:"No Tweets yet! To begin building a Moment, start by adding Tweets."},this.textTemplate)},this.hasValidCropData=function(t){return t.data("mobile-portrait-crop-height")&&t.data("mobile-portrait-crop-width")&&void 0!==t.data("mobile-portrait-crop-x")&&void 0!==t.data("mobile-portrait-crop-y")},this.around("mediaFilter",function(_,t){var e=t.closest(this.attr.mediaContainerSelector).find(this.attr.cropAreaSelector);return e.data("mobile-no-crop")!==!0&&!this.hasValidCropData(e)}),this.getCropAllHtml=function(){var t=this.getMediaItems();if(t.length){var e=t.length-3,i={more_count:e,show_more_placeholder:e>0,items:t.slice(0,3)};return i["more_count_"+h.PluralRules.rule_for(i.more_count)]=!0,this.renderTemplate(i,this.cropTemplate)}},this.triggerCropAll=function(t,e){this.closeImmediately(),this.trigger("uiMomentMakerCropAll")},this.triggerCropAllWithOffset=function(t,i){this.closeImmediately();var n=e(i.el).attr("data-media-id");this.trigger("uiMomentMakerCropAll",{mediaId:n})},this.renderTemplate=function(t,e){return e.render(t,s)},this.after("initialize",function(){this.on(this.attr.publishButtonSelector,"click",this.handleMomentValidation),this.on("click",{forcePublishSelector:this.triggerForcePublish,cropAllButtonSelector:this.triggerCropAll,cropImageButtonSelector:this.triggerCropAllWithOffset,validationSubmitSelector:this.close}),this.on(document,"uiMomentMakerCropAllCompleted",this.handleMomentValidation),this.cropTemplate=s[this.attr.cropDialogTemplate],this.textTemplate=s[this.attr.textDialogTemplate]})}var o=i(10),s=i(108),a=i(59),r=i(1199),l=i(1214),h=i(344);i(22);t.exports=o(l,r,a,n)}).call(e,i(1))},1220:function(t,e,i){(function(e){function n(t){this.defaultAttrs({top:"20%",triggerSelector:".js-setMomentMakerSetThemeColor",momentId:void 0,topBarDropDownMenuSelector:".MomentMakerTopBarDropdownMenu",topBarDropDownSubtextSelector:".MomentMakerTopBarDropdownMenu-subtext--color",colorButtonSelector:".MomentMakerThemeColorDialog-color",confirmButtonSelector:".js-confirm",selectedSelector:".is-selected",selectedClass:"is-selected",themeColorAttr:"data-theme-color"}),this.onSelectColor=function(t){this.select("selectedSelector").removeClass(this.attr.selectedClass),e(t.target).addClass(this.attr.selectedClass)},this.onConfirm=function(){var t=this.select("selectedSelector").attr(this.attr.themeColorAttr);this.state.currentColor!==t&&(this.trigger("uiMomentMakerUpdateThemeColor",{moment_id:this.attr.momentId,value:t,previous_value:this.state.currentColor}),this.updateState(t)),this.close()},this.onSuccess=function(t,e){this.trigger("uiShowMessage",{message:"Moment theme color updated successfully."})},this.onError=function(t,e){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."}),this.updateState(e.previous_value)},this.updateState=function(t){e(this.attr.topBarDropDownMenuSelector).attr("data-has-theme",!!t),e(this.attr.topBarDropDownSubtextSelector).css({backgroundColor:t}),this.state.currentColor=t},this.after("initialize",function(){this.state={},this.state.currentColor=this.select("selectedSelector").attr(this.attr.themeColorAttr),this.on("click",{colorButtonSelector:this.onSelectColor,confirmButtonSelector:this.onConfirm}),this.on(document,"dataMomentMakerUpdateThemeColorSuccess",this.onSuccess),this.on(document,"dataMomentMakerUpdateThemeColorError",this.onError)})}var o=i(10),s=i(59);i(22);t.exports=o(s,n)}).call(e,i(1))},1221:function(t,e,i){(function(e){function n(){this.defaultAttrs({top:"20%",triggerSelector:".js-updateMomentVisibility",confirmSelector:".js-confirm",cancelSelector:".cancel-action",titleSelector:".MomentMakerVisibilityDialog-title",descriptionSelector:".MomentMakerVisibilityDialog-description",shareUrlSelector:".MomentMakerVisibilityDialog-shareUrl",topBarSelector:".MomentMakerTopBar",dropdownButtonsSelector:".MomentMakerTopBarDropdownMenu .js-updateMomentVisibility",momentTitleSelector:".MomentCapsuleEditableMeta-title .rich-editor"}),this.before("openWhenTriggerClicked",function(t,i){this.setupDialog({newVisibility:e(t.target).attr(l.VisibilityMode)})}),this.onTriggerVisibilityUpdate=function(t,e){this.setupDialog({newVisibility:e.visibility_mode}),this.open()},this.onConfirm=function(t,e){this.trigger("uiMomentMakerUpdateVisibility",{moment_id:this.attr.momentId,visibility_mode:this.state.newVisibility}),this.close()},this.onUpdateVisibilitySuccess=function(t,i){this.$topBar.attr(l.VisibilityMode,i.visibility_mode),e(this.attr.dropdownButtonsSelector).each(function(t,n){var o=e(n),s=o.attr(l.VisibilityMode)===i.visibility_mode;o.prop("disabled",s)}),"public"===i.visibility_mode?this.trigger("uiMomentsOpenShareViaTweetDialog",{url:i.moment_permalink_url,title:e(this.attr.momentTitleSelector).text().trim()}):this.trigger("uiShowMessage",{message:"Moment updated successfully."})},this.setupDialog=function(t){this.state.newVisibility=t.newVisibility,this.state.currentVisibility=this.$topBar.attr(l.VisibilityMode);var e;this.state.newVisibility===a.Private?e=r.AnyToPrivate:this.state.newVisibility===a.Unlisted?e=r.AnyToUnlisted:this.state.currentVisibility===a.Private&&this.state.newVisibility===a.Public?e=r.PrivateToPublic:this.state.currentVisibility===a.Unlisted&&this.state.newVisibility===a.Public&&(e=r.UnlistedToPublic),this.select("titleSelector").text(e.title),this.select("descriptionSelector").text(e.description).toggleClass(r.UnlistedToPublic.class,e===r.UnlistedToPublic),this.select("confirmSelector").text(e.confirm),this.select("shareUrlSelector").toggle(e===r.AnyToUnlisted)},this.after("initialize",function(){this.state={newVisibility:void 0,currentVisibility:void 0},this.$topBar=e(this.attr.topBarSelector),this.on("click",{confirmSelector:this.onConfirm,cancelSelector:this.close}),this.on(document,"uiMomentMakerUpdateVisibilitySuccess",this.onUpdateVisibilitySuccess),this.on(document,"uiMomentMakerTriggerVisibilityUpdate",this.onTriggerVisibilityUpdate)})}var o=i(10),s=i(59);i(22);t.exports=o(s,n);var a={Private:"private",Unlisted:"unlisted",Public:"public"},r={AnyToPrivate:{title:"Unpublish Moment",description:"If you unpublish a Moment, it won't be visible to the public anymore. You can publish it again any time.",confirm:"Unpublish"},AnyToUnlisted:{title:"Make Moment link only",description:"This Moment will only be visible to people with the link. It won't be listed on your profile or be published anywhere else on Twitter.",confirm:"Confirm"},PrivateToPublic:{title:"Publish Moment",description:"Publish? This Moment will be publicly available and listed on your profile. You can always unpublish or update a Moment later.",confirm:"Publish"},UnlistedToPublic:{title:"Your Moment isn't public",description:"This Moment is currently only visible to people with the link. Making it public will list it on your profile and make it recommendable by Twitter.",confirm:"Publish anyway","class":"for-unlistedToPublic"}},l={VisibilityMode:"data-visibility-mode"}}).call(e,i(1))}});
//# sourceMappingURL=13.pages_moments.en.c800d303f304ba274d86.js.map